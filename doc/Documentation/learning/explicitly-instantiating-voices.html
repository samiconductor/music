<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Copyright C 1999-2012 by the authors.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.1
or any later version published by the Free Software Foundation;
with no Invariant Sections.
A copy of the license is included in the section entitled "GNU
Free Documentation License".

 -->
<!-- Created on January 1, 2014 by texi2html 1.82
texi2html was written by: 
            Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Many creative people.
Send bugs and suggestions to <texi2html-bug@nongnu.org>
-->
<head>
<title>LilyPond Learning Manual: 3.2.2 Explicitly instantiating voices</title>

<meta name="description" content="LilyPond Learning Manual: 3.2.2 Explicitly instantiating voices">
<meta name="keywords" content="LilyPond Learning Manual: 3.2.2 Explicitly instantiating voices">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2html 1.82">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link href="index.html#index" rel="start" title="LilyPond &mdash; Learning Manual">
<link href="lilypond-index.html#lilypond-index" rel="index" title="C. LilyPond index">
<link href="index_toc.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="index_abt.html#SEC_About" rel="help" title="About This Document">
<link href="voices-contain-music.html#voices-contain-music" rel="up" title="3.2 Voices contain music">
<link href="lilypond-index.html#lilypond-index" rel="next" title="C. LilyPond index">
<link href="i_0027m-hearing-voices.html#i_0027m-hearing-voices" rel="previous" title="3.2.1 I'm hearing Voices">
<link rel="stylesheet" type="text/css" title="Default style" href="../../Documentation/css/lilypond-manuals.css">
<!--[if lte IE 7]>
<link href="../../Documentation/css/lilypond-ie-fixes.css" rel="stylesheet" type="text/css">
<![endif]-->


</head>

<body lang="en" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#800080" alink="#FF0000">


<div id="main">
<a name="Explicitly-instantiating-voices"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="fundamental-concepts.html" title="Beginning of this chapter or previous chapter"> &lt;&lt; Fundamental concepts&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="index.html" title="Cover (top) of document" rel="start">Top</a>][<a href="index_toc.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="lilypond-index.html" title="Index" rel="index">Index</a>][<a href="index_abt.html#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="tweaking-output.html" title="Next chapter">&nbsp;Tweaking output &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="i_0027m-hearing-voices.html" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; I'm hearing Voices&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="voices-contain-music.html" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Voices contain music&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="voices-and-vocals.html" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Voices and vocals &gt; </a>]</td></tr></table>
<a name="explicitly-instantiating-voices"></a>
<h3 class="subsection">3.2.2 Explicitly instantiating voices</h3>

<a name="index-_005cvoiceOne"></a>
<a name="index-_005cvoiceOne-1"></a>
<a name="index-voiceOne"></a>
<a name="index-voiceOne-1"></a>
<a name="index-_005cvoiceTwo"></a>
<a name="index-_005cvoiceTwo-1"></a>
<a name="index-voiceTwo"></a>
<a name="index-voiceTwo-1"></a>
<a name="index-_005cvoiceThree"></a>
<a name="index-_005cvoiceThree-1"></a>
<a name="index-voiceThree"></a>
<a name="index-voiceThree-1"></a>
<a name="index-_005cvoiceFour"></a>
<a name="index-_005cvoiceFour-1"></a>
<a name="index-voiceFour"></a>
<a name="index-voiceFour-1"></a>
<a name="index-_005coneVoice"></a>
<a name="index-_005coneVoice-1"></a>
<a name="index-oneVoice"></a>
<a name="index-oneVoice-1"></a>
<a name="index-_005cnew-Voice"></a>
<a name="index-_005cnew-Voice-1"></a>
<a name="index-voice-contexts_002c-creating"></a>

<p>Voice contexts can also be created manually
inside a <code>&lt;&lt; &gt;&gt;</code> block to create polyphonic music, using
<code>\voiceOne</code> &hellip; <code>\voiceFour</code> to indicate the required
directions of stems, slurs, etc.  In longer scores this method
is clearer, as it permits the voices to be separated and to be
given more descriptive names.
</p>
<p>Specifically, the construct <code>&lt;&lt; \\ &gt;&gt;</code> which we used in
the previous section:
</p>
<blockquote><pre class="example">\new Staff {
  \relative c' {
    &lt;&lt; { e4 f g a } \\ { c,4 d e f } &gt;&gt;
  }
}
</pre></blockquote>

<p>is equivalent to
</p>
<blockquote><pre class="example">\new Staff &lt;&lt;
  \new Voice = &quot;1&quot; { \voiceOne \relative c' { e4 f g a } }
  \new Voice = &quot;2&quot; { \voiceTwo \relative c' { c4 d e f } }
&gt;&gt;
</pre></blockquote>

<p>Both of the above would produce
</p>
<blockquote><p>
 <a href="../c2/lily-6ff031c4.ly">
  <img align="middle"
       border="0"
       src="../c2/lily-6ff031c4.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<a name="index-voices_002c-reverting-to-single"></a>
<a name="index-reverting-to-a-single-voice"></a>

<p>The <code>\voiceXXX</code> commands set the direction of stems, slurs,
ties, articulations, text annotations, augmentation dots of dotted
notes, and fingerings.  <code>\voiceOne</code> and <code>\voiceThree</code>
make these objects point upwards, while <code>\voiceTwo</code> and
<code>\voiceFour</code> make them point downwards.  These commands also
generate a horizontal shift for each voice when this is required
to avoid clashes of note heads.  The command <code>\oneVoice</code>
reverts the settings back to the normal values for a single voice.
</p>
<p>Let us see in some simple examples exactly what effect
<code>\oneVoice</code>, <code>\voiceOne</code> and <code>voiceTwo</code> have on
markup, ties, slurs, and dynamics:
</p>
<blockquote><pre class="verbatim">\relative c' {
  % Default behavior or behavior after \oneVoice
  c4 d8~ d e4( f | g4 a) b-&gt; c |
}
</pre><p>
 <a href="../f0/lily-bd882165.ly">
  <img align="middle"
       border="0"
       src="../f0/lily-bd882165.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<blockquote><pre class="verbatim">\relative c' {
  \voiceOne
  c4 d8~ d e4( f | g4 a) b-&gt; c |
  \oneVoice
  c,4 d8~ d e4( f | g4 a) b-&gt; c |
}
</pre><p>
 <a href="../c6/lily-2808fd17.ly">
  <img align="middle"
       border="0"
       src="../c6/lily-2808fd17.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<blockquote><pre class="verbatim">\relative c' {
  \voiceTwo
  c4 d8~ d e4( f | g4 a) b-&gt; c |
  \oneVoice
  c,4 d8~ d e4( f | g4 a) b-&gt; c |
}
</pre><p>
 <a href="../eb/lily-8f62d768.ly">
  <img align="middle"
       border="0"
       src="../eb/lily-8f62d768.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>Now let&rsquo;s look at three different ways to notate the same passage of
polyphonic music, each of which is advantageous in different
circumstances, using the example from the previous section.
</p>
<p>An expression that appears directly inside a <code>&lt;&lt; &gt;&gt;</code> belongs to the
main voice (but, note, <strong>not</strong> in a <code>&lt;&lt; \\ &gt;&gt;</code> construct).
This is useful when extra voices appear while the main voice is playing.
Here is a more correct rendition of our example.  The red diamond-shaped
notes demonstrate that the main melody is now in a single voice context,
permitting a phrasing slur to be drawn over them.
</p>
<blockquote><pre class="verbatim">\new Staff \relative c' {
  \voiceOneStyle
  % This section is homophonic
  c16^( d e f
  % Start simultaneous section of three voices
  &lt;&lt;
    % Continue the main voice in parallel
    { g4 f e | d2 e) | }
    % Initiate second voice
    \new Voice {
      % Set stems, etc., down
      \voiceTwo
      r8 e4 d c8~ | c8 b16 a b8 g~ g2 |
    }
    % Initiate third voice
    \new Voice {
      % Set stems, etc, up
      \voiceThree
      s2. | s4 b c2 |
    }
  &gt;&gt;
}
</pre><p>
 <a href="../0e/lily-b8ad34e5.ly">
  <img align="middle"
       border="0"
       src="../0e/lily-b8ad34e5.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<a name="index-nesting-music-expressions"></a>
<a name="index-nesting-simultaneous-constructs"></a>
<a name="index-nesting-voices"></a>
<a name="index-voices_002c-temporary"></a>
<a name="index-voices_002c-nesting"></a>

<p>More deeply nested polyphony constructs are possible, and if a
voice appears only briefly this might be a more natural way to
typeset the music:
</p>
<blockquote><pre class="verbatim">\new Staff \relative c' {
  c16^( d e f
  &lt;&lt;
    { g4 f e | d2 e) | }
    \new Voice {
      \voiceTwo
      r8 e4 d c8~ |
      &lt;&lt;
        { c8 b16 a b8 g~ g2 | }
        \new Voice {
          \voiceThree
          s4 b c2 |
        }
      &gt;&gt;
    }
  &gt;&gt;
}
</pre><p>
 <a href="../6c/lily-242a6bb6.ly">
  <img align="middle"
       border="0"
       src="../6c/lily-242a6bb6.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<a name="index-spacing-notes"></a>

<p>This method of nesting new voices briefly is useful
when only small sections of the music
are polyphonic, but when the whole staff is largely polyphonic
it can be clearer to use multiple voices throughout, using
spacing notes to step over sections where the voice is silent,
as here:
</p>
<blockquote><pre class="verbatim">\new Staff \relative c' &lt;&lt;
  % Initiate first voice
  \new Voice {
    \voiceOne
    c16^( d e f g4 f e | d2 e) |
  }
  % Initiate second voice
  \new Voice {
    % Set stems, etc, down
    \voiceTwo
    s4 r8 e4 d c8~ | c8 b16 a b8 g~ g2 |
  }
  % Initiate third voice
  \new Voice {
    % Set stems, etc, up
    \voiceThree
    s1 | s4 b c2 |
  }
&gt;&gt;
</pre><p>
 <a href="../18/lily-3f80e03e.ly">
  <img align="middle"
       border="0"
       src="../18/lily-3f80e03e.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<a name="Note-columns"></a>
<h4 class="subsubheading">Note columns</h4>

<a name="index-note-column"></a>
<a name="index-note-collisions"></a>
<a name="index-collisions_002c-notes"></a>
<a name="index-shift-commands"></a>
<a name="index-_005cshiftOff"></a>
<a name="index-_005cshiftOff-1"></a>
<a name="index-shiftOff"></a>
<a name="index-shiftOff-1"></a>
<a name="index-_005cshiftOn"></a>
<a name="index-_005cshiftOn-1"></a>
<a name="index-shiftOn"></a>
<a name="index-shiftOn-1"></a>
<a name="index-_005cshiftOnn"></a>
<a name="index-_005cshiftOnn-1"></a>
<a name="index-shiftOnn"></a>
<a name="index-shiftOnn-1"></a>
<a name="index-_005cshiftOnnn"></a>
<a name="index-_005cshiftOnnn-1"></a>
<a name="index-shiftOnnn"></a>
<a name="index-shiftOnnn-1"></a>

<p>Closely spaced notes in a chord, or notes occurring at the same
time in different voices, are arranged in two, occasionally more,
columns to prevent the note heads overlapping.  These are called
note columns.  There are separate columns for each voice, and
the currently specified voice-dependent shift is applied to the
note column if there would otherwise be a collision.  This can
be seen in the example above.  In bar 2 the C in voice two is
shifted to the right relative to the D in voice one, and in the
final chord the C in voice three is also shifted to the right
relative to the other notes.
</p>
<p>The <code>\shiftOn</code>, <code>\shiftOnn</code>, <code>\shiftOnnn</code>, and
<code>\shiftOff</code> commands specify the degree to which notes and
chords of the voice should be shifted if a collision
would otherwise occur.  By default, the outer voices (normally
voices one and two) have <code>\shiftOff</code> specified, while the
inner voices (three and four) have <code>\shiftOn</code> specified.
When a shift is applied, voices one and three are shifted to
the right and voices two and four to the left.
</p>
<p><code>\shiftOnn</code> and <code>\shiftOnnn</code> define further shift
levels which may be specified temporarily to resolve collisions
in complex situations &ndash; see <a href="real-music-example.html">Real music example</a>.
</p>
<p>A note column can contain just one note (or chord) from a voice
with stems up and one note (or chord) from a voice with stems
down.  If notes from two voices which have their stems in the
same direction are placed at the same position and both voices
have no shift or the same shift specified, the error message
&ldquo;Too many clashing note columns&rdquo; will be produced.
</p>

<a name="See-also-16"></a>
<h4 class="subsubheading">See also</h4>
<p>Notation Reference: <a name="index-Multiple-voices-1"></a>
<a href="../notation/multiple-voices.html">Multiple voices</a>.
</p>

<hr size="6">
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="fundamental-concepts.html" title="Beginning of this chapter or previous chapter"> &lt;&lt; Fundamental concepts&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="index.html" title="Cover (top) of document" rel="start">Top</a>][<a href="index_toc.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="lilypond-index.html" title="Index" rel="index">Index</a>][<a href="index_abt.html#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="tweaking-output.html" title="Next chapter">&nbsp;Tweaking output &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="i_0027m-hearing-voices.html" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; I'm hearing Voices&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="voices-contain-music.html" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Voices contain music&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="voices-and-vocals.html" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Voices and vocals &gt; </a>]</td></tr></table>
<!-- footer_tag -->
<div class="footer">
<!-- This footer was autogenerated by /build/buildd/lilypond-2.16.2/scripts/build/out/www_post -->
<p class="footer_version">
This page is for LilyPond-2.16.2 (stable-branch).
</p>
<p class="footer_report">
We welcome your aid; please <a href="http://lilypond.org/help-us.html">help us</a> by reporting errors to our <a href="http://post.gmane.org/post.php?group=gmane.comp.gnu.lilypond.bugs">bug list</a>.
</p>
</div>


<p id="languages">
<!-- These links were autogenerated by /build/buildd/lilypond-2.16.2/scripts/build/out/www_post -->
 Other languages: <a href="explicitly-instantiating-voices.cs.html">česky</a>, <a href="explicitly-instantiating-voices.de.html">deutsch</a>, <a href="explicitly-instantiating-voices.es.html">español</a>, <a href="explicitly-instantiating-voices.fr.html">français</a>, <a href="explicitly-instantiating-voices.hu.html">magyar</a>, <a href="explicitly-instantiating-voices.it.html">italiano</a>, <a href="explicitly-instantiating-voices.ja.html">日本語</a>, <a href="explicitly-instantiating-voices.nl.html">nederlands</a>.
 <br>
 About <a href="http://www.lilypond.org/website/misc/browser-language">automatic language selection</a>.
</p>

<!-- FOOTER -->

<!-- end div#main here -->
</div>



<div id="tocframe">
<p class="toc_uplink"><a href="../../Documentation/web/manuals.html"
         title="Documentation Index">&lt;&lt; Back to Documentation Index</a></p>
<h4 class="toc_header"> <a href="index.html" title="Start of the manual">LilyPond &mdash; Learning Manual</a></h4>
<div class="contents">
<ul class="toc">
  <li class=""><a name="toc-Tutorial-1" href="tutorial.html">1. Tutorial</a>
  <ul class="toc">
    <li class=""><a name="toc-Compiling-a-file-1" href="compiling-a-file.html">1.1 Compiling a file</a>    </li>
    <li class=""><a name="toc-How-to-write-input-files-1" href="how-to-write-input-files.html">1.2 How to write input files</a>    </li>
    <li class=""><a name="toc-Dealing-with-errors-1" href="dealing-with-errors.html">1.3 Dealing with errors</a>    </li>
    <li class=""><a name="toc-How-to-read-the-manuals-1" href="how-to-read-the-manuals.html">1.4 How to read the manuals</a>    </li>
  </ul>
  </li>
  <li class=""><a name="toc-Common-notation-1" href="common-notation.html">2. Common notation</a>
  <ul class="toc">
    <li class=""><a name="toc-Single-staff-notation-1" href="single-staff-notation.html">2.1 Single staff notation</a>    </li>
    <li class=""><a name="toc-Multiple-notes-at-once-1" href="multiple-notes-at-once.html">2.2 Multiple notes at once</a>    </li>
    <li class=""><a name="toc-Songs-1" href="songs.html">2.3 Songs</a>    </li>
    <li class=""><a name="toc-Final-touches-1" href="final-touches.html">2.4 Final touches</a>    </li>
  </ul>
  </li>
  <li class=" toc_current"><a name="toc-Fundamental-concepts-1" href="fundamental-concepts.html">3. Fundamental concepts</a>
  <ul class="toc">
    <li class=""><a name="toc-How-LilyPond-input-files-work-1" href="how-lilypond-input-files-work.html">3.1 How LilyPond input files work</a>    </li>
    <li class=" toc_current"><a name="toc-Voices-contain-music-1" href="voices-contain-music.html">3.2 Voices contain music</a>
    <ul class="toc">
      <li class=""><a name="toc-I_0027m-hearing-Voices-1" href="i_0027m-hearing-voices.html">3.2.1 I&rsquo;m hearing Voices</a>      </li>
      <li class=" toc_current"><a name="toc-Explicitly-instantiating-voices-1" href="explicitly-instantiating-voices.html">3.2.2 Explicitly instantiating voices</a>      </li>
      <li class=""><a name="toc-Voices-and-vocals-1" href="voices-and-vocals.html">3.2.3 Voices and vocals</a>      </li>
    </ul>
    </li>
    <li class=""><a name="toc-Contexts-and-engravers-1" href="contexts-and-engravers.html">3.3 Contexts and engravers</a>    </li>
    <li class=""><a name="toc-Extending-the-templates-1" href="extending-the-templates.html">3.4 Extending the templates</a>    </li>
  </ul>
  </li>
  <li class=""><a name="toc-Tweaking-output-1" href="tweaking-output.html">4. Tweaking output</a>
  <ul class="toc">
    <li class=""><a name="toc-Tweaking-basics-1" href="tweaking-basics.html">4.1 Tweaking basics</a>    </li>
    <li class=""><a name="toc-The-Internals-Reference-manual-1" href="the-internals-reference-manual.html">4.2 The Internals Reference manual</a>    </li>
    <li class=""><a name="toc-Appearance-of-objects-1" href="appearance-of-objects.html">4.3 Appearance of objects</a>    </li>
    <li class=""><a name="toc-Placement-of-objects-1" href="placement-of-objects.html">4.4 Placement of objects</a>    </li>
    <li class=""><a name="toc-Collisions-of-objects-1" href="collisions-of-objects.html">4.5 Collisions of objects</a>    </li>
    <li class=""><a name="toc-Further-tweaking-1" href="further-tweaking.html">4.6 Further tweaking</a>    </li>
  </ul>
  </li>
  <li class=""><a name="toc-Templates-1" href="templates.html">A. Templates</a>
  <ul class="toc">
    <li class=""><a name="toc-Single-staff-1" href="single-staff.html">A.1 Single staff</a>    </li>
    <li class=""><a name="toc-Piano-templates-1" href="piano-templates.html">A.2 Piano templates</a>    </li>
    <li class=""><a name="toc-String-quartet-2" href="string-quartet.html">A.3 String quartet</a>    </li>
    <li class=""><a name="toc-Vocal-ensembles-1" href="vocal-ensembles.html">A.4 Vocal ensembles</a>    </li>
    <li class=""><a name="toc-Orchestral-templates-1" href="orchestral-templates.html">A.5 Orchestral templates</a>    </li>
    <li class=""><a name="toc-Ancient-notation-templates-1" href="ancient-notation-templates.html">A.6 Ancient notation templates</a>    </li>
    <li class=""><a name="toc-Other-templates-1" href="other-templates.html">A.7 Other templates</a>    </li>
  </ul>
  </li>
  <li class=""><a name="toc-GNU-Free-Documentation-License-1" href="gnu-free-documentation-license.html">B. GNU Free Documentation License</a>  </li>
  <li class=""><a name="toc-LilyPond-index-1" href="lilypond-index.html">C. LilyPond index</a>  </li>
<li>
<!--
we depend on an external entity here, which we cannot control.  Suppose
we go from 2.16.x to 2.17.x and put the documentation under "v2.17".
For some time, Google won't have the new location in its index, so the
search would get nothing.  It would be better to keep "v2.16" in the
search for a while and have a redirection from "v2.16" to "v2.17".
-->

<form action="http://google.com/search"
      method="get"
      name="search"
      onSubmit="search.q.value='site:lilypond.org/doc/v2.16 '
		+ search.brute_query.value"
      onMouseMove="search.q.value='site:lilypond.org/doc/v2.16 '
		   + search.brute_query.value"
      onKeyUp="search.q.value='site:lilypond.org/doc/v2.16 '
	       + search.brute_query.value">
  <input type="hidden" name="btnG" value="Google Search">
  <input type="text" name="brute_query" onfocus="this.value=''" value="Search">
  <input type="hidden" name="q" value="">
</form>
</li>
</ul>
</div>
</div>

</body>
</html>
