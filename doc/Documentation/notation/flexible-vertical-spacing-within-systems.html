<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Copyright C 1999-2012 by the authors.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.1
or any later version published by the Free Software Foundation;
with no Invariant Sections.
A copy of the license is included in the section entitled "GNU
Free Documentation License".

 -->
<!-- Created on January 1, 2014 by texi2html 1.82
texi2html was written by: 
            Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Many creative people.
Send bugs and suggestions to <texi2html-bug@nongnu.org>
-->
<head>
<title>LilyPond Notation Reference: 4.4.1 Flexible vertical spacing within systems</title>

<meta name="description" content="LilyPond Notation Reference: 4.4.1 Flexible vertical spacing within systems">
<meta name="keywords" content="LilyPond Notation Reference: 4.4.1 Flexible vertical spacing within systems">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2html 1.82">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link href="index.html#index" rel="start" title="LilyPond &mdash; Notation Reference">
<link href="lilypond-command-index.html#lilypond-command-index" rel="index" title="E. LilyPond command index">
<link href="index_toc.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="index_abt.html#SEC_About" rel="help" title="About This Document">
<link href="vertical-spacing.html#vertical-spacing" rel="up" title="4.4 Vertical spacing">
<link href="lilypond-index.html#lilypond-index" rel="next" title="F. LilyPond index">
<link href="vertical-spacing.html#vertical-spacing" rel="previous" title="4.4 Vertical spacing">
<link rel="stylesheet" type="text/css" title="Default style" href="../../Documentation/css/lilypond-manuals.css">
<!--[if lte IE 7]>
<link href="../../Documentation/css/lilypond-ie-fixes.css" rel="stylesheet" type="text/css">
<![endif]-->


</head>

<body lang="en" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#800080" alink="#FF0000">


<div id="main">
<a name="Flexible-vertical-spacing-within-systems"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="spacing-issues.html" title="Beginning of this chapter or previous chapter"> &lt;&lt; Spacing issues&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="index.html" title="Cover (top) of document" rel="start">Top</a>][<a href="index_toc.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="lilypond-command-index.html" title="Index" rel="index">Index</a>][<a href="index_abt.html#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="changing-defaults.html" title="Next chapter">&nbsp;Changing defaults &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="vertical-spacing.html" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Vertical spacing&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="vertical-spacing.html" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Vertical spacing&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#within_002dsystem-spacing-properties" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Within-system spacing properties &gt; </a>]</td></tr></table>
<a name="flexible-vertical-spacing-within-systems"></a>
<h3 class="subsection">4.4.1 Flexible vertical spacing within systems</h3>

<a name="index-distance-between-staves"></a>
<a name="index-staff-distance"></a>
<a name="index-space-between-staves"></a>
<a name="index-space-inside-systems"></a>

<p>Three separate mechanisms control the flexible vertical spacing
within systems, one for each of the following categories:
</p>
<ul>
<li>
<em>ungrouped staves</em>,

</li><li>
<em>grouped staves</em> (staves within a staff-group such as
<code>ChoirStaff</code>, etc.), and

</li><li>
<em>non-staff lines</em> (such as <code>Lyrics</code>, <code>ChordNames</code>,
etc.).

</li></ul>


<p>The height of each system is determined in two steps.  First, all
of the staves are spaced according to the amount of space
available.  Then, the non-staff lines are distributed between the
staves.
</p>
<p>Note that the spacing mechanisms discussed in this section only
control the vertical spacing of staves and non-staff lines within
individual systems.  The vertical spacing between separate
systems, scores, markups, and margins is controlled by
<code>\paper</code> variables, which are discussed in
<a href="flexible-vertical-spacing-_005cpaper-variables.html">Flexible vertical spacing <code>\paper</code> variables</a>.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#within_002dsystem-spacing-properties" accesskey="1">Within-system spacing properties</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#spacing-of-ungrouped-staves" accesskey="2">Spacing of ungrouped staves</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#spacing-of-grouped-staves" accesskey="3">Spacing of grouped staves</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#spacing-of-non_002dstaff-lines" accesskey="4">Spacing of non-staff lines</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>


<hr size="6">
<a name="Within_002dsystem-spacing-properties"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="spacing-issues.html" title="Beginning of this chapter or previous chapter"> &lt;&lt; Spacing issues&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="index.html" title="Cover (top) of document" rel="start">Top</a>][<a href="index_toc.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="lilypond-command-index.html" title="Index" rel="index">Index</a>][<a href="index_abt.html#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="changing-defaults.html" title="Next chapter">&nbsp;Changing defaults &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#flexible-vertical-spacing-within-systems" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Flexible vertical spacing within systems&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#flexible-vertical-spacing-within-systems" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Flexible vertical spacing within systems&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#spacing-of-ungrouped-staves" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Spacing of ungrouped staves &gt; </a>]</td></tr></table>
<a name="within_002dsystem-spacing-properties"></a>
<h4 class="unnumberedsubsubsec">Within-system spacing properties</h4>

<a name="index-staff_002daffinity"></a>
<a name="index-staff_002daffinity-1"></a>
<a name="index-staffgroup_002dstaff_002dspacing"></a>
<a name="index-staffgroup_002dstaff_002dspacing-1"></a>
<a name="index-staff_002dstaff_002dspacing"></a>
<a name="index-staff_002dstaff_002dspacing-1"></a>
<a name="index-nonstaff_002dunrelatedstaff_002dspacing"></a>
<a name="index-nonstaff_002dunrelatedstaff_002dspacing-1"></a>
<a name="index-nonstaff_002drelatedstaff_002dspacing"></a>
<a name="index-nonstaff_002drelatedstaff_002dspacing-1"></a>
<a name="index-nonstaff_002dnonstaff_002dspacing"></a>
<a name="index-nonstaff_002dnonstaff_002dspacing-1"></a>
<a name="index-default_002dstaff_002dstaff_002dspacing"></a>
<a name="index-default_002dstaff_002dstaff_002dspacing-1"></a>
<a name="index-minimum_002dY_002dextent"></a>
<a name="index-minimum_002dY_002dextent-1"></a>
<a name="index-extra_002doffset"></a>
<a name="index-extra_002doffset-1"></a>
<a name="index-self_002dalignment_002dX"></a>
<a name="index-self_002dalignment_002dX-1"></a>
<a name="index-X_002doffset"></a>
<a name="index-X_002doffset-1"></a>
<a name="index-VerticalAxisGroup-2"></a>
<a name="index-VerticalAxisGroup-3"></a>

<p>The within-system vertical spacing mechanisms are controlled by
two sets of grob properties.  The first set is associated with the
<code>VerticalAxisGroup</code> grob, which is created by all staves and
non-staff lines.  The second set is associated with the
<code>StaffGrouper</code> grob, which can be created by staff-groups,
but only if explicitly called.  These properties are described
individually at the end of this section.
</p>
<p>The names of these properties (except for <code>staff-affinity</code>)
follow the format <code><var>item1</var>-<var>item2</var>-spacing</code>, where
<code><var>item1</var></code> and <code><var>item2</var></code> are the items to be
spaced.  Note that <code><var>item2</var></code> is not necessarily below
<code><var>item1</var></code>; for example,
<code>nonstaff-relatedstaff-spacing</code> will measure upwards from the
non-staff line if <code>staff-affinity</code> is <code>UP</code>.
</p>
<p>Each distance is measured between the <em>reference points</em> of
the two items.  The reference point for a staff is the vertical
center of its <code>StaffSymbol</code> (i.e. the middle line if
<code>line-count</code> is odd; the middle space if <code>line-count</code> is
even).  The reference points for individual non-staff lines are
given in the following table:
</p>
<table>
<thead><tr><th>Non-staff line</th><th>Reference point</th></tr></thead>
<tr><td><code>ChordNames</code></td><td>baseline</td></tr>
<tr><td><code>NoteNames</code></td><td>baseline</td></tr>
<tr><td><code>Lyrics</code></td><td>baseline</td></tr>
<tr><td><code>Dynamics</code></td><td>vertical center</td></tr>
<tr><td><code>FiguredBass</code></td><td>highest point</td></tr>
<tr><td><code>FretBoards</code></td><td>top line</td></tr>
</table>

<p>In the following image, horizontal lines indicate the positions
of these reference points:
</p>
<blockquote><p>
 <a href="../c6/lily-b23ef889.ly">
  <img align="middle"
       border="0"
       src="../c6/lily-b23ef889.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>Each of the vertical spacing grob properties (except
<code>staff-affinity</code>) uses the same alist structure as the
<code>\paper</code> spacing variables discussed in
<a href="flexible-vertical-spacing-_005cpaper-variables.html">Flexible vertical spacing <code>\paper</code> variables</a>.  Specific methods
for modifying alists are discussed in <a href="modifying-alists.html">Modifying alists</a>.
Grob properties should be adjusted with an <code>\override</code> inside
a <code>\score</code> or <code>\layout</code> block, and not inside a
<code>\paper</code> block.
</p>
<p>The following example demonstrates the two ways these alists can
be modified.  The first declaration updates one key-value
individually, and the second completely re-defines the property:
</p>
<blockquote><pre class="example">\new Staff \with {
  \override VerticalAxisGroup #'default-staff-staff-spacing
       #'basic-distance = #10
} { &hellip; }

\new Staff \with {
  \override VerticalAxisGroup #'default-staff-staff-spacing =
    #'((basic-distance . 10)
       (minimum-distance . 9)
       (padding . 1)
       (stretchability . 10))
} { &hellip; }
</pre></blockquote>

<p>To change any spacing settings globally, put them in the
<code>\layout</code> block:
</p>
<blockquote><pre class="example">\layout {
  \context {
    \Staff
    \override VerticalAxisGroup #'default-staff-staff-spacing
         #'basic-distance = #10
  }
}
</pre></blockquote>

<p>Standard settings for the vertical spacing grob properties are
listed in <a name="index-VerticalAxisGroup-4"></a>
<a href="../internals/verticalaxisgroup.html">VerticalAxisGroup</a> and
<a name="index-StaffGrouper-1"></a>
<a href="../internals/staffgrouper.html">StaffGrouper</a>.  Default overrides for specific types
of non-staff lines are listed in the relevant context descriptions
in <a name="index-Contexts"></a>
<a href="../internals/contexts.html">Contexts</a>.
</p>

<a name="Properties-of-the-VerticalAxisGroup-grob"></a>
<h4 class="subsubheading">Properties of the <code>VerticalAxisGroup</code> grob</h4>

<p><code>VerticalAxisGroup</code> properties are typically adjusted with an
<code>\override</code> at the <code>Staff</code> level (or equivalent).
</p>
<dl compact="compact">
<dt> <code>staff-staff-spacing</code></dt>
<dd>
<p>Used to determine the distance between the current staff and the
staff just below it in the same system, even if one or more
non-staff lines (such as <code>Lyrics</code>) are placed between the two
staves.  Does not apply to the bottom staff of a system.
</p>
<p>Initially, the <code>staff-staff-spacing</code> of a
<code>VerticalAxisGroup</code> is a Scheme function that applies the
properties of the <code>StaffGrouper</code> if the staff is part of a
group, or the <code>default-staff-staff-spacing</code> of the staff
otherwise.  This allows staves to be spaced differently when they
are grouped.  For uniform spacing regardless of grouping, this
function may be replaced by a flexible-spacing alist, using the
complete-redefinition form of override shown above.
</p>
</dd>
<dt> <code>default-staff-staff-spacing</code></dt>
<dd><p>A flexible-spacing alist defining the <code>staff-staff-spacing</code> used for
ungrouped staves, unless <code>staff-staff-spacing</code> has been explicitly
set with an <code>\override</code>.
</p>
</dd>
<dt> <code>staff-affinity</code></dt>
<dd><p>The direction of the staff to use for spacing the current
non-staff line.  Choices are <code>UP</code>, <code>DOWN</code>, and
<code>CENTER</code>.  If <code>CENTER</code>, the non-staff line will be
placed equidistant between the two nearest staves on either side,
unless collisions or other spacing constraints prevent this.
Adjacent non-staff lines should have non-increasing
<code>staff-affinity</code> from top to bottom, e.g. a non-staff line
set to <code>UP</code> should not immediately follow one that is set to
<code>DOWN</code>.  Non-staff lines at the top of a system should use
<code>DOWN</code>; those at the bottom should use <code>UP</code>.  Setting
<code>staff-affinity</code> for a staff causes it to be treated as a
non-staff line.  Setting <code>staff-affinity</code> to <code>#f</code> causes
a non-staff line to be treated as a staff.  Setting
<code>staff-affinity</code> to <code>UP</code>, <code>CENTER</code>, or <code>DOWN</code>
causes a staff to be spaced as a non-staff line.
</p>
</dd>
<dt> <code>nonstaff-relatedstaff-spacing</code></dt>
<dd><p>The distance between the current non-staff line and the nearest
staff in the direction of <code>staff-affinity</code>, if there are no
non-staff lines between the two, and <code>staff-affinity</code> is
either <code>UP</code> or <code>DOWN</code>.  If <code>staff-affinity</code> is
<code>CENTER</code>, then <code>nonstaff-relatedstaff-spacing</code> is used
for the nearest staves on <em>both</em> sides, even if other
non-staff lines appear between the current one and either of the
staves.  This means that the placement of a non-staff line depends
on both the surrounding staves and the surrounding non-staff lines.
Setting the <code>stretchability</code> of one of these types of spacing to
a small value will make that spacing dominate.  Setting the
<code>stretchability</code> to a large value will make that spacing have
little effect.
</p>
</dd>
<dt> <code>nonstaff-nonstaff-spacing</code></dt>
<dd><p>The distance between the current non-staff line and the next
non-staff line in the direction of <code>staff-affinity</code>, if both
are on the same side of the related staff, and
<code>staff-affinity</code> is either <code>UP</code> or <code>DOWN</code>.
</p>
</dd>
<dt> <code>nonstaff-unrelatedstaff-spacing</code></dt>
<dd><p>The distance between the current non-staff line and the staff in
the opposite direction from <code>staff-affinity</code>, if there are no
other non-staff lines between the two, and <code>staff-affinity</code>
is either <code>UP</code> or <code>DOWN</code>.  This can be used, for
example, to require a minimum amount of padding between a
<code>Lyrics</code> line and the staff to which it does not belong.
</p></dd>
</dl>


<a name="Properties-of-the-StaffGrouper-grob"></a>
<h4 class="subsubheading">Properties of the <code>StaffGrouper</code> grob</h4>

<p><code>StaffGrouper</code> properties are typically adjusted with an
<code>\override</code> at the <code>StaffGroup</code> level (or equivalent).
</p>
<dl compact="compact">
<dt> <code>staff-staff-spacing</code></dt>
<dd><p>The distance between consecutive staves within the current
staff-group.  The <code>staff-staff-spacing</code> property of an
individual staff&rsquo;s <code>VerticalAxisGroup</code> grob can be
overriden with different spacing settings for that staff.
</p>
</dd>
<dt> <code>staffgroup-staff-spacing</code></dt>
<dd><p>The distance between the last staff of the current staff-group and
the staff just below it in the same system, even if one or more
non-staff lines (such as <code>Lyrics</code>) exist between the two
staves.  Does not apply to the bottom staff of a system.  The
<code>staff-staff-spacing</code> property of an individual staff&rsquo;s
<code>VerticalAxisGroup</code> grob can be overriden with different
spacing settings for that staff.
</p></dd>
</dl>

<a name="See-also-128"></a>
<h4 class="subsubheading">See also</h4>
<p>Notation Reference:
<a href="flexible-vertical-spacing-_005cpaper-variables.html">Flexible vertical spacing <code>\paper</code> variables</a>,
<a href="modifying-alists.html">Modifying alists</a>.
</p>
<p>Installed Files:
&lsquo;<tt>ly/engraver-init.ly</tt>&rsquo;,
&lsquo;<tt>scm/define-grobs.scm</tt>&rsquo;.
</p>
<p>Internals Reference:
<a name="index-Contexts-1"></a>
<a href="../internals/contexts.html">Contexts</a>,
<a name="index-VerticalAxisGroup-5"></a>
<a href="../internals/verticalaxisgroup.html">VerticalAxisGroup</a>,
<a name="index-StaffGrouper-2"></a>
<a href="../internals/staffgrouper.html">StaffGrouper</a>.
</p>

<hr size="6">
<a name="Spacing-of-ungrouped-staves"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="spacing-issues.html" title="Beginning of this chapter or previous chapter"> &lt;&lt; Spacing issues&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="index.html" title="Cover (top) of document" rel="start">Top</a>][<a href="index_toc.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="lilypond-command-index.html" title="Index" rel="index">Index</a>][<a href="index_abt.html#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="changing-defaults.html" title="Next chapter">&nbsp;Changing defaults &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#within_002dsystem-spacing-properties" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Within-system spacing properties&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#flexible-vertical-spacing-within-systems" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Flexible vertical spacing within systems&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#spacing-of-grouped-staves" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Spacing of grouped staves &gt; </a>]</td></tr></table>
<a name="spacing-of-ungrouped-staves"></a>
<h4 class="unnumberedsubsubsec">Spacing of ungrouped staves</h4>

<p><em>Staves</em> (such as <code>Staff</code>, <code>DrumStaff</code>,
<code>TabStaff</code>, etc.) are contexts that can contain one or more
voice contexts, but cannot contain any other staves.
</p>
<p>The following properties affect the spacing of <em>ungrouped</em>
staves:
</p>
<ul>
<li> <code>VerticalAxisGroup</code> properties:
<ul>
<li> <code>default-staff-staff-spacing</code>
</li><li> <code>staff-staff-spacing</code>
</li></ul>
</li></ul>

<p>These grob properties are described individually above; see
<a href="#within_002dsystem-spacing-properties">Within-system spacing properties</a>.
</p>
<p>Additional properties are involved for staves that are part of a
staff-group; see <a href="#spacing-of-grouped-staves">Spacing of grouped staves</a>.
</p>
<p>The following example shows how the <code>default-staff-staff-spacing</code>
property can affect the spacing of ungrouped staves.
The same overrides applied to <code>staff-staff-spacing</code> would
have the same effect, but would also apply in cases where the staves
are combined in a group or groups.
</p>
<blockquote><pre class="verbatim">\layout {
  \context {
    \Staff
    \override VerticalAxisGroup #'default-staff-staff-spacing =
      #'((basic-distance . 8)
         (minimum-distance . 7)
         (padding . 1))
  }
}

&lt;&lt;
  % The very low note here needs more room than 'basic-distance
  % can provide, so the distance between this staff and the next
  % is determined by 'padding.
  \new Staff { b,2 r | }

  % Here, 'basic-distance provides enough room, and there is no
  % need to compress the space (towards 'minimum-distance) to make
  % room for anything else on the page, so the distance between
  % this staff and the next is determined by 'basic-distance.
  \new Staff { \clef bass g2 r | }

  % By setting 'padding to a negative value, staves can be made to
  % collide.  The lowest acceptable value for 'basic-distance is 0.
  \new Staff \with {
    \override VerticalAxisGroup #'default-staff-staff-spacing =
      #'((basic-distance . 3.5)
         (padding . -10))
  } { \clef bass g2 r | }
  \new Staff { \clef bass g2 r | }
&gt;&gt;
</pre><p>
 <a href="../4f/lily-d55f03eb.ly">
  <img align="middle"
       border="0"
       src="../4f/lily-d55f03eb.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<a name="See-also-135"></a>
<h4 class="subsubheading">See also</h4>
<p>Installed Files:
&lsquo;<tt>scm/define-grobs.scm</tt>&rsquo;.
</p>
<p>Snippets:
<a href="../snippets/spacing.html">Spacing</a>.
</p>
<p>Internals Reference:
<a name="index-VerticalAxisGroup-6"></a>
<a href="../internals/verticalaxisgroup.html">VerticalAxisGroup</a>.
</p>

<hr size="6">
<a name="Spacing-of-grouped-staves"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="spacing-issues.html" title="Beginning of this chapter or previous chapter"> &lt;&lt; Spacing issues&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="index.html" title="Cover (top) of document" rel="start">Top</a>][<a href="index_toc.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="lilypond-command-index.html" title="Index" rel="index">Index</a>][<a href="index_abt.html#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="changing-defaults.html" title="Next chapter">&nbsp;Changing defaults &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#spacing-of-ungrouped-staves" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Spacing of ungrouped staves&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#flexible-vertical-spacing-within-systems" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Flexible vertical spacing within systems&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#spacing-of-non_002dstaff-lines" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Spacing of non-staff lines &gt; </a>]</td></tr></table>
<a name="spacing-of-grouped-staves"></a>
<h4 class="unnumberedsubsubsec">Spacing of grouped staves</h4>

<p>In orchestral and other large scores, it is common to place staves
in groups.  The space between groups is typically larger than the
space between staves of the same group.
</p>
<p><em>Staff-groups</em> (such as <code>StaffGroup</code>, <code>ChoirStaff</code>,
etc.) are contexts that can contain one or more staves
simultaneously.
</p>
<p>The following properties affect the spacing of staves inside
staff-groups:
</p>
<ul>
<li> <code>VerticalAxisGroup</code> properties:
<ul>
<li> <code>staff-staff-spacing</code>
</li></ul>
</li><li> <code>StaffGrouper</code> properties:
<ul>
<li> <code>staff-staff-spacing</code>
</li><li> <code>staffgroup-staff-spacing</code>
</li></ul>
</li></ul>

<p>These grob properties are described individually above; see
<a href="#within_002dsystem-spacing-properties">Within-system spacing properties</a>.
</p>
<p>The following example shows how properties of the
<code>StaffGrouper</code> grob can affect the spacing of grouped staves:
</p>
<blockquote><pre class="verbatim">\layout {
  \context {
    \Score
    \override StaffGrouper #'staff-staff-spacing #'padding = #0
    \override StaffGrouper #'staff-staff-spacing #'basic-distance = #1
  }
}

&lt;&lt;
  \new PianoStaff \with {
    \override StaffGrouper #'staffgroup-staff-spacing #'basic-distance = #20
  } &lt;&lt;
    \new Staff { c'1 }
    \new Staff { c'1 }
  &gt;&gt;

  \new StaffGroup &lt;&lt;
    \new Staff { c'1 }
    \new Staff { c'1 }
  &gt;&gt;
&gt;&gt;
</pre><p>
 <a href="../47/lily-d8781017.ly">
  <img align="middle"
       border="0"
       src="../47/lily-d8781017.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<a name="See-also-201"></a>
<h4 class="subsubheading">See also</h4>
<p>Installed Files:
&lsquo;<tt>scm/define-grobs.scm</tt>&rsquo;.
</p>
<p>Snippets:
<a href="../snippets/spacing.html">Spacing</a>.
</p>
<p>Internals Reference:
<a name="index-VerticalAxisGroup-7"></a>
<a href="../internals/verticalaxisgroup.html">VerticalAxisGroup</a>,
<a name="index-StaffGrouper-3"></a>
<a href="../internals/staffgrouper.html">StaffGrouper</a>.
</p>

<hr size="6">
<a name="Spacing-of-non_002dstaff-lines"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="spacing-issues.html" title="Beginning of this chapter or previous chapter"> &lt;&lt; Spacing issues&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="index.html" title="Cover (top) of document" rel="start">Top</a>][<a href="index_toc.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="lilypond-command-index.html" title="Index" rel="index">Index</a>][<a href="index_abt.html#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="changing-defaults.html" title="Next chapter">&nbsp;Changing defaults &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#spacing-of-grouped-staves" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Spacing of grouped staves&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#flexible-vertical-spacing-within-systems" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Flexible vertical spacing within systems&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="explicit-staff-and-system-positioning.html" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Explicit staff and system positioning &gt; </a>]</td></tr></table>
<a name="spacing-of-non_002dstaff-lines"></a>
<h4 class="unnumberedsubsubsec">Spacing of non-staff lines</h4>

<p><em>Non-staff lines</em> (such as <code>Lyrics</code>, <code>ChordNames</code>,
etc.) are contexts whose layout objects are engraved like staves
(i.e. in horizontal lines within systems).  Specifically,
non-staff lines are non-staff contexts that create the
<code>VerticalAxisGroup</code> layout object.
</p>
<p>The following properties affect the spacing of non-staff lines:
</p>
<ul>
<li> <code>VerticalAxisGroup</code> properties:
<ul>
<li> <code>staff-affinity</code>
</li><li> <code>nonstaff-relatedstaff-spacing</code>
</li><li> <code>nonstaff-nonstaff-spacing</code>
</li><li> <code>nonstaff-unrelatedstaff-spacing</code>
</li></ul>
</li></ul>

<p>These grob properties are described individually above; see
<a href="#within_002dsystem-spacing-properties">Within-system spacing properties</a>.
</p>
<p>The following example shows how the
<code>nonstaff-nonstaff-spacing</code> property can affect the spacing
of consecutive non-staff lines.  Here, by setting the
<code>stretchability</code> key to a very high value, the lyrics are
able to stretch much more than usual:
</p>
<blockquote><pre class="verbatim">\layout {
  \context {
    \Lyrics
    \override VerticalAxisGroup
      #'nonstaff-nonstaff-spacing #'stretchability = #1000
  }
}

\new StaffGroup
&lt;&lt;
  \new Staff \with {
    \override VerticalAxisGroup #'staff-staff-spacing = #'((basic-distance . 30))
  } { c'1 }
  \new Lyrics \with {
    \override VerticalAxisGroup #'staff-affinity = #UP
  } \lyricmode { up }
  \new Lyrics \with {
    \override VerticalAxisGroup #'staff-affinity = #CENTER
  } \lyricmode { center }
  \new Lyrics \with {
    \override VerticalAxisGroup #'staff-affinity = #DOWN
  } \lyricmode { down }
  \new Staff { c'1 }
&gt;&gt;
</pre><p>
 <a href="../c1/lily-875f5f81.ly">
  <img align="middle"
       border="0"
       src="../c1/lily-875f5f81.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<a name="See-also-108"></a>
<h4 class="subsubheading">See also</h4>
<p>Installed Files:
&lsquo;<tt>ly/engraver-init.ly</tt>&rsquo;,
&lsquo;<tt>scm/define-grobs.scm</tt>&rsquo;.
</p>
<p>Snippets:
<a href="../snippets/spacing.html">Spacing</a>.
</p>

<p>Internals Reference:
<a name="index-Contexts-2"></a>
<a href="../internals/contexts.html">Contexts</a>,
<a name="index-VerticalAxisGroup-8"></a>
<a href="../internals/verticalaxisgroup.html">VerticalAxisGroup</a>.
</p>

<hr size="6">
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="spacing-issues.html" title="Beginning of this chapter or previous chapter"> &lt;&lt; Spacing issues&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="index.html" title="Cover (top) of document" rel="start">Top</a>][<a href="index_toc.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="lilypond-command-index.html" title="Index" rel="index">Index</a>][<a href="index_abt.html#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="changing-defaults.html" title="Next chapter">&nbsp;Changing defaults &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#spacing-of-grouped-staves" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Spacing of grouped staves&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#flexible-vertical-spacing-within-systems" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Flexible vertical spacing within systems&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="explicit-staff-and-system-positioning.html" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Explicit staff and system positioning &gt; </a>]</td></tr></table>
<!-- footer_tag -->
<div class="footer">
<!-- This footer was autogenerated by /build/buildd/lilypond-2.16.2/scripts/build/out/www_post -->
<p class="footer_version">
This page is for LilyPond-2.16.2 (stable-branch).
</p>
<p class="footer_report">
We welcome your aid; please <a href="http://lilypond.org/help-us.html">help us</a> by reporting errors to our <a href="http://post.gmane.org/post.php?group=gmane.comp.gnu.lilypond.bugs">bug list</a>.
</p>
</div>


<p id="languages">
<!-- These links were autogenerated by /build/buildd/lilypond-2.16.2/scripts/build/out/www_post -->
 Other languages: <a href="flexible-vertical-spacing-within-systems.de.html">deutsch</a>, <a href="flexible-vertical-spacing-within-systems.es.html">español</a>, <a href="flexible-vertical-spacing-within-systems.fr.html">français</a>, <a href="flexible-vertical-spacing-within-systems.it.html">italiano</a>, <a href="flexible-vertical-spacing-within-systems.ja.html">日本語</a>.
 <br>
 About <a href="http://www.lilypond.org/website/misc/browser-language">automatic language selection</a>.
</p>

<!-- FOOTER -->

<!-- end div#main here -->
</div>



<div id="tocframe">
<p class="toc_uplink"><a href="../../Documentation/web/manuals.html"
         title="Documentation Index">&lt;&lt; Back to Documentation Index</a></p>
<h4 class="toc_header"> <a href="index.html" title="Start of the manual">LilyPond &mdash; Notation Reference</a></h4>
<div class="contents">
<ul class="toc">
  <li class=""><a name="toc-Musical-notation-1" href="musical-notation.html">1. Musical notation</a>
  <ul class="toc">
    <li class=""><a name="toc-Pitches-1" href="pitches.html">1.1 Pitches</a>    </li>
    <li class=""><a name="toc-Rhythms-1" href="rhythms.html">1.2 Rhythms</a>    </li>
    <li class=""><a name="toc-Expressive-marks-1" href="expressive-marks.html">1.3 Expressive marks</a>    </li>
    <li class=""><a name="toc-Repeats-1" href="repeats.html">1.4 Repeats</a>    </li>
    <li class=""><a name="toc-Simultaneous-notes-1" href="simultaneous-notes.html">1.5 Simultaneous notes</a>    </li>
    <li class=""><a name="toc-Staff-notation-1" href="staff-notation.html">1.6 Staff notation</a>    </li>
    <li class=""><a name="toc-Editorial-annotations-1" href="editorial-annotations.html">1.7 Editorial annotations</a>    </li>
    <li class=""><a name="toc-Text-1" href="text.html">1.8 Text</a>    </li>
  </ul>
  </li>
  <li class=""><a name="toc-Specialist-notation-1" href="specialist-notation.html">2. Specialist notation</a>
  <ul class="toc">
    <li class=""><a name="toc-Vocal-music-1" href="vocal-music.html">2.1 Vocal music</a>    </li>
    <li class=""><a name="toc-Keyboard-and-other-multi_002dstaff-instruments-1" href="keyboard-and-other-multi_002dstaff-instruments.html">2.2 Keyboard and other multi-staff instruments</a>    </li>
    <li class=""><a name="toc-Unfretted-string-instruments-1" href="unfretted-string-instruments.html">2.3 Unfretted string instruments</a>    </li>
    <li class=""><a name="toc-Fretted-string-instruments-1" href="fretted-string-instruments.html">2.4 Fretted string instruments</a>    </li>
    <li class=""><a name="toc-Percussion-1" href="percussion.html">2.5 Percussion</a>    </li>
    <li class=""><a name="toc-Wind-instruments-1" href="wind-instruments.html">2.6 Wind instruments</a>    </li>
    <li class=""><a name="toc-Chord-notation-1" href="chord-notation.html">2.7 Chord notation</a>    </li>
    <li class=""><a name="toc-Contemporary-music-1" href="contemporary-music.html">2.8 Contemporary music</a>    </li>
    <li class=""><a name="toc-Ancient-notation-1" href="ancient-notation.html">2.9 Ancient notation</a>    </li>
    <li class=""><a name="toc-World-music-1" href="world-music.html">2.10 World music</a>    </li>
  </ul>
  </li>
  <li class=""><a name="toc-General-input-and-output-1" href="general-input-and-output.html">3. General input and output</a>
  <ul class="toc">
    <li class=""><a name="toc-Input-structure-1" href="input-structure.html">3.1 Input structure</a>    </li>
    <li class=""><a name="toc-Titles-and-headers-1" href="titles-and-headers.html">3.2 Titles and headers</a>    </li>
    <li class=""><a name="toc-Working-with-input-files-1" href="working-with-input-files.html">3.3 Working with input files</a>    </li>
    <li class=""><a name="toc-Controlling-output-1" href="controlling-output.html">3.4 Controlling output</a>    </li>
    <li class=""><a name="toc-MIDI-output-1" href="midi-output.html">3.5 MIDI output</a>    </li>
    <li class=""><a name="toc-Extracting-musical-information-1" href="extracting-musical-information.html">3.6 Extracting musical information</a>    </li>
  </ul>
  </li>
  <li class=" toc_current"><a name="toc-Spacing-issues-1" href="spacing-issues.html">4. Spacing issues</a>
  <ul class="toc">
    <li class=""><a name="toc-Page-layout-1" href="page-layout.html">4.1 Page layout</a>    </li>
    <li class=""><a name="toc-Score-layout-1" href="score-layout.html">4.2 Score layout</a>    </li>
    <li class=""><a name="toc-Breaks-1" href="breaks.html">4.3 Breaks</a>    </li>
    <li class=" toc_current"><a name="toc-Vertical-spacing-1" href="vertical-spacing.html">4.4 Vertical spacing</a>
    <ul class="toc">
      <li class=" toc_current"><a name="toc-Flexible-vertical-spacing-within-systems-1" href="flexible-vertical-spacing-within-systems.html">4.4.1 Flexible vertical spacing within systems</a>
      <ul class="toc">
        <li class=""><a name="toc-Within_002dsystem-spacing-properties-1" href="flexible-vertical-spacing-within-systems.html#within_002dsystem-spacing-properties">Within-system spacing properties</a>        </li>
        <li class=""><a name="toc-Spacing-of-ungrouped-staves-1" href="flexible-vertical-spacing-within-systems.html#spacing-of-ungrouped-staves">Spacing of ungrouped staves</a>        </li>
        <li class=""><a name="toc-Spacing-of-grouped-staves-1" href="flexible-vertical-spacing-within-systems.html#spacing-of-grouped-staves">Spacing of grouped staves</a>        </li>
        <li class=""><a name="toc-Spacing-of-non_002dstaff-lines-1" href="flexible-vertical-spacing-within-systems.html#spacing-of-non_002dstaff-lines">Spacing of non-staff lines</a>        </li>
      </ul>
      </li>
      <li class=""><a name="toc-Explicit-staff-and-system-positioning-1" href="explicit-staff-and-system-positioning.html">4.4.2 Explicit staff and system positioning</a>      </li>
      <li class=""><a name="toc-Vertical-collision-avoidance-1" href="vertical-collision-avoidance.html">4.4.3 Vertical collision avoidance</a>      </li>
    </ul>
    </li>
    <li class=""><a name="toc-Horizontal-spacing-1" href="horizontal-spacing.html">4.5 Horizontal spacing</a>    </li>
    <li class=""><a name="toc-Fitting-music-onto-fewer-pages-1" href="fitting-music-onto-fewer-pages.html">4.6 Fitting music onto fewer pages</a>    </li>
  </ul>
  </li>
  <li class=""><a name="toc-Changing-defaults-1" href="changing-defaults.html">5. Changing defaults</a>
  <ul class="toc">
    <li class=""><a name="toc-Interpretation-contexts-1" href="interpretation-contexts.html">5.1 Interpretation contexts</a>    </li>
    <li class=""><a name="toc-Explaining-the-Internals-Reference-1" href="explaining-the-internals-reference.html">5.2 Explaining the Internals Reference</a>    </li>
    <li class=""><a name="toc-Modifying-properties-1" href="modifying-properties.html">5.3 Modifying properties</a>    </li>
    <li class=""><a name="toc-Useful-concepts-and-properties-1" href="useful-concepts-and-properties.html">5.4 Useful concepts and properties</a>    </li>
    <li class=""><a name="toc-Advanced-tweaks-1" href="advanced-tweaks.html">5.5 Advanced tweaks</a>    </li>
    <li class=""><a name="toc-Using-music-functions-1" href="using-music-functions.html">5.6 Using music functions</a>    </li>
  </ul>
  </li>
  <li class=""><a name="toc-Notation-manual-tables-1" href="notation-manual-tables.html">A. Notation manual tables</a>
  <ul class="toc">
    <li class=""><a name="toc-Chord-name-chart-1" href="chord-name-chart.html">A.1 Chord name chart</a>    </li>
    <li class=""><a name="toc-Common-chord-modifiers-1" href="common-chord-modifiers.html">A.2 Common chord modifiers</a>    </li>
    <li class=""><a name="toc-Predefined-string-tunings-1" href="predefined-string-tunings.html">A.3 Predefined string tunings</a>    </li>
    <li class=""><a name="toc-Predefined-fretboard-diagrams-1" href="predefined-fretboard-diagrams.html">A.4 Predefined fretboard diagrams</a>    </li>
    <li class=""><a name="toc-Predefined-paper-sizes-1" href="predefined-paper-sizes.html">A.5 Predefined paper sizes</a>    </li>
    <li class=""><a name="toc-MIDI-instruments-1" href="midi-instruments.html">A.6 MIDI instruments</a>    </li>
    <li class=""><a name="toc-List-of-colors-1" href="list-of-colors.html">A.7 List of colors</a>    </li>
    <li class=""><a name="toc-The-Feta-font-1" href="the-feta-font.html">A.8 The Feta font</a>    </li>
    <li class=""><a name="toc-Note-head-styles-1" href="note-head-styles.html">A.9 Note head styles</a>    </li>
    <li class=""><a name="toc-Text-markup-commands-1" href="text-markup-commands.html">A.10 Text markup commands</a>    </li>
    <li class=""><a name="toc-Text-markup-list-commands-1" href="text-markup-list-commands.html">A.11 Text markup list commands</a>    </li>
    <li class=""><a name="toc-List-of-special-characters-1" href="list-of-special-characters.html">A.12 List of special characters</a>    </li>
    <li class=""><a name="toc-List-of-articulations-1" href="list-of-articulations.html">A.13 List of articulations</a>    </li>
    <li class=""><a name="toc-Percussion-notes-1" href="percussion-notes.html">A.14 Percussion notes</a>    </li>
    <li class=""><a name="toc-Technical-glossary-1" href="technical-glossary.html">A.15 Technical glossary</a>    </li>
    <li class=""><a name="toc-All-context-properties-1" href="all-context-properties.html">A.16 All context properties</a>    </li>
    <li class=""><a name="toc-Layout-properties-1" href="layout-properties.html">A.17 Layout properties</a>    </li>
    <li class=""><a name="toc-Available-music-functions-1" href="available-music-functions.html">A.18 Available music functions</a>    </li>
    <li class=""><a name="toc-Context-modification-identifiers-1" href="context-modification-identifiers.html">A.19 Context modification identifiers</a>    </li>
    <li class=""><a name="toc-Predefined-type-predicates-1" href="predefined-type-predicates.html">A.20 Predefined type predicates</a>    </li>
    <li class=""><a name="toc-Scheme-functions-1" href="scheme-functions.html">A.21 Scheme functions</a>    </li>
  </ul>
  </li>
  <li class=""><a name="toc-Cheat-sheet-1" href="cheat-sheet.html">B. Cheat sheet</a>  </li>
  <li class=""><a name="toc-LilyPond-grammar-1" href="lilypond-grammar.html">C. LilyPond grammar</a>  </li>
  <li class=""><a name="toc-GNU-Free-Documentation-License-1" href="gnu-free-documentation-license.html">D. GNU Free Documentation License</a>  </li>
  <li class=""><a name="toc-LilyPond-command-index-1" href="lilypond-command-index.html">E. LilyPond command index</a>  </li>
  <li class=""><a name="toc-LilyPond-index-1" href="lilypond-index.html">F. LilyPond index</a>  </li>
<li>
<!--
we depend on an external entity here, which we cannot control.  Suppose
we go from 2.16.x to 2.17.x and put the documentation under "v2.17".
For some time, Google won't have the new location in its index, so the
search would get nothing.  It would be better to keep "v2.16" in the
search for a while and have a redirection from "v2.16" to "v2.17".
-->

<form action="http://google.com/search"
      method="get"
      name="search"
      onSubmit="search.q.value='site:lilypond.org/doc/v2.16 '
		+ search.brute_query.value"
      onMouseMove="search.q.value='site:lilypond.org/doc/v2.16 '
		   + search.brute_query.value"
      onKeyUp="search.q.value='site:lilypond.org/doc/v2.16 '
	       + search.brute_query.value">
  <input type="hidden" name="btnG" value="Google Search">
  <input type="text" name="brute_query" onfocus="this.value=''" value="Search">
  <input type="hidden" name="q" value="">
</form>
</li>
</ul>
</div>
</div>

</body>
</html>
