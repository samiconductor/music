<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Copyright C 1999-2012 by the authors.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.1
or any later version published by the Free Software Foundation;
with no Invariant Sections.
A copy of the license is included in the section entitled "GNU
Free Documentation License".

 -->
<!-- Created on January 1, 2014 by texi2html 1.82
texi2html was written by: 
            Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Many creative people.
Send bugs and suggestions to <texi2html-bug@nongnu.org>
-->
<head>
<title>LilyPond Notation Reference: 1.4.1 Long repeats</title>

<meta name="description" content="LilyPond Notation Reference: 1.4.1 Long repeats">
<meta name="keywords" content="LilyPond Notation Reference: 1.4.1 Long repeats">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2html 1.82">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link href="index.html#index" rel="start" title="LilyPond &mdash; Notation Reference">
<link href="lilypond-command-index.html#lilypond-command-index" rel="index" title="E. LilyPond command index">
<link href="index_toc.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="index_abt.html#SEC_About" rel="help" title="About This Document">
<link href="repeats.html#repeats" rel="up" title="1.4 Repeats">
<link href="lilypond-index.html#lilypond-index" rel="next" title="F. LilyPond index">
<link href="repeats.html#repeats" rel="previous" title="1.4 Repeats">
<link rel="stylesheet" type="text/css" title="Default style" href="../../Documentation/css/lilypond-manuals.css">
<!--[if lte IE 7]>
<link href="../../Documentation/css/lilypond-ie-fixes.css" rel="stylesheet" type="text/css">
<![endif]-->


</head>

<body lang="en" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#800080" alink="#FF0000">


<div id="main">
<a name="Long-repeats"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="musical-notation.html" title="Beginning of this chapter or previous chapter"> &lt;&lt; Musical notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="index.html" title="Cover (top) of document" rel="start">Top</a>][<a href="index_toc.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="lilypond-command-index.html" title="Index" rel="index">Index</a>][<a href="index_abt.html#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="specialist-notation.html" title="Next chapter">&nbsp;Specialist notation &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="repeats.html" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Repeats&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="repeats.html" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Repeats&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#normal-repeats" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Normal repeats &gt; </a>]</td></tr></table>
<a name="long-repeats"></a>
<h3 class="subsection">1.4.1 Long repeats</h3>

<p>This section discusses how to input long (usually multi-measure)
repeats.  The repeats can take two forms: repeats enclosed between
repeat signs; or written-out repeats, used to input repetitious music.
Repeat signs can also be controlled manually.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#normal-repeats" accesskey="1">Normal repeats</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#manual-repeat-marks" accesskey="2">Manual repeat marks</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#written_002dout-repeats" accesskey="3">Written-out repeats</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<a name="index-volta"></a>
<a name="index-prima-volta"></a>
<a name="index-seconda-volta"></a>
<a name="index-volta_002c-prima"></a>
<a name="index-volta_002c-seconda"></a>
<a name="index-repeat_002c-normal"></a>
<a name="index-normal-repeat"></a>
<a name="index-repeat-with-alternate-endings"></a>
<a name="index-alternate-endings"></a>
<a name="index-_005crepeat"></a>
<a name="index-_005crepeat-1"></a>
<a name="index-_005calternative"></a>
<a name="index-_005calternative-1"></a>
<a name="index-_005cpartial-2"></a>
<a name="index-_005cpartial-3"></a>

<hr size="6">
<a name="Normal-repeats"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="musical-notation.html" title="Beginning of this chapter or previous chapter"> &lt;&lt; Musical notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="index.html" title="Cover (top) of document" rel="start">Top</a>][<a href="index_toc.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="lilypond-command-index.html" title="Index" rel="index">Index</a>][<a href="index_abt.html#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="specialist-notation.html" title="Next chapter">&nbsp;Specialist notation &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#long-repeats" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Long repeats&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#long-repeats" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Long repeats&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#manual-repeat-marks" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Manual repeat marks &gt; </a>]</td></tr></table>
<a name="normal-repeats"></a>
<h4 class="unnumberedsubsubsec">Normal repeats</h4>

<p>The syntax for a normal repeat is
</p>
<blockquote><pre class="example">\repeat volta <var>repeatcount</var> <var>musicexpr</var>
</pre></blockquote>

<p>where <code><var>musicexpr</var></code> is a music expression.
</p>
<p>A single repeat without an alternate ending:
</p>
<blockquote><pre class="verbatim">\repeat volta 2 { c4 d e f }
c2 d
\repeat volta 2 { d4 e f g }
</pre><p>
 <a href="../a4/lily-a76b0e0f.ly">
  <img align="middle"
       border="0"
       src="../a4/lily-a76b0e0f.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>Alternative endings can be produced using <code>\alternative</code>.  Each
group of alternatives must be themselves, enclosed in a set of braces.
</p>
<blockquote><pre class="example">\repeat volta <var>repeatcount</var> <var>musicexpr</var>
\alternative {
  { <var>musicexpr</var> }
}
</pre></blockquote>

<p>where <code><var>musicexpr</var></code> is a music expression.
</p>
<p>If there are more repeats than there are alternate endings, the earliest
repeats are given the first alternative.
</p>
<p>A single repeat with one alternate ending:
</p>
<blockquote><pre class="verbatim">\repeat volta 2 { c4 d e f | }
\alternative {
  { c2 e | }
  { f2 g | }
}
c1
</pre><p>
 <a href="../65/lily-8e4a0fe3.ly">
  <img align="middle"
       border="0"
       src="../65/lily-8e4a0fe3.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>A single repeat with more than one alternate ending:
</p>
<blockquote><pre class="verbatim">\repeat volta 4 { c4 d e f | }
\alternative {
  { c2 e | }
  { f2 g | }
}
c1
</pre><p>
 <a href="../3d/lily-e3fc25de.ly">
  <img align="middle"
       border="0"
       src="../3d/lily-e3fc25de.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>Multiple repeats with more than one alternate ending:
</p>
<blockquote><pre class="verbatim">\repeat volta 3 { c4 d e f | }
\alternative {
  { c2 e | }
  { f2 g | }
  { a2 g | }
}
c1
</pre><p>
 <a href="../90/lily-c429cec0.ly">
  <img align="middle"
       border="0"
       src="../90/lily-c429cec0.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<div class="warning"><p><strong>Note:</strong> If there are two or more alternatives, nothing should appear
between the closing brace of one and the opening brace of the next
in an <code>\alternative</code> block, otherwise you will not get the
expected number of endings.
</p>
</div>
<div class="warning"><p><strong>Note:</strong> If you include <code>\relative</code> inside a
<code>\repeat</code> without explicitly instantiating the
<code>Voice</code> context, extra (unwanted) staves will appear.  See
<a name="index-An-extra-staff-appears"></a>
<a href="../usage/common-errors.html#an-extra-staff-appears">An extra staff appears</a>.
</p>
</div>
<a name="index-repeat-with-upbeat"></a>
<a name="index-upbeat-in-a-repeat"></a>
<a name="index-anacrucis-in-a-repeat"></a>
<a name="index-repeat-with-anacrucis"></a>
<a name="index-repeat-with-pickup"></a>
<a name="index-pickup-in-a-repeat"></a>
<a name="index-_005cpartial-4"></a>
<a name="index-_005cpartial-5"></a>

<p>If a repeat starts in the middle of a measure and has no alternate
endings, normally the end of the repeat will also fall in the
middle of a measure, so that the two ends add up to one complete
measure.  In such cases, the repeat signs do not constitute true
bar lines.  Do not use <code>\partial</code> commands or bar checks
where these repeat signs are printed:
</p>
<blockquote><pre class="verbatim">% no \partial here
c4 e g  % no bar check here
% no \partial here
\repeat volta 4 {
  e4 |
  c2 e |
  % no \partial here
  g4 g g  % no bar check here
}
% no \partial here
g4 |
a2 a |
g1 |
</pre><p>
 <a href="../b3/lily-27a23376.ly">
  <img align="middle"
       border="0"
       src="../b3/lily-27a23376.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>Similarly, if a repeat begins with the initial partial measure of
a score and has no alternate endings, the same conditions apply as
in the above example, except that in this case the <code>\partial</code>
command is required at the beginning of the score:
</p>
<blockquote><pre class="verbatim">\partial 4  % required
\repeat volta 4 {
  e4 |
  c2 e |
  % no \partial here
  g4 g g  % no bar check here
}
% no \partial here
g4 |
a2 a |
g1 |
</pre><p>
 <a href="../fa/lily-a60bdd8a.ly">
  <img align="middle"
       border="0"
       src="../fa/lily-a60bdd8a.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>When alternate endings are added to a repeat that begins with an
incomplete measure, it becomes necessary to set the
<code>Timing.measureLength</code> context property manually, in the
following specific places:
</p>
<ul>
<li>
at the start of any incomplete measures in the <code>\alternative</code>
block, which normally occur at the end of each alternative, except
(in most cases) the last.

</li><li>
at the start of each alternative, except the first.
</li></ul>

<blockquote><pre class="verbatim">\partial 4
\repeat volta 2 { e4 | c2 e | }
\alternative {
  {
    f2 d |
    \set Timing.measureLength = #(ly:make-moment 3 4)
    g4 g g  % optional bar check is allowed here
  }
  {
    \set Timing.measureLength = #(ly:make-moment 4 4)
    a2 a |
  }
}
g1 |
</pre><p>
 <a href="../01/lily-b92d9cd2.ly">
  <img align="middle"
       border="0"
       src="../01/lily-b92d9cd2.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>The <code>measureLength</code> property is described in <a href="special-rhythmic-concerns.html#time-administration">Time administration</a>.
</p>
<a name="index-_005cinStaffSegno"></a>
<a name="index-_005cinStaffSegno-1"></a>

<p>The <code>\inStaffSegno</code> command can be used to place the segno
symbol in cooperation with the <code>\repeat volta</code> command.
Alternative bar line symbols can be set in a Score context by
overriding the properties <code>segnoType</code>,
<code>startRepeatSegnoType</code>, <code>endRepeatSegnoType</code> or
<code>doubleRepeatSegnoType</code> as required.
</p>
<blockquote><pre class="verbatim">e1
\repeat volta 2 {
  \inStaffSegno
  f2 g a b
}
c1_&quot;D.S.&quot; \bar &quot;|.&quot;
</pre><p>
 <a href="../41/lily-c583351f.ly">
  <img align="middle"
       border="0"
       src="../41/lily-c583351f.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<a name="index-repeats_002c-with-ties"></a>
<a name="index-alternative-endings_002c-with-ties"></a>
<a name="index-ties_002c-in-repeats"></a>
<a name="index-ties_002c-alternative-endings"></a>
<a name="index-_005crepeatTie-2"></a>
<a name="index-_005crepeatTie-3"></a>

<p>Ties may be added to a second ending:
</p>
<blockquote><pre class="verbatim">c1
\repeat volta 2 { c4 d e f~ }
\alternative {
  { f2 d }
  { f2\repeatTie f, }
}
</pre><p>
 <a href="../90/lily-be6002a6.ly">
  <img align="middle"
       border="0"
       src="../90/lily-be6002a6.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<a name="Selected-Snippets-46"></a>
<h4 class="subsubheading">Selected Snippets</h4>

<p><em> Shortening volta brackets</em>
</p>

<p>By default, the volta brackets will be drawn over all of the
alternative music, but it is possible to shorten them by setting
<code>voltaSpannerDuration</code>.  In the next example, the bracket only
lasts one measure, which is a duration of 3/4.
</p>

<blockquote><pre class="verbatim">\relative c'' {
  \time 3/4
  c4 c c
  \set Score.voltaSpannerDuration = #(ly:make-moment 3 4)
  \repeat volta 5 { d4 d d }
  \alternative {
    {
      e4 e e
      f4 f f
    }
    { g4 g g }
  }
}
</pre><p>
 <a href="../c7/lily-f320c7f6.ly">
  <img align="middle"
       border="0"
       src="../c7/lily-f320c7f6.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>




<p><em> Adding volta brackets to additional staves</em>
</p>

<p>The <code>Volta_engraver</code> by default resides in the <code>Score</code>
context, and brackets for the repeat are thus normally only printed
over the topmost staff. This can be adjusted by adding the
<code>Volta_engraver</code> to the <code>Staff</code> context where the brackets
should appear; see also the &ldquo;Volta multi staff&rdquo; snippet.
</p>

<blockquote><pre class="verbatim">&lt;&lt;
  \new Staff { \repeat volta 2 { c'1 } \alternative { c' } }
  \new Staff { \repeat volta 2 { c'1 } \alternative { c' } }
  \new Staff \with { \consists &quot;Volta_engraver&quot; } { c'2 g' e' a' }
  \new Staff { \repeat volta 2 { c'1 } \alternative { c' } }
&gt;&gt;
</pre><p>
 <a href="../67/lily-aa5c1d21.ly">
  <img align="middle"
       border="0"
       src="../67/lily-aa5c1d21.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>




<p><em> Setting the double repeat default for volte</em>
</p>

<p>There are three different styles of double repeats for volte, that can
be set using <code>doubleRepeatType</code>.
</p>

<blockquote><pre class="verbatim">\relative c'' {
  \repeat volta 1 { c1 }
  \set Score.doubleRepeatType = #&quot;:|:&quot;
  \repeat volta 1 { c1 }
  \set Score.doubleRepeatType = #&quot;:|.|:&quot;
  \repeat volta 1 { c1 }
  \set Score.doubleRepeatType = #&quot;:|.:&quot;
  \repeat volta 1 { c1 }
}
</pre><p>
 <a href="../96/lily-b4fe8291.ly">
  <img align="middle"
       border="0"
       src="../96/lily-b4fe8291.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<a name="index-repeats_002c-bar-numbers-letters"></a>
<a name="index-repeats_002c-alternative-bar-numbers"></a>


<p><em> Alternative bar numbering</em>
</p>
<p>Two alternative methods for bar numbering can be set,
  especially for when using repeated music.
</p><blockquote><pre class="verbatim">\relative c'{
  \set Score.alternativeNumberingStyle = #'numbers
  \repeat volta 3 { c4 d e f | }
    \alternative {
      { c4 d e f | c2 d \break }
      { f4 g a b | f4 g a b | f2 a | \break }
      { c4 d e f | c2 d }
    }
  c1 \break
  \set Score.alternativeNumberingStyle = #'numbers-with-letters
  \repeat volta 3 { c,4 d e f | }
    \alternative {
      { c4 d e f | c2 d \break }
      { f4 g a b | f4 g a b | f2 a | \break }
      { c4 d e f | c2 d }
    }
  c1
}
</pre><p>
 <a href="../d9/lily-6fcfe36e.ly">
  <img align="middle"
       border="0"
       src="../d9/lily-6fcfe36e.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<a name="See-also-41"></a>
<h4 class="subsubheading">See also</h4>
<p>Music Glossary:
<a name="index-repeat"></a>
<a href="../music-glossary/repeat.html">repeat</a>,
<a name="index-volta-1"></a>
<a href="../music-glossary/volta.html">volta</a>.
</p>
<p>Notation Reference:
<a href="bars.html#bar-lines">Bar lines</a>,
<a href="modifying-context-plug_002dins.html">Modifying context plug-ins</a>,
<a href="special-rhythmic-concerns.html#time-administration">Time administration</a>.
</p>
<p>Snippets:
<a href="../snippets/repeats.html">Repeats</a>.
</p>
<p>Internals Reference:
<a name="index-VoltaBracket"></a>
<a href="../internals/voltabracket.html">VoltaBracket</a>,
<a name="index-RepeatedMusic"></a>
<a href="../internals/repeatedmusic.html">RepeatedMusic</a>,
<a name="index-VoltaRepeatedMusic"></a>
<a href="../internals/voltarepeatedmusic.html">VoltaRepeatedMusic</a>,
<a name="index-UnfoldedRepeatedMusic"></a>
<a href="../internals/unfoldedrepeatedmusic.html">UnfoldedRepeatedMusic</a>.
</p>
<a name="Known-issues-and-warnings-78"></a>
<h4 class="subsubheading">Known issues and warnings</h4>
<a name="index-repeat_002c-ambiguous"></a>
<a name="index-nested-repeat"></a>
<a name="index-repeat_002c-nested"></a>
<a name="index-repeat-timing-information"></a>
<a name="index-repeat-and-measure-number"></a>
<a name="index-timing-information-and-repeats"></a>
<a name="index-measure-number-and-repeats"></a>
<a name="index-repeat-and-slur"></a>
<a name="index-slur-and-repeat"></a>

<p>Slurs that span from a <code>\repeat</code> block into an
<code>\alternative</code> block will only work for the first alternate
ending.  Also, slurs cannot wrap around from the end of one
alternative back to the beginning of the repeat.
</p>
<p>If a repeat that begins with an incomplete measure has an
<code>\alternative</code> block that contains modifications to the
<code>measureLength</code> property, using <code>\unfoldRepeats</code> will
result in wrongly-placed bar lines and bar check warnings.
</p>
<p>A nested repeat like
</p>
<blockquote><pre class="example">\repeat &hellip;
\repeat &hellip;
\alternative
</pre></blockquote>

<p>is ambiguous, since it is not clear to which <code>\repeat</code> the
<code>\alternative</code> belongs.  This ambiguity is resolved by always
having the <code>\alternative</code> belong to the inner <code>\repeat</code>.
For clarity, it is advisable to use braces in such situations.
</p>

<hr size="6">
<a name="Manual-repeat-marks"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="musical-notation.html" title="Beginning of this chapter or previous chapter"> &lt;&lt; Musical notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="index.html" title="Cover (top) of document" rel="start">Top</a>][<a href="index_toc.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="lilypond-command-index.html" title="Index" rel="index">Index</a>][<a href="index_abt.html#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="specialist-notation.html" title="Next chapter">&nbsp;Specialist notation &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#normal-repeats" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Normal repeats&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#long-repeats" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Long repeats&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#written_002dout-repeats" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Written-out repeats &gt; </a>]</td></tr></table>
<a name="manual-repeat-marks"></a>
<h4 class="unnumberedsubsubsec">Manual repeat marks</h4>

<a name="index-manual-repeat-mark"></a>
<a name="index-repeat_002c-manual"></a>
<a name="index-start-repeat"></a>
<a name="index-repeat_002c-start"></a>
<a name="index-end-repeat"></a>
<a name="index-repeat_002c-end"></a>
<a name="index-repeat-number_002c-changing"></a>
<a name="index-repeat-volta_002c-changing"></a>
<a name="index-volta-bracket"></a>
<a name="index-bracket_002c-volta"></a>
<a name="index-repeatCommands"></a>
<a name="index-repeatCommands-1"></a>
<a name="index-start_002drepeat"></a>
<a name="index-start_002drepeat-1"></a>

<div class="warning"><p><strong>Note:</strong> These methods are only used for displaying unusual repeat
constructs, and may produce unexpected behavior.  In most cases,
repeats should be created using the standard <code>\repeat</code> command
or by printing the relevant bar lines.  For more information, see
<a href="bars.html#bar-lines">Bar lines</a>.
</p>
</div>
<p>The property <code>repeatCommands</code> can be used to control the
layout of repeats.  Its value is a Scheme list of repeat commands.
</p>
<dl compact="compact">
<dt> <code>start-repeat</code></dt>
<dd><p>Print a <code>|:</code> bar line.
</p>
<blockquote><pre class="verbatim">c1
\set Score.repeatCommands = #'(start-repeat)
d4 e f g
c1
</pre><p>
 <a href="../26/lily-90262345.ly">
  <img align="middle"
       border="0"
       src="../26/lily-90262345.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>As per standard engraving practice, repeat signs are not printed
at the beginning of a piece.
</p>
</dd>
<dt> <code>end-repeat</code></dt>
<dd><p>Print a <code>:|</code> bar line:
</p>
<blockquote><pre class="verbatim">c1
d4 e f g
\set Score.repeatCommands = #'(end-repeat)
c1
</pre><p>
 <a href="../94/lily-267de863.ly">
  <img align="middle"
       border="0"
       src="../94/lily-267de863.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



</dd>
<dt> <code>(volta <var>number</var>) ... (volta #f)</code></dt>
<dd><p>Create a new volta with the specified number.  The volta bracket must
be explicitly terminated, or it will not be printed.
</p>
<blockquote><pre class="verbatim">f4 g a b
\set Score.repeatCommands = #'((volta &quot;2&quot;))
g4 a g a
\set Score.repeatCommands = #'((volta #f))
c1
</pre><p>
 <a href="../b8/lily-7c7f9f54.ly">
  <img align="middle"
       border="0"
       src="../b8/lily-7c7f9f54.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



</dd>
</dl>

<p>Multiple repeat commands may occur at the same point:
</p>
<blockquote><pre class="verbatim">f4 g a b
\set Score.repeatCommands = #'((volta &quot;2, 5&quot;) end-repeat)
g4 a g a
c1
\set Score.repeatCommands = #'((volta #f) (volta &quot;95&quot;) end-repeat)
b1
\set Score.repeatCommands = #'((volta #f))
</pre><p>
 <a href="../f3/lily-4e7cb272.ly">
  <img align="middle"
       border="0"
       src="../f3/lily-4e7cb272.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<a name="index-volta-bracket-with-text"></a>
<a name="index-text-in-volta-bracket"></a>

<p>Text can be included with the volta bracket.  The text can be a
number or numbers or markup text, see <a href="formatting-text.html">Formatting text</a>.  The
simplest way to use markup text is to define the markup first,
then include the markup in a Scheme list.
</p>
<blockquote><pre class="verbatim">voltaAdLib = \markup { 1. 2. 3... \text \italic { ad lib. } }
\relative c'' {
  c1
  \set Score.repeatCommands =
    #(list(list 'volta voltaAdLib) 'start-repeat)
  c4 b d e
  \set Score.repeatCommands = #'((volta #f) (volta &quot;4.&quot;) end-repeat)
  f1
  \set Score.repeatCommands = #'((volta #f))
}
</pre><p>
 <a href="../cb/lily-a3149176.ly">
  <img align="middle"
       border="0"
       src="../cb/lily-a3149176.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>




<a name="Selected-Snippets-48"></a>
<h4 class="subsubheading">Selected Snippets</h4>


<p><em> Printing a repeat sign at the beginning of a piece</em>
</p>

<p>A <code>|:</code> bar line can be printed at the beginning of a piece, by
overriding the relevant property:
</p>

<blockquote><pre class="verbatim">\relative c'' {
  \once \override Score.BreakAlignment #'break-align-orders =
    #(make-vector 3 '(instrument-name
                      left-edge
                      ambitus
                      breathing-sign
                      clef
                      key-signature
                      time-signature
                      staff-bar
                      custos))
  \once \override Staff.TimeSignature #'space-alist =
    #'((first-note . (fixed-space . 2.0))
       (right-edge . (extra-space . 0.5))
       ;; free up some space between time signature
       ;; and repeat bar line
       (staff-bar . (extra-space . 1)))
  \bar &quot;|:&quot;
  c1
  d1
  d4 e f g
}
</pre><p>
 <a href="../1e/lily-87620b6d.ly">
  <img align="middle"
       border="0"
       src="../1e/lily-87620b6d.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<a name="See-also-261"></a>
<h4 class="subsubheading">See also</h4>
<p>Notation Reference:
<a href="bars.html#bar-lines">Bar lines</a>,
<a href="formatting-text.html">Formatting text</a>.
</p>
<p>Snippets:
<a href="../snippets/repeats.html">Repeats</a>.
</p>
<p>Internals Reference:
<a name="index-VoltaBracket-1"></a>
<a href="../internals/voltabracket.html">VoltaBracket</a>,
<a name="index-RepeatedMusic-1"></a>
<a href="../internals/repeatedmusic.html">RepeatedMusic</a>,
<a name="index-VoltaRepeatedMusic-1"></a>
<a href="../internals/voltarepeatedmusic.html">VoltaRepeatedMusic</a>.
</p>

<hr size="6">
<a name="Written_002dout-repeats"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="musical-notation.html" title="Beginning of this chapter or previous chapter"> &lt;&lt; Musical notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="index.html" title="Cover (top) of document" rel="start">Top</a>][<a href="index_toc.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="lilypond-command-index.html" title="Index" rel="index">Index</a>][<a href="index_abt.html#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="specialist-notation.html" title="Next chapter">&nbsp;Specialist notation &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#manual-repeat-marks" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Manual repeat marks&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#long-repeats" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Long repeats&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="short-repeats.html" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Short repeats &gt; </a>]</td></tr></table>
<a name="written_002dout-repeats"></a>
<h4 class="unnumberedsubsubsec">Written-out repeats</h4>

<a name="index-written_002dout-repeats"></a>
<a name="index-repeats_002c-written_002dout"></a>
<a name="index-repeats_002c-unfold"></a>
<a name="index-repeats_002c-alternative"></a>
<a name="index-unfold-repeat"></a>
<a name="index-unfold-repeat_002c-alternate-endings"></a>
<a name="index-alternate-repeats"></a>
<a name="index-alternate-endings_002c-repeats"></a>
<a name="index-unfold"></a>
<a name="index-unfold-1"></a>

<p>By using the <code>unfold</code> command, repeats can be used to simplify the
writing out of repetitious music.  The syntax is
</p>
<blockquote><pre class="example">\repeat unfold <var>repeatcount</var> <var>musicexpr</var>
</pre></blockquote>

<p>where <code><var>musicexpr</var></code> is a music expression and
<code><var>repeatcount</var></code> is the number of times
<code><var>musicexpr</var></code> is repeated.
</p>
<blockquote><pre class="verbatim">\repeat unfold 2 { c4 d e f }
c1
</pre><p>
 <a href="../b0/lily-2eb3d077.ly">
  <img align="middle"
       border="0"
       src="../b0/lily-2eb3d077.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>In some cases, especially in a <code>\relative</code> context, the
<code>\repeat unfold</code> function is not the same as writing out the
music expression multiple times. E.g,
</p>
<blockquote><pre class="example">\repeat unfold 2 { a'4 b c }
</pre></blockquote>

<p>is not equivalent to
</p>
<blockquote><pre class="example">a'4 b c | a'4 b c
</pre></blockquote>

<p>Unfold repeats can be made with alternate endings.
</p>
<blockquote><pre class="verbatim">\repeat unfold 2 { c4 d e f }
\alternative {
  { c2 g' }
  { c,2 b }
}
c1
</pre><p>
 <a href="../4e/lily-3d3c417b.ly">
  <img align="middle"
       border="0"
       src="../4e/lily-3d3c417b.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>If there are more repeats than there are alternate endings, the first
alternative is applied multiple times until the remaining alternatives
make up the total number of repeats.
</p>
<blockquote><pre class="verbatim">\repeat unfold 4 { c4 d e f }
\alternative {
  { c2 g' }
  { c,2 b }
  { e2 d }
 }
c1
</pre><p>
 <a href="../a6/lily-4b1b75da.ly">
  <img align="middle"
       border="0"
       src="../a6/lily-4b1b75da.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>If there are more alternate endings than repeats then only the first
alternatives are applied.  The remaining alternatives will be ignored
and not printed.
</p>
<blockquote><pre class="verbatim">\repeat unfold 2 { c4 d e f }
\alternative {
  { c2 g' }
  { c,2 b }
  { e2 d }
}
c1
</pre><p>
 <a href="../be/lily-dfc082cd.ly">
  <img align="middle"
       border="0"
       src="../be/lily-dfc082cd.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>It is also possible to nest multiple <code>unfold</code> functions (with or
without alternate endings).
</p>
<blockquote><pre class="verbatim">\repeat unfold 2 {
  \repeat unfold 2 { c4 d e f }
  \alternative {
    { c2 g' }
    { c,2 b }
  }
}
c1
</pre><p>
 <a href="../5d/lily-d3e4bb1b.ly">
  <img align="middle"
       border="0"
       src="../5d/lily-d3e4bb1b.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>Chord constructs can be repeated by the chord repetition symbol
<code>q</code>.  See <a href="single-voice.html#chord-repetition">Chord repetition</a>.
</p>
<div class="warning"><p><strong>Note:</strong> If you include <code>\relative</code> inside a <code>\repeat</code>
without explicitly instantiating the <code>Voice</code> context, extra
(unwanted) staves will appear.  See <a name="index-An-extra-staff-appears-1"></a>
<a href="../usage/common-errors.html#an-extra-staff-appears">An extra staff appears</a>.
</p>
</div>
<a name="See-also-53"></a>
<h4 class="subsubheading">See also</h4>
<p>Notation Reference:
<a href="single-voice.html#chord-repetition">Chord repetition</a>.
</p>
<p>Snippets:
<a href="../snippets/repeats.html">Repeats</a>.
</p>
<p>Internals Reference:
<a name="index-RepeatedMusic-2"></a>
<a href="../internals/repeatedmusic.html">RepeatedMusic</a>,
<a name="index-UnfoldedRepeatedMusic-1"></a>
<a href="../internals/unfoldedrepeatedmusic.html">UnfoldedRepeatedMusic</a>.
</p>

<hr size="6">
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="musical-notation.html" title="Beginning of this chapter or previous chapter"> &lt;&lt; Musical notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="index.html" title="Cover (top) of document" rel="start">Top</a>][<a href="index_toc.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="lilypond-command-index.html" title="Index" rel="index">Index</a>][<a href="index_abt.html#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="specialist-notation.html" title="Next chapter">&nbsp;Specialist notation &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#manual-repeat-marks" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Manual repeat marks&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#long-repeats" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Long repeats&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="short-repeats.html" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Short repeats &gt; </a>]</td></tr></table>
<!-- footer_tag -->
<div class="footer">
<!-- This footer was autogenerated by /build/buildd/lilypond-2.16.2/scripts/build/out/www_post -->
<p class="footer_version">
This page is for LilyPond-2.16.2 (stable-branch).
</p>
<p class="footer_report">
We welcome your aid; please <a href="http://lilypond.org/help-us.html">help us</a> by reporting errors to our <a href="http://post.gmane.org/post.php?group=gmane.comp.gnu.lilypond.bugs">bug list</a>.
</p>
</div>


<p id="languages">
<!-- These links were autogenerated by /build/buildd/lilypond-2.16.2/scripts/build/out/www_post -->
 Other languages: <a href="long-repeats.de.html">deutsch</a>, <a href="long-repeats.es.html">español</a>, <a href="long-repeats.fr.html">français</a>, <a href="long-repeats.it.html">italiano</a>, <a href="long-repeats.ja.html">日本語</a>.
 <br>
 About <a href="http://www.lilypond.org/website/misc/browser-language">automatic language selection</a>.
</p>

<!-- FOOTER -->

<!-- end div#main here -->
</div>



<div id="tocframe">
<p class="toc_uplink"><a href="../../Documentation/web/manuals.html"
         title="Documentation Index">&lt;&lt; Back to Documentation Index</a></p>
<h4 class="toc_header"> <a href="index.html" title="Start of the manual">LilyPond &mdash; Notation Reference</a></h4>
<div class="contents">
<ul class="toc">
  <li class=" toc_current"><a name="toc-Musical-notation-1" href="musical-notation.html">1. Musical notation</a>
  <ul class="toc">
    <li class=""><a name="toc-Pitches-1" href="pitches.html">1.1 Pitches</a>    </li>
    <li class=""><a name="toc-Rhythms-1" href="rhythms.html">1.2 Rhythms</a>    </li>
    <li class=""><a name="toc-Expressive-marks-1" href="expressive-marks.html">1.3 Expressive marks</a>    </li>
    <li class=" toc_current"><a name="toc-Repeats-1" href="repeats.html">1.4 Repeats</a>
    <ul class="toc">
      <li class=" toc_current"><a name="toc-Long-repeats-1" href="long-repeats.html">1.4.1 Long repeats</a>
      <ul class="toc">
        <li class=""><a name="toc-Normal-repeats-1" href="long-repeats.html#normal-repeats">Normal repeats</a>        </li>
        <li class=""><a name="toc-Manual-repeat-marks-1" href="long-repeats.html#manual-repeat-marks">Manual repeat marks</a>        </li>
        <li class=""><a name="toc-Written_002dout-repeats-1" href="long-repeats.html#written_002dout-repeats">Written-out repeats</a>        </li>
      </ul>
      </li>
      <li class=""><a name="toc-Short-repeats-1" href="short-repeats.html">1.4.2 Short repeats</a>      </li>
    </ul>
    </li>
    <li class=""><a name="toc-Simultaneous-notes-1" href="simultaneous-notes.html">1.5 Simultaneous notes</a>    </li>
    <li class=""><a name="toc-Staff-notation-1" href="staff-notation.html">1.6 Staff notation</a>    </li>
    <li class=""><a name="toc-Editorial-annotations-1" href="editorial-annotations.html">1.7 Editorial annotations</a>    </li>
    <li class=""><a name="toc-Text-1" href="text.html">1.8 Text</a>    </li>
  </ul>
  </li>
  <li class=""><a name="toc-Specialist-notation-1" href="specialist-notation.html">2. Specialist notation</a>
  <ul class="toc">
    <li class=""><a name="toc-Vocal-music-1" href="vocal-music.html">2.1 Vocal music</a>    </li>
    <li class=""><a name="toc-Keyboard-and-other-multi_002dstaff-instruments-1" href="keyboard-and-other-multi_002dstaff-instruments.html">2.2 Keyboard and other multi-staff instruments</a>    </li>
    <li class=""><a name="toc-Unfretted-string-instruments-1" href="unfretted-string-instruments.html">2.3 Unfretted string instruments</a>    </li>
    <li class=""><a name="toc-Fretted-string-instruments-1" href="fretted-string-instruments.html">2.4 Fretted string instruments</a>    </li>
    <li class=""><a name="toc-Percussion-1" href="percussion.html">2.5 Percussion</a>    </li>
    <li class=""><a name="toc-Wind-instruments-1" href="wind-instruments.html">2.6 Wind instruments</a>    </li>
    <li class=""><a name="toc-Chord-notation-1" href="chord-notation.html">2.7 Chord notation</a>    </li>
    <li class=""><a name="toc-Contemporary-music-1" href="contemporary-music.html">2.8 Contemporary music</a>    </li>
    <li class=""><a name="toc-Ancient-notation-1" href="ancient-notation.html">2.9 Ancient notation</a>    </li>
    <li class=""><a name="toc-World-music-1" href="world-music.html">2.10 World music</a>    </li>
  </ul>
  </li>
  <li class=""><a name="toc-General-input-and-output-1" href="general-input-and-output.html">3. General input and output</a>
  <ul class="toc">
    <li class=""><a name="toc-Input-structure-1" href="input-structure.html">3.1 Input structure</a>    </li>
    <li class=""><a name="toc-Titles-and-headers-1" href="titles-and-headers.html">3.2 Titles and headers</a>    </li>
    <li class=""><a name="toc-Working-with-input-files-1" href="working-with-input-files.html">3.3 Working with input files</a>    </li>
    <li class=""><a name="toc-Controlling-output-1" href="controlling-output.html">3.4 Controlling output</a>    </li>
    <li class=""><a name="toc-MIDI-output-1" href="midi-output.html">3.5 MIDI output</a>    </li>
    <li class=""><a name="toc-Extracting-musical-information-1" href="extracting-musical-information.html">3.6 Extracting musical information</a>    </li>
  </ul>
  </li>
  <li class=""><a name="toc-Spacing-issues-1" href="spacing-issues.html">4. Spacing issues</a>
  <ul class="toc">
    <li class=""><a name="toc-Page-layout-1" href="page-layout.html">4.1 Page layout</a>    </li>
    <li class=""><a name="toc-Score-layout-1" href="score-layout.html">4.2 Score layout</a>    </li>
    <li class=""><a name="toc-Breaks-1" href="breaks.html">4.3 Breaks</a>    </li>
    <li class=""><a name="toc-Vertical-spacing-1" href="vertical-spacing.html">4.4 Vertical spacing</a>    </li>
    <li class=""><a name="toc-Horizontal-spacing-1" href="horizontal-spacing.html">4.5 Horizontal spacing</a>    </li>
    <li class=""><a name="toc-Fitting-music-onto-fewer-pages-1" href="fitting-music-onto-fewer-pages.html">4.6 Fitting music onto fewer pages</a>    </li>
  </ul>
  </li>
  <li class=""><a name="toc-Changing-defaults-1" href="changing-defaults.html">5. Changing defaults</a>
  <ul class="toc">
    <li class=""><a name="toc-Interpretation-contexts-1" href="interpretation-contexts.html">5.1 Interpretation contexts</a>    </li>
    <li class=""><a name="toc-Explaining-the-Internals-Reference-1" href="explaining-the-internals-reference.html">5.2 Explaining the Internals Reference</a>    </li>
    <li class=""><a name="toc-Modifying-properties-1" href="modifying-properties.html">5.3 Modifying properties</a>    </li>
    <li class=""><a name="toc-Useful-concepts-and-properties-1" href="useful-concepts-and-properties.html">5.4 Useful concepts and properties</a>    </li>
    <li class=""><a name="toc-Advanced-tweaks-1" href="advanced-tweaks.html">5.5 Advanced tweaks</a>    </li>
    <li class=""><a name="toc-Using-music-functions-1" href="using-music-functions.html">5.6 Using music functions</a>    </li>
  </ul>
  </li>
  <li class=""><a name="toc-Notation-manual-tables-1" href="notation-manual-tables.html">A. Notation manual tables</a>
  <ul class="toc">
    <li class=""><a name="toc-Chord-name-chart-1" href="chord-name-chart.html">A.1 Chord name chart</a>    </li>
    <li class=""><a name="toc-Common-chord-modifiers-1" href="common-chord-modifiers.html">A.2 Common chord modifiers</a>    </li>
    <li class=""><a name="toc-Predefined-string-tunings-1" href="predefined-string-tunings.html">A.3 Predefined string tunings</a>    </li>
    <li class=""><a name="toc-Predefined-fretboard-diagrams-1" href="predefined-fretboard-diagrams.html">A.4 Predefined fretboard diagrams</a>    </li>
    <li class=""><a name="toc-Predefined-paper-sizes-1" href="predefined-paper-sizes.html">A.5 Predefined paper sizes</a>    </li>
    <li class=""><a name="toc-MIDI-instruments-1" href="midi-instruments.html">A.6 MIDI instruments</a>    </li>
    <li class=""><a name="toc-List-of-colors-1" href="list-of-colors.html">A.7 List of colors</a>    </li>
    <li class=""><a name="toc-The-Feta-font-1" href="the-feta-font.html">A.8 The Feta font</a>    </li>
    <li class=""><a name="toc-Note-head-styles-1" href="note-head-styles.html">A.9 Note head styles</a>    </li>
    <li class=""><a name="toc-Text-markup-commands-1" href="text-markup-commands.html">A.10 Text markup commands</a>    </li>
    <li class=""><a name="toc-Text-markup-list-commands-1" href="text-markup-list-commands.html">A.11 Text markup list commands</a>    </li>
    <li class=""><a name="toc-List-of-special-characters-1" href="list-of-special-characters.html">A.12 List of special characters</a>    </li>
    <li class=""><a name="toc-List-of-articulations-1" href="list-of-articulations.html">A.13 List of articulations</a>    </li>
    <li class=""><a name="toc-Percussion-notes-1" href="percussion-notes.html">A.14 Percussion notes</a>    </li>
    <li class=""><a name="toc-Technical-glossary-1" href="technical-glossary.html">A.15 Technical glossary</a>    </li>
    <li class=""><a name="toc-All-context-properties-1" href="all-context-properties.html">A.16 All context properties</a>    </li>
    <li class=""><a name="toc-Layout-properties-1" href="layout-properties.html">A.17 Layout properties</a>    </li>
    <li class=""><a name="toc-Available-music-functions-1" href="available-music-functions.html">A.18 Available music functions</a>    </li>
    <li class=""><a name="toc-Context-modification-identifiers-1" href="context-modification-identifiers.html">A.19 Context modification identifiers</a>    </li>
    <li class=""><a name="toc-Predefined-type-predicates-1" href="predefined-type-predicates.html">A.20 Predefined type predicates</a>    </li>
    <li class=""><a name="toc-Scheme-functions-1" href="scheme-functions.html">A.21 Scheme functions</a>    </li>
  </ul>
  </li>
  <li class=""><a name="toc-Cheat-sheet-1" href="cheat-sheet.html">B. Cheat sheet</a>  </li>
  <li class=""><a name="toc-LilyPond-grammar-1" href="lilypond-grammar.html">C. LilyPond grammar</a>  </li>
  <li class=""><a name="toc-GNU-Free-Documentation-License-1" href="gnu-free-documentation-license.html">D. GNU Free Documentation License</a>  </li>
  <li class=""><a name="toc-LilyPond-command-index-1" href="lilypond-command-index.html">E. LilyPond command index</a>  </li>
  <li class=""><a name="toc-LilyPond-index-1" href="lilypond-index.html">F. LilyPond index</a>  </li>
<li>
<!--
we depend on an external entity here, which we cannot control.  Suppose
we go from 2.16.x to 2.17.x and put the documentation under "v2.17".
For some time, Google won't have the new location in its index, so the
search would get nothing.  It would be better to keep "v2.16" in the
search for a while and have a redirection from "v2.16" to "v2.17".
-->

<form action="http://google.com/search"
      method="get"
      name="search"
      onSubmit="search.q.value='site:lilypond.org/doc/v2.16 '
		+ search.brute_query.value"
      onMouseMove="search.q.value='site:lilypond.org/doc/v2.16 '
		   + search.brute_query.value"
      onKeyUp="search.q.value='site:lilypond.org/doc/v2.16 '
	       + search.brute_query.value">
  <input type="hidden" name="btnG" value="Google Search">
  <input type="text" name="brute_query" onfocus="this.value=''" value="Search">
  <input type="hidden" name="q" value="">
</form>
</li>
</ul>
</div>
</div>

</body>
</html>
