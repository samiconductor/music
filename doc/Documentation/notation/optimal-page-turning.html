<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Copyright C 1999-2012 by the authors.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.1
or any later version published by the Free Software Foundation;
with no Invariant Sections.
A copy of the license is included in the section entitled "GNU
Free Documentation License".

 -->
<!-- Created on January 1, 2014 by texi2html 1.82
texi2html was written by: 
            Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Many creative people.
Send bugs and suggestions to <texi2html-bug@nongnu.org>
-->
<head>
<title>LilyPond Notation Reference: 4.3.4 Optimal page turning</title>

<meta name="description" content="LilyPond Notation Reference: 4.3.4 Optimal page turning">
<meta name="keywords" content="LilyPond Notation Reference: 4.3.4 Optimal page turning">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2html 1.82">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link href="index.html#index" rel="start" title="LilyPond &mdash; Notation Reference">
<link href="lilypond-command-index.html#lilypond-command-index" rel="index" title="E. LilyPond command index">
<link href="index_toc.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="index_abt.html#SEC_About" rel="help" title="About This Document">
<link href="breaks.html#breaks" rel="up" title="4.3 Breaks">
<link href="lilypond-index.html#lilypond-index" rel="next" title="F. LilyPond index">
<link href="optimal-page-breaking.html#optimal-page-breaking" rel="previous" title="4.3.3 Optimal page breaking">
<link rel="stylesheet" type="text/css" title="Default style" href="../../Documentation/css/lilypond-manuals.css">
<!--[if lte IE 7]>
<link href="../../Documentation/css/lilypond-ie-fixes.css" rel="stylesheet" type="text/css">
<![endif]-->


</head>

<body lang="en" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#800080" alink="#FF0000">


<div id="main">
<a name="Optimal-page-turning"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="spacing-issues.html" title="Beginning of this chapter or previous chapter"> &lt;&lt; Spacing issues&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="index.html" title="Cover (top) of document" rel="start">Top</a>][<a href="index_toc.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="lilypond-command-index.html" title="Index" rel="index">Index</a>][<a href="index_abt.html#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="changing-defaults.html" title="Next chapter">&nbsp;Changing defaults &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="optimal-page-breaking.html" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Optimal page breaking&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="breaks.html" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Breaks&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="minimal-page-breaking.html" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Minimal page breaking &gt; </a>]</td></tr></table>
<a name="optimal-page-turning"></a>
<h3 class="subsection">4.3.4 Optimal page turning</h3>

<a name="index-ly_003apage_002dturn_002dbreaking"></a>
<a name="index-ly_003apage_002dturn_002dbreaking-1"></a>

<p>Often it is necessary to find a page breaking configuration so that there is
a rest at the end of every second page.  This way, the musician can turn the
page without having to miss notes.  The <code>ly:page-turn-breaking</code> function
attempts to find a page breaking minimizing cramping and stretching, but with
the additional restriction that it is only allowed to introduce page turns
in specified places.
</p>
<p>There are two steps to using this page breaking function.  First, you
must enable it in the <code>\paper</code> block, as explained in <a href="page-breaking.html">Page breaking</a>.  Then you must tell the function where you would like to allow
page breaks.
</p>
<p>There are two ways to achieve the second step.  First, you can specify each
potential page turn manually, by inserting <code>\allowPageTurn</code> into your
input file at the appropriate places.
</p>
<p>If this is too tedious, you can add a <code>Page_turn_engraver</code> to a Staff or
Voice context.  The <code>Page_turn_engraver</code> will scan the context for
sections without notes (note that it does not scan for rests; it scans for
the absence of notes.  This is so that single-staff polyphony with rests in one
of the parts does not throw off the <code>Page_turn_engraver</code>).  When it finds
a sufficiently long section without notes, the <code>Page_turn_engraver</code> will
insert an <code>\allowPageTurn</code> at the final bar line in that section, unless
there is a &lsquo;special&rsquo; bar line (such as a double bar), in which case the
<code>\allowPageTurn</code> will be inserted at the final &lsquo;special&rsquo; bar line in
the section.
</p>
<a name="index-minimumPageTurnLength"></a>
<a name="index-minimumPageTurnLength-1"></a>
<p>The <code>Page_turn_engraver</code> reads the context property
<code>minimumPageTurnLength</code> to determine how long a note-free section must
be before a page turn is considered.  The default value for
<code>minimumPageTurnLength</code> is <code>(ly:make-moment 1 1)</code>.  If you want
to disable page turns, you can set it to something very large.
</p>
<blockquote><pre class="example">\new Staff \with { \consists &quot;Page_turn_engraver&quot; }
{
  a4 b c d |
  R1 | % a page turn will be allowed here
  a4 b c d |
  \set Staff.minimumPageTurnLength = #(ly:make-moment 5 2)
  R1 | % a page turn will not be allowed here
  a4 b r2 |
  R1*2 | % a page turn will be allowed here
  a1
}
</pre></blockquote>

<a name="index-minimumRepeatLengthForPageTurn"></a>
<a name="index-minimumRepeatLengthForPageTurn-1"></a>
<p>The <code>Page_turn_engraver</code> detects volta repeats.  It will only allow a page
turn during the repeat if there is enough time at the beginning and end of the
repeat to turn the page back.  The <code>Page_turn_engraver</code> can also disable
page turns if the repeat is very short.  If you set the context property
<code>minimumRepeatLengthForPageTurn</code> then the <code>Page_turn_engraver</code> will
only allow turns in repeats whose duration is longer than this value.
</p>
<p>The page turning commands, <code>\pageTurn</code>, <code>\noPageTurn</code> and
<code>\allowPageTurn</code>, may also be used at top-level, between scores and
top-level markups.
</p>
<a name="Predefined-commands-42"></a>
<h4 class="subsubheading">Predefined commands</h4>
<a name="index-_005cpageTurn"></a>
<a name="index-_005cpageTurn-1"></a>
<p><code>\pageTurn</code>,
<a name="index-_005cnoPageTurn"></a>
<a name="index-_005cnoPageTurn-1"></a>
<code>\noPageTurn</code>,
<a name="index-_005callowPageTurn"></a>
<a name="index-_005callowPageTurn-1"></a>
<code>\allowPageTurn</code>.
</p>
<a name="See-also-144"></a>
<h4 class="subsubheading">See also</h4>
<p>Snippets:
<a href="../snippets/spacing.html">Spacing</a>.
</p>
<a name="Known-issues-and-warnings-29"></a>
<h4 class="subsubheading">Known issues and warnings</h4>
<p>There should only be one <code>Page_turn_engraver</code> in a score.  If there is more
than one, they will interfere with each other.
</p>

<hr size="6">
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="spacing-issues.html" title="Beginning of this chapter or previous chapter"> &lt;&lt; Spacing issues&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="index.html" title="Cover (top) of document" rel="start">Top</a>][<a href="index_toc.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="lilypond-command-index.html" title="Index" rel="index">Index</a>][<a href="index_abt.html#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="changing-defaults.html" title="Next chapter">&nbsp;Changing defaults &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="optimal-page-breaking.html" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Optimal page breaking&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="breaks.html" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Breaks&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="minimal-page-breaking.html" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Minimal page breaking &gt; </a>]</td></tr></table>
<!-- footer_tag -->
<div class="footer">
<!-- This footer was autogenerated by /build/buildd/lilypond-2.16.2/scripts/build/out/www_post -->
<p class="footer_version">
This page is for LilyPond-2.16.2 (stable-branch).
</p>
<p class="footer_report">
We welcome your aid; please <a href="http://lilypond.org/help-us.html">help us</a> by reporting errors to our <a href="http://post.gmane.org/post.php?group=gmane.comp.gnu.lilypond.bugs">bug list</a>.
</p>
</div>


<p id="languages">
<!-- These links were autogenerated by /build/buildd/lilypond-2.16.2/scripts/build/out/www_post -->
 Other languages: <a href="optimal-page-turning.de.html">deutsch</a>, <a href="optimal-page-turning.es.html">español</a>, <a href="optimal-page-turning.fr.html">français</a>, <a href="optimal-page-turning.it.html">italiano</a>, <a href="optimal-page-turning.ja.html">日本語</a>.
 <br>
 About <a href="http://www.lilypond.org/website/misc/browser-language">automatic language selection</a>.
</p>

<!-- FOOTER -->

<!-- end div#main here -->
</div>



<div id="tocframe">
<p class="toc_uplink"><a href="../../Documentation/web/manuals.html"
         title="Documentation Index">&lt;&lt; Back to Documentation Index</a></p>
<h4 class="toc_header"> <a href="index.html" title="Start of the manual">LilyPond &mdash; Notation Reference</a></h4>
<div class="contents">
<ul class="toc">
  <li class=""><a name="toc-Musical-notation-1" href="musical-notation.html">1. Musical notation</a>
  <ul class="toc">
    <li class=""><a name="toc-Pitches-1" href="pitches.html">1.1 Pitches</a>    </li>
    <li class=""><a name="toc-Rhythms-1" href="rhythms.html">1.2 Rhythms</a>    </li>
    <li class=""><a name="toc-Expressive-marks-1" href="expressive-marks.html">1.3 Expressive marks</a>    </li>
    <li class=""><a name="toc-Repeats-1" href="repeats.html">1.4 Repeats</a>    </li>
    <li class=""><a name="toc-Simultaneous-notes-1" href="simultaneous-notes.html">1.5 Simultaneous notes</a>    </li>
    <li class=""><a name="toc-Staff-notation-1" href="staff-notation.html">1.6 Staff notation</a>    </li>
    <li class=""><a name="toc-Editorial-annotations-1" href="editorial-annotations.html">1.7 Editorial annotations</a>    </li>
    <li class=""><a name="toc-Text-1" href="text.html">1.8 Text</a>    </li>
  </ul>
  </li>
  <li class=""><a name="toc-Specialist-notation-1" href="specialist-notation.html">2. Specialist notation</a>
  <ul class="toc">
    <li class=""><a name="toc-Vocal-music-1" href="vocal-music.html">2.1 Vocal music</a>    </li>
    <li class=""><a name="toc-Keyboard-and-other-multi_002dstaff-instruments-1" href="keyboard-and-other-multi_002dstaff-instruments.html">2.2 Keyboard and other multi-staff instruments</a>    </li>
    <li class=""><a name="toc-Unfretted-string-instruments-1" href="unfretted-string-instruments.html">2.3 Unfretted string instruments</a>    </li>
    <li class=""><a name="toc-Fretted-string-instruments-1" href="fretted-string-instruments.html">2.4 Fretted string instruments</a>    </li>
    <li class=""><a name="toc-Percussion-1" href="percussion.html">2.5 Percussion</a>    </li>
    <li class=""><a name="toc-Wind-instruments-1" href="wind-instruments.html">2.6 Wind instruments</a>    </li>
    <li class=""><a name="toc-Chord-notation-1" href="chord-notation.html">2.7 Chord notation</a>    </li>
    <li class=""><a name="toc-Contemporary-music-1" href="contemporary-music.html">2.8 Contemporary music</a>    </li>
    <li class=""><a name="toc-Ancient-notation-1" href="ancient-notation.html">2.9 Ancient notation</a>    </li>
    <li class=""><a name="toc-World-music-1" href="world-music.html">2.10 World music</a>    </li>
  </ul>
  </li>
  <li class=""><a name="toc-General-input-and-output-1" href="general-input-and-output.html">3. General input and output</a>
  <ul class="toc">
    <li class=""><a name="toc-Input-structure-1" href="input-structure.html">3.1 Input structure</a>    </li>
    <li class=""><a name="toc-Titles-and-headers-1" href="titles-and-headers.html">3.2 Titles and headers</a>    </li>
    <li class=""><a name="toc-Working-with-input-files-1" href="working-with-input-files.html">3.3 Working with input files</a>    </li>
    <li class=""><a name="toc-Controlling-output-1" href="controlling-output.html">3.4 Controlling output</a>    </li>
    <li class=""><a name="toc-MIDI-output-1" href="midi-output.html">3.5 MIDI output</a>    </li>
    <li class=""><a name="toc-Extracting-musical-information-1" href="extracting-musical-information.html">3.6 Extracting musical information</a>    </li>
  </ul>
  </li>
  <li class=" toc_current"><a name="toc-Spacing-issues-1" href="spacing-issues.html">4. Spacing issues</a>
  <ul class="toc">
    <li class=""><a name="toc-Page-layout-1" href="page-layout.html">4.1 Page layout</a>    </li>
    <li class=""><a name="toc-Score-layout-1" href="score-layout.html">4.2 Score layout</a>    </li>
    <li class=" toc_current"><a name="toc-Breaks-1" href="breaks.html">4.3 Breaks</a>
    <ul class="toc">
      <li class=""><a name="toc-Line-breaking-1" href="line-breaking.html">4.3.1 Line breaking</a>      </li>
      <li class=""><a name="toc-Page-breaking-1" href="page-breaking.html">4.3.2 Page breaking</a>      </li>
      <li class=""><a name="toc-Optimal-page-breaking-1" href="optimal-page-breaking.html">4.3.3 Optimal page breaking</a>      </li>
      <li class=" toc_current"><a name="toc-Optimal-page-turning-1" href="optimal-page-turning.html">4.3.4 Optimal page turning</a>      </li>
      <li class=""><a name="toc-Minimal-page-breaking-1" href="minimal-page-breaking.html">4.3.5 Minimal page breaking</a>      </li>
      <li class=""><a name="toc-One_002dline-page-breaking-1" href="one_002dline-page-breaking.html">4.3.6 One-line page breaking</a>      </li>
      <li class=""><a name="toc-Explicit-breaks-1" href="explicit-breaks.html">4.3.7 Explicit breaks</a>      </li>
      <li class=""><a name="toc-Using-an-extra-voice-for-breaks-1" href="using-an-extra-voice-for-breaks.html">4.3.8 Using an extra voice for breaks</a>      </li>
    </ul>
    </li>
    <li class=""><a name="toc-Vertical-spacing-1" href="vertical-spacing.html">4.4 Vertical spacing</a>    </li>
    <li class=""><a name="toc-Horizontal-spacing-1" href="horizontal-spacing.html">4.5 Horizontal spacing</a>    </li>
    <li class=""><a name="toc-Fitting-music-onto-fewer-pages-1" href="fitting-music-onto-fewer-pages.html">4.6 Fitting music onto fewer pages</a>    </li>
  </ul>
  </li>
  <li class=""><a name="toc-Changing-defaults-1" href="changing-defaults.html">5. Changing defaults</a>
  <ul class="toc">
    <li class=""><a name="toc-Interpretation-contexts-1" href="interpretation-contexts.html">5.1 Interpretation contexts</a>    </li>
    <li class=""><a name="toc-Explaining-the-Internals-Reference-1" href="explaining-the-internals-reference.html">5.2 Explaining the Internals Reference</a>    </li>
    <li class=""><a name="toc-Modifying-properties-1" href="modifying-properties.html">5.3 Modifying properties</a>    </li>
    <li class=""><a name="toc-Useful-concepts-and-properties-1" href="useful-concepts-and-properties.html">5.4 Useful concepts and properties</a>    </li>
    <li class=""><a name="toc-Advanced-tweaks-1" href="advanced-tweaks.html">5.5 Advanced tweaks</a>    </li>
    <li class=""><a name="toc-Using-music-functions-1" href="using-music-functions.html">5.6 Using music functions</a>    </li>
  </ul>
  </li>
  <li class=""><a name="toc-Notation-manual-tables-1" href="notation-manual-tables.html">A. Notation manual tables</a>
  <ul class="toc">
    <li class=""><a name="toc-Chord-name-chart-1" href="chord-name-chart.html">A.1 Chord name chart</a>    </li>
    <li class=""><a name="toc-Common-chord-modifiers-1" href="common-chord-modifiers.html">A.2 Common chord modifiers</a>    </li>
    <li class=""><a name="toc-Predefined-string-tunings-1" href="predefined-string-tunings.html">A.3 Predefined string tunings</a>    </li>
    <li class=""><a name="toc-Predefined-fretboard-diagrams-1" href="predefined-fretboard-diagrams.html">A.4 Predefined fretboard diagrams</a>    </li>
    <li class=""><a name="toc-Predefined-paper-sizes-1" href="predefined-paper-sizes.html">A.5 Predefined paper sizes</a>    </li>
    <li class=""><a name="toc-MIDI-instruments-1" href="midi-instruments.html">A.6 MIDI instruments</a>    </li>
    <li class=""><a name="toc-List-of-colors-1" href="list-of-colors.html">A.7 List of colors</a>    </li>
    <li class=""><a name="toc-The-Feta-font-1" href="the-feta-font.html">A.8 The Feta font</a>    </li>
    <li class=""><a name="toc-Note-head-styles-1" href="note-head-styles.html">A.9 Note head styles</a>    </li>
    <li class=""><a name="toc-Text-markup-commands-1" href="text-markup-commands.html">A.10 Text markup commands</a>    </li>
    <li class=""><a name="toc-Text-markup-list-commands-1" href="text-markup-list-commands.html">A.11 Text markup list commands</a>    </li>
    <li class=""><a name="toc-List-of-special-characters-1" href="list-of-special-characters.html">A.12 List of special characters</a>    </li>
    <li class=""><a name="toc-List-of-articulations-1" href="list-of-articulations.html">A.13 List of articulations</a>    </li>
    <li class=""><a name="toc-Percussion-notes-1" href="percussion-notes.html">A.14 Percussion notes</a>    </li>
    <li class=""><a name="toc-Technical-glossary-1" href="technical-glossary.html">A.15 Technical glossary</a>    </li>
    <li class=""><a name="toc-All-context-properties-1" href="all-context-properties.html">A.16 All context properties</a>    </li>
    <li class=""><a name="toc-Layout-properties-1" href="layout-properties.html">A.17 Layout properties</a>    </li>
    <li class=""><a name="toc-Available-music-functions-1" href="available-music-functions.html">A.18 Available music functions</a>    </li>
    <li class=""><a name="toc-Context-modification-identifiers-1" href="context-modification-identifiers.html">A.19 Context modification identifiers</a>    </li>
    <li class=""><a name="toc-Predefined-type-predicates-1" href="predefined-type-predicates.html">A.20 Predefined type predicates</a>    </li>
    <li class=""><a name="toc-Scheme-functions-1" href="scheme-functions.html">A.21 Scheme functions</a>    </li>
  </ul>
  </li>
  <li class=""><a name="toc-Cheat-sheet-1" href="cheat-sheet.html">B. Cheat sheet</a>  </li>
  <li class=""><a name="toc-LilyPond-grammar-1" href="lilypond-grammar.html">C. LilyPond grammar</a>  </li>
  <li class=""><a name="toc-GNU-Free-Documentation-License-1" href="gnu-free-documentation-license.html">D. GNU Free Documentation License</a>  </li>
  <li class=""><a name="toc-LilyPond-command-index-1" href="lilypond-command-index.html">E. LilyPond command index</a>  </li>
  <li class=""><a name="toc-LilyPond-index-1" href="lilypond-index.html">F. LilyPond index</a>  </li>
<li>
<!--
we depend on an external entity here, which we cannot control.  Suppose
we go from 2.16.x to 2.17.x and put the documentation under "v2.17".
For some time, Google won't have the new location in its index, so the
search would get nothing.  It would be better to keep "v2.16" in the
search for a while and have a redirection from "v2.16" to "v2.17".
-->

<form action="http://google.com/search"
      method="get"
      name="search"
      onSubmit="search.q.value='site:lilypond.org/doc/v2.16 '
		+ search.brute_query.value"
      onMouseMove="search.q.value='site:lilypond.org/doc/v2.16 '
		   + search.brute_query.value"
      onKeyUp="search.q.value='site:lilypond.org/doc/v2.16 '
	       + search.brute_query.value">
  <input type="hidden" name="btnG" value="Google Search">
  <input type="text" name="brute_query" onfocus="this.value=''" value="Search">
  <input type="hidden" name="q" value="">
</form>
</li>
</ul>
</div>
</div>

</body>
</html>
