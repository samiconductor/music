<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Copyright C 1999-2012 by the authors.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.1
or any later version published by the Free Software Foundation;
with no Invariant Sections.
A copy of the license is included in the section entitled "GNU
Free Documentation License".

 -->
<!-- Created on January 1, 2014 by texi2html 1.82
texi2html was written by: 
            Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Many creative people.
Send bugs and suggestions to <texi2html-bug@nongnu.org>
-->
<head>
<title>LilyPond Notation Reference: 1.2.6 Special rhythmic concerns</title>

<meta name="description" content="LilyPond Notation Reference: 1.2.6 Special rhythmic concerns">
<meta name="keywords" content="LilyPond Notation Reference: 1.2.6 Special rhythmic concerns">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2html 1.82">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link href="index.html#index" rel="start" title="LilyPond &mdash; Notation Reference">
<link href="lilypond-command-index.html#lilypond-command-index" rel="index" title="E. LilyPond command index">
<link href="index_toc.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="index_abt.html#SEC_About" rel="help" title="About This Document">
<link href="rhythms.html#rhythms" rel="up" title="1.2 Rhythms">
<link href="lilypond-index.html#lilypond-index" rel="next" title="F. LilyPond index">
<link href="bars.html#bars" rel="previous" title="1.2.5 Bars">
<link rel="stylesheet" type="text/css" title="Default style" href="../../Documentation/css/lilypond-manuals.css">
<!--[if lte IE 7]>
<link href="../../Documentation/css/lilypond-ie-fixes.css" rel="stylesheet" type="text/css">
<![endif]-->


</head>

<body lang="en" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#800080" alink="#FF0000">


<div id="main">
<a name="Special-rhythmic-concerns"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="musical-notation.html" title="Beginning of this chapter or previous chapter"> &lt;&lt; Musical notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="index.html" title="Cover (top) of document" rel="start">Top</a>][<a href="index_toc.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="lilypond-command-index.html" title="Index" rel="index">Index</a>][<a href="index_abt.html#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="specialist-notation.html" title="Next chapter">&nbsp;Specialist notation &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="bars.html#rehearsal-marks" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Rehearsal marks&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="rhythms.html" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Rhythms&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#grace-notes" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Grace notes &gt; </a>]</td></tr></table>
<a name="special-rhythmic-concerns"></a>
<h3 class="subsection">1.2.6 Special rhythmic concerns</h3>


<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#grace-notes" accesskey="1">Grace notes</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#aligning-to-cadenzas" accesskey="2">Aligning to cadenzas</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#time-administration" accesskey="3">Time administration</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr size="6">
<a name="Grace-notes"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="musical-notation.html" title="Beginning of this chapter or previous chapter"> &lt;&lt; Musical notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="index.html" title="Cover (top) of document" rel="start">Top</a>][<a href="index_toc.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="lilypond-command-index.html" title="Index" rel="index">Index</a>][<a href="index_abt.html#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="specialist-notation.html" title="Next chapter">&nbsp;Specialist notation &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#special-rhythmic-concerns" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Special rhythmic concerns&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#special-rhythmic-concerns" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Special rhythmic concerns&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#aligning-to-cadenzas" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Aligning to cadenzas &gt; </a>]</td></tr></table>
<a name="grace-notes"></a>
<h4 class="unnumberedsubsubsec">Grace notes</h4>

<a name="index-ornaments"></a>
<a name="index-grace-notes"></a>
<a name="index-appoggiatura"></a>
<a name="index-acciaccatura"></a>

<a name="index-_005cgrace"></a>
<a name="index-_005cgrace-1"></a>
<a name="index-_005cslashedGrace"></a>
<a name="index-_005cslashedGrace-1"></a>
<a name="index-_005cacciaccatura"></a>
<a name="index-_005cacciaccatura-1"></a>
<a name="index-_005cappoggiatura"></a>
<a name="index-_005cappoggiatura-1"></a>

<p>Grace notes are musical ornaments, printed in a smaller font, that take
up no additional logical time in a measure.
</p>
<blockquote><pre class="verbatim">c4 \grace b16 a4(
\grace { b16[ c16] } a2)
</pre><p>
 <a href="../cb/lily-43911c2b.ly">
  <img align="middle"
       border="0"
       src="../cb/lily-43911c2b.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>There are three other types of grace notes possible; the
<em>acciaccatura</em> &ndash; an unmeasured grace note indicated by a slurred
note with a slashed stem &ndash; and the <em>appoggiatura</em>, which takes a
fixed fraction of the main note it is attached to and prints without the
slash.  It is also possible to write a grace note with a slashed stem,
like the <em>acciaccatura</em> but without the slur, so as to place it
between notes that are slurred themselves, using the
<code>\slashedGrace</code> function.
</p>
<blockquote><pre class="verbatim">\acciaccatura d8 c4
\appoggiatura e8 d4
\acciaccatura { g16[ f] } e2
\slashedGrace a,8 g4
\slashedGrace b16 a4(
\slashedGrace b8 a2)
</pre><p>
 <a href="../62/lily-9826a365.ly">
  <img align="middle"
       border="0"
       src="../62/lily-9826a365.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>The placement of grace notes is synchronized between different staves.
In the following example, there are two sixteenth grace notes for every
eighth grace note
</p>
<blockquote><pre class="verbatim">&lt;&lt;
  \new Staff { e2 \grace { c16[ d e f] } e2 }
  \new Staff { c2 \grace { g8[ b] } c2 }
&gt;&gt;
</pre><p>
 <a href="../c1/lily-baec5116.ly">
  <img align="middle"
       border="0"
       src="../c1/lily-baec5116.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<a name="index-grace-notes_002c-following"></a>

<a name="index-_005cafterGrace"></a>
<a name="index-_005cafterGrace-1"></a>
<a name="index-afterGrace"></a>
<a name="index-afterGrace-1"></a>

<p>If you want to end a note with a grace, use the <code>\afterGrace</code>
command.  It takes two arguments: the main note, and the grace
notes following the main note.
</p>
<blockquote><pre class="verbatim">c1 \afterGrace d1 { c16[ d] } c1
</pre><p>
 <a href="../31/lily-4f6eeeb9.ly">
  <img align="middle"
       border="0"
       src="../31/lily-4f6eeeb9.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>This will put the grace notes after a space lasting 3/4 of the
length of the main note.  The default fraction 3/4 can be changed by
setting <code>afterGraceFraction</code>.  The following example shows
the results from setting the space at the default,  at 15/16, and
finally at 1/2 of the main note.
</p>
<blockquote><pre class="verbatim">&lt;&lt;
  \new Staff {
    c1 \afterGrace d1 { c16[ d] } c1
  }
  \new Staff {
    #(define afterGraceFraction (cons 15 16))
    c1 \afterGrace d1 { c16[ d] } c1
  }
  \new Staff {
    #(define afterGraceFraction (cons 1 2))
    c1 \afterGrace d1 { c16[ d] } c1
  }
&gt;&gt;
</pre><p>
 <a href="../52/lily-a0a25d61.ly">
  <img align="middle"
       border="0"
       src="../52/lily-a0a25d61.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>The space between the main note and the grace note may also be
specified using spacers.  The following example places the grace
note after a space lasting 7/8 of the main note.
</p>
<blockquote><pre class="verbatim">\new Voice {
  &lt;&lt;
    { d1^\trill_( }
    { s2 s4. \grace { c16[ d] } }
  &gt;&gt;
  c1)
}
</pre><p>
 <a href="../b0/lily-48b35706.ly">
  <img align="middle"
       border="0"
       src="../b0/lily-48b35706.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<a name="index-tweaking-grace-notes"></a>
<a name="index-grace-notes_002c-tweaking"></a>
<a name="index-grace-notes_002c-changing-layout-settings"></a>

<p>A <code>\grace</code> music expression will introduce special
typesetting settings, for example, to produce smaller type, and
set directions.  Hence, when introducing layout tweaks to
override the special settings, they should be placed inside
the grace expression.  The overrides should also be reverted
inside the grace expression.  Here, the grace note&rsquo;s default stem
direction is overridden and then reverted.
</p>
<blockquote><pre class="verbatim">\new Voice {
  \acciaccatura {
    \stemDown
    f16-&gt;
    \stemNeutral
  }
  g4 e c2
}
</pre><p>
 <a href="../07/lily-78e7666f.ly">
  <img align="middle"
       border="0"
       src="../07/lily-78e7666f.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>




<a name="index-stem_002c-with-slash"></a>


<a name="Selected-Snippets-10"></a>
<h4 class="subsubheading">Selected Snippets</h4>


<p><em> Using grace note slashes with normal heads</em>
</p>

<p>The slash through the stem found in acciaccaturas can be applied in
other situations.
</p>

<blockquote><pre class="verbatim">\relative c'' {
  \override Flag #'stroke-style = #&quot;grace&quot;
  c8( d2) e8( f4)
}
</pre><p>
 <a href="../86/lily-d968c7b5.ly">
  <img align="middle"
       border="0"
       src="../86/lily-d968c7b5.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>




<p><em> Tweaking grace layout within music</em>
</p>

<p>The layout of grace expressions can be changed throughout the music
using the functions <code>add-grace-property</code> and
<code>remove-grace-property</code>. The following example undefines the
<code>Stem</code> direction for this grace, so that stems do not always point
up, and changes the default note heads to crosses.
</p>

<blockquote><pre class="verbatim">\relative c'' {
  \new Staff {
    $(remove-grace-property 'Voice 'Stem 'direction)
    $(add-grace-property 'Voice 'NoteHead 'style 'cross)
    \new Voice {
       \acciaccatura { f16 } g4
       \grace { d16[ e] } f4
       \appoggiatura { f,32[ g a] } e2
    }
  }
}
</pre><p>
 <a href="../66/lily-9ea346de.ly">
  <img align="middle"
       border="0"
       src="../66/lily-9ea346de.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>




<p><em> Redefining grace note global defaults</em>
</p>

<p>The global defaults for grace notes are stored in the identifiers
<code>startGraceMusic</code>, <code>stopGraceMusic</code>,
<code>startAcciaccaturaMusic</code>, <code>stopAcciaccaturaMusic</code>,
<code>startAppoggiaturaMusic</code> and <code>stopAppoggiaturaMusic</code>, which
are defined in the file <code>ly/grace-init.ly</code>.  By redefining them
other effects may be obtained.
</p>

<blockquote><pre class="verbatim">startAcciaccaturaMusic = {
  &lt;&gt;(
  \override Flag #'stroke-style = #&quot;grace&quot;
  \slurDashed
}

stopAcciaccaturaMusic = {
  \revert Flag #'stroke-style
  \slurSolid
  &lt;&gt;)
}

\relative c'' {
  \acciaccatura d8 c1
}
</pre><p>
 <a href="../55/lily-4f227492.ly">
  <img align="middle"
       border="0"
       src="../55/lily-4f227492.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>




<p><em> Positioning grace notes with floating space</em>
</p>

<p>Setting the property <code>'strict-grace-spacing</code> makes the musical
columns for grace notes &rsquo;floating&rsquo;, i.e., decoupled from the non-grace
notes: first the normal notes are spaced, then the (musical columns of
the) graces are put left of the musical columns for the main notes.
</p>

<blockquote><pre class="verbatim">\relative c'' {
  &lt;&lt;
    \override Score.SpacingSpanner #'strict-grace-spacing = ##t
    \new Staff \new Voice {
      \afterGrace c4 { c16[ c8 c16] }
      c8[ \grace { b16[ d] } c8]
      c4 r
    }
    \new Staff {
      c16 c c c c c c c c4 r
    }
  &gt;&gt;
}
</pre><p>
 <a href="../6c/lily-c9067a74.ly">
  <img align="middle"
       border="0"
       src="../6c/lily-c9067a74.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<a name="See-also-16"></a>
<h4 class="subsubheading">See also</h4>
<p>Music Glossary:
<a name="index-grace-notes-1"></a>
<a href="../music-glossary/grace-notes.html">grace notes</a>,
<a name="index-acciaccatura-1"></a>
<a href="../music-glossary/acciaccatura.html">acciaccatura</a>,
<a name="index-appoggiatura-1"></a>
<a href="../music-glossary/appoggiatura.html">appoggiatura</a>.
</p>
<p>Notation Reference:
<a href="writing-rhythms.html#scaling-durations">Scaling durations</a>,
<a href="beams.html#manual-beams">Manual beams</a>.
</p>
<p>Installed Files:
&lsquo;<tt>ly/grace-init.ly</tt>&rsquo;.
</p>
<p>Snippets:
<a href="../snippets/rhythms.html">Rhythms</a>.
</p>
<p>Internals Reference:
<a name="index-GraceMusic"></a>
<a href="../internals/gracemusic.html">GraceMusic</a>,
<a name="index-Grace_005fbeam_005fengraver"></a>
<a href="../internals/grace_005fbeam_005fengraver.html">Grace_beam_engraver</a>,
<a name="index-Grace_005fengraver"></a>
<a href="../internals/grace_005fengraver.html">Grace_engraver</a>,
<a name="index-Grace_005fspacing_005fengraver"></a>
<a href="../internals/grace_005fspacing_005fengraver.html">Grace_spacing_engraver</a>.
</p>

<a name="Known-issues-and-warnings-68"></a>
<h4 class="subsubheading">Known issues and warnings</h4>
<a name="index-acciaccatura_002c-multi_002dnote"></a>
<a name="index-multi_002dnote-acciaccatura"></a>
<a name="index-grace_002dnote-synchronization"></a>

<p>A multi-note beamed <i>acciaccatura</i> is printed without a slash,
and looks exactly the same as a multi-note beamed
<i>appoggiatura</i>.
</p>

<p>Grace note synchronization can also lead to surprises.  Staff
notation, such as key signatures, bar lines, etc., are also
synchronized.  Take care when you mix staves with grace notes and
staves without, for example,
</p>
<blockquote><pre class="verbatim">&lt;&lt;
  \new Staff { e4 \bar &quot;|:&quot; \grace c16 d2. }
  \new Staff { c4 \bar &quot;|:&quot; d2. }
&gt;&gt;
</pre><p>
 <a href="../2d/lily-7ae0d415.ly">
  <img align="middle"
       border="0"
       src="../2d/lily-7ae0d415.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>This can be remedied by inserting grace skips of the corresponding
durations in the other staves.  For the above example
</p>
<blockquote><pre class="verbatim">&lt;&lt;
  \new Staff { e4 \bar &quot;|:&quot; \grace c16 d2. }
  \new Staff { c4 \bar &quot;|:&quot; \grace s16 d2. }
&gt;&gt;
</pre><p>
 <a href="../7f/lily-1c78cc54.ly">
  <img align="middle"
       border="0"
       src="../7f/lily-1c78cc54.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>The use of grace notes within voice contexts confuses the way the voice
is typeset. This can be overcome by inserting a rest or note between the
voice command and the grace note.
</p>
<blockquote><pre class="verbatim">accMusic = {
  \acciaccatura { f8 } e8 r8 \acciaccatura { f8 } e8 r4
}

\new Staff {
  &lt;&lt;
    \new Voice {
      \relative c'' {
        r8 r8 \voiceOne \accMusic \oneVoice r8 |
        r8 \voiceOne r8 \accMusic \oneVoice r8 |
      }
    }
    \new Voice {
      \relative c' {
        s8 s8 \voiceTwo \accMusic \oneVoice s8 |
        s8 \voiceTwo r8 \accMusic \oneVoice s8 |
      }
    }
  &gt;&gt;
}
</pre><p>
 <a href="../79/lily-a356401f.ly">
  <img align="middle"
       border="0"
       src="../79/lily-a356401f.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>Grace sections should only be used within sequential music expressions.
Nesting or juxtaposing grace sections is not supported, and might
produce crashes or other errors.
</p>
<p>Each grace note in MIDI output has a length of 1/4 of its actual
duration.  If the combined length of the grace notes is greater than the
length of the preceding note a &ldquo;<code>Going back in MIDI time</code>&rdquo;
error will be generated.  Either make the grace notes shorter in
duration, for example:
</p>
<blockquote><pre class="example">\acciaccatura { c'8[ d' e' f' g'] }
</pre></blockquote>

<p>becomes:
</p>
<blockquote><pre class="example">\acciaccatura { c'16[ d' e' f' g'] }
</pre></blockquote>

<p>Or explicitly change the musical duration:
</p>
<blockquote><pre class="example">\acciaccatura { \scaleDurations 1/2 { c'8[ d' e' f' g'] } }
</pre></blockquote>

<p>See <a href="writing-rhythms.html#scaling-durations">Scaling durations</a>.
</p>

<hr size="6">
<a name="Aligning-to-cadenzas"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="musical-notation.html" title="Beginning of this chapter or previous chapter"> &lt;&lt; Musical notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="index.html" title="Cover (top) of document" rel="start">Top</a>][<a href="index_toc.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="lilypond-command-index.html" title="Index" rel="index">Index</a>][<a href="index_abt.html#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="specialist-notation.html" title="Next chapter">&nbsp;Specialist notation &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#grace-notes" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Grace notes&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#special-rhythmic-concerns" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Special rhythmic concerns&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#time-administration" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Time administration &gt; </a>]</td></tr></table>
<a name="aligning-to-cadenzas"></a>
<h4 class="unnumberedsubsubsec">Aligning to cadenzas</h4>

<a name="index-cadenza-2"></a>
<a name="index-cadenza_002c-aligning-to"></a>
<a name="index-aligning-to-cadenza"></a>

<p>In an orchestral context, cadenzas present a special problem: when
constructing a score that includes a measured cadenza or other solo
passage, all other instruments should skip just as many notes as the
length of the cadenza, otherwise they will start too soon or too late.
</p>
<p>One solution to this problem is to use the functions
<code>mmrest-of-length</code> and <code>skip-of-length</code>.  These Scheme
functions take a defined piece of music as an argument and generate a
multi-measure rest or <code>\skip</code> exactly as long as the piece.
</p>
<blockquote><pre class="verbatim">MyCadenza = \relative c' {
  c4 d8 e f g g4
  f2 g4 g
}

\new GrandStaff &lt;&lt;
  \new Staff {
    \MyCadenza c'1
    \MyCadenza c'1
  }
  \new Staff {
    #(mmrest-of-length MyCadenza)
    c'1
    #(skip-of-length MyCadenza)
    c'1
  }
&gt;&gt;
</pre><p>
 <a href="../8d/lily-3750313b.ly">
  <img align="middle"
       border="0"
       src="../8d/lily-3750313b.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<a name="See-also-158"></a>
<h4 class="subsubheading">See also</h4>
<p>Music Glossary:
<a name="index-cadenza-3"></a>
<a href="../music-glossary/cadenza.html">cadenza</a>.
</p>
<p>Snippets:
<a href="../snippets/rhythms.html">Rhythms</a>.
</p>

<hr size="6">
<a name="Time-administration"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="musical-notation.html" title="Beginning of this chapter or previous chapter"> &lt;&lt; Musical notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="index.html" title="Cover (top) of document" rel="start">Top</a>][<a href="index_toc.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="lilypond-command-index.html" title="Index" rel="index">Index</a>][<a href="index_abt.html#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="specialist-notation.html" title="Next chapter">&nbsp;Specialist notation &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#aligning-to-cadenzas" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Aligning to cadenzas&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#special-rhythmic-concerns" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Special rhythmic concerns&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="expressive-marks.html" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Expressive marks &gt; </a>]</td></tr></table>
<a name="time-administration"></a>
<h4 class="unnumberedsubsubsec">Time administration</h4>

<a name="index-time-administration"></a>
<a name="index-timing-_0028within-the-score_0029"></a>
<a name="index-music_002c-unmetered"></a>
<a name="index-unmetered-music-1"></a>

<a name="index-currentBarNumber-2"></a>
<a name="index-currentBarNumber-3"></a>
<a name="index-measurePosition-2"></a>
<a name="index-measurePosition-3"></a>
<a name="index-measureLength-2"></a>
<a name="index-measureLength-3"></a>

<p>Time is administered by the <code>Timing_translator</code>, which by
default is to be found in the <code>Score</code> context.  An alias,
<code>Timing</code>, is added to the context in which the
<code>Timing_translator</code> is placed.  To ensure that the
<code>Timing</code> alias is available, you may need to explicitly
instantiate the containing context (such as <code>Voice</code> or
<code>Staff</code>).
</p>
<p>The following properties of <code>Timing</code> are used
to keep track of timing within the score.
</p>
<a name="index-bar-number"></a>
<a name="index-measure-number"></a>

<dl compact="compact">
<dt> <code>currentBarNumber</code></dt>
<dd><p>The current measure number.  For an example showing the
use of this property see <a href="bars.html#bar-numbers">Bar numbers</a>.
</p>
</dd>
<dt> <code>measureLength</code></dt>
<dd><p>The length of the measures in the current time signature.  For a
4/4 time this is&nbsp;1, and for 6/8 it is 3/4.  Its value
determines when bar lines are inserted and how automatic beams
should be generated.
</p>
</dd>
<dt> <code>measurePosition</code></dt>
<dd><p>The point within the measure where we currently are.  This
quantity is reset by subtracting <code>measureLength</code> whenever
<code>measureLength</code> is reached or exceeded.  When that happens,
<code>currentBarNumber</code> is incremented.
</p>
</dd>
<dt> <code>timing</code></dt>
<dd><p>If set to true, the above variables are updated for every time
step.  When set to false, the engraver stays in the current
measure indefinitely.
</p>
</dd>
</dl>

<p>Timing can be changed by setting any of these variables
explicitly.  In the next example, the default 4/4 time
signature is printed, but <code>measureLength</code> is set to 5/4.
At 4/8 through the third measure, the <code>measurePosition</code> is
advanced by 1/8 to 5/8, shortening that bar by 1/8.
The next bar line then falls at 9/8 rather than 5/4.
</p>
<blockquote><pre class="verbatim">\new Voice \relative c' {
  \set Timing.measureLength = #(ly:make-moment 5 4)
  c1 c4 |
  c1 c4 |
  c4 c
  \set Timing.measurePosition = #(ly:make-moment 5 8)
  b4 b b8 |
  c4 c1 |
}
</pre><p>
 <a href="../1b/lily-5008d6ef.ly">
  <img align="middle"
       border="0"
       src="../1b/lily-5008d6ef.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>As the example illustrates, <code>ly:make-moment n m</code> constructs a
duration of n/m of a whole note.  For example,
<code>ly:make-moment 1 8</code> is an eighth note duration and
<code>ly:make-moment 7 16</code> is the duration of seven sixteenths
notes.
</p>
<a name="See-also-232"></a>
<h4 class="subsubheading">See also</h4>
<p>Notation Reference:
<a href="bars.html#bar-numbers">Bar numbers</a>,
<a href="displaying-rhythms.html#unmetered-music">Unmetered music</a>.
</p>
<p>Snippets:
<a href="../snippets/rhythms.html">Rhythms</a>.
</p>
<p>Internals Reference:
<a name="index-Timing_005ftranslator-4"></a>
<a href="../internals/timing_005ftranslator.html">Timing_translator</a>,
<a name="index-Score"></a>
<a href="../internals/score.html">Score</a>.
</p>

<hr size="6">
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="musical-notation.html" title="Beginning of this chapter or previous chapter"> &lt;&lt; Musical notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="index.html" title="Cover (top) of document" rel="start">Top</a>][<a href="index_toc.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="lilypond-command-index.html" title="Index" rel="index">Index</a>][<a href="index_abt.html#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="specialist-notation.html" title="Next chapter">&nbsp;Specialist notation &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#aligning-to-cadenzas" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Aligning to cadenzas&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#special-rhythmic-concerns" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Special rhythmic concerns&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="expressive-marks.html" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Expressive marks &gt; </a>]</td></tr></table>
<!-- footer_tag -->
<div class="footer">
<!-- This footer was autogenerated by /build/buildd/lilypond-2.16.2/scripts/build/out/www_post -->
<p class="footer_version">
This page is for LilyPond-2.16.2 (stable-branch).
</p>
<p class="footer_report">
We welcome your aid; please <a href="http://lilypond.org/help-us.html">help us</a> by reporting errors to our <a href="http://post.gmane.org/post.php?group=gmane.comp.gnu.lilypond.bugs">bug list</a>.
</p>
</div>


<p id="languages">
<!-- These links were autogenerated by /build/buildd/lilypond-2.16.2/scripts/build/out/www_post -->
 Other languages: <a href="special-rhythmic-concerns.de.html">deutsch</a>, <a href="special-rhythmic-concerns.es.html">español</a>, <a href="special-rhythmic-concerns.fr.html">français</a>, <a href="special-rhythmic-concerns.it.html">italiano</a>, <a href="special-rhythmic-concerns.ja.html">日本語</a>.
 <br>
 About <a href="http://www.lilypond.org/website/misc/browser-language">automatic language selection</a>.
</p>

<!-- FOOTER -->

<!-- end div#main here -->
</div>



<div id="tocframe">
<p class="toc_uplink"><a href="../../Documentation/web/manuals.html"
         title="Documentation Index">&lt;&lt; Back to Documentation Index</a></p>
<h4 class="toc_header"> <a href="index.html" title="Start of the manual">LilyPond &mdash; Notation Reference</a></h4>
<div class="contents">
<ul class="toc">
  <li class=" toc_current"><a name="toc-Musical-notation-1" href="musical-notation.html">1. Musical notation</a>
  <ul class="toc">
    <li class=""><a name="toc-Pitches-1" href="pitches.html">1.1 Pitches</a>    </li>
    <li class=" toc_current"><a name="toc-Rhythms-1" href="rhythms.html">1.2 Rhythms</a>
    <ul class="toc">
      <li class=""><a name="toc-Writing-rhythms-1" href="writing-rhythms.html">1.2.1 Writing rhythms</a>      </li>
      <li class=""><a name="toc-Writing-rests-1" href="writing-rests.html">1.2.2 Writing rests</a>      </li>
      <li class=""><a name="toc-Displaying-rhythms-1" href="displaying-rhythms.html">1.2.3 Displaying rhythms</a>      </li>
      <li class=""><a name="toc-Beams-1" href="beams.html">1.2.4 Beams</a>      </li>
      <li class=""><a name="toc-Bars-1" href="bars.html">1.2.5 Bars</a>      </li>
      <li class=" toc_current"><a name="toc-Special-rhythmic-concerns-1" href="special-rhythmic-concerns.html">1.2.6 Special rhythmic concerns</a>
      <ul class="toc">
        <li class=""><a name="toc-Grace-notes-1" href="special-rhythmic-concerns.html#grace-notes">Grace notes</a>        </li>
        <li class=""><a name="toc-Aligning-to-cadenzas-1" href="special-rhythmic-concerns.html#aligning-to-cadenzas">Aligning to cadenzas</a>        </li>
        <li class=""><a name="toc-Time-administration-1" href="special-rhythmic-concerns.html#time-administration">Time administration</a>        </li>
      </ul>
      </li>
    </ul>
    </li>
    <li class=""><a name="toc-Expressive-marks-1" href="expressive-marks.html">1.3 Expressive marks</a>    </li>
    <li class=""><a name="toc-Repeats-1" href="repeats.html">1.4 Repeats</a>    </li>
    <li class=""><a name="toc-Simultaneous-notes-1" href="simultaneous-notes.html">1.5 Simultaneous notes</a>    </li>
    <li class=""><a name="toc-Staff-notation-1" href="staff-notation.html">1.6 Staff notation</a>    </li>
    <li class=""><a name="toc-Editorial-annotations-1" href="editorial-annotations.html">1.7 Editorial annotations</a>    </li>
    <li class=""><a name="toc-Text-1" href="text.html">1.8 Text</a>    </li>
  </ul>
  </li>
  <li class=""><a name="toc-Specialist-notation-1" href="specialist-notation.html">2. Specialist notation</a>
  <ul class="toc">
    <li class=""><a name="toc-Vocal-music-1" href="vocal-music.html">2.1 Vocal music</a>    </li>
    <li class=""><a name="toc-Keyboard-and-other-multi_002dstaff-instruments-1" href="keyboard-and-other-multi_002dstaff-instruments.html">2.2 Keyboard and other multi-staff instruments</a>    </li>
    <li class=""><a name="toc-Unfretted-string-instruments-1" href="unfretted-string-instruments.html">2.3 Unfretted string instruments</a>    </li>
    <li class=""><a name="toc-Fretted-string-instruments-1" href="fretted-string-instruments.html">2.4 Fretted string instruments</a>    </li>
    <li class=""><a name="toc-Percussion-1" href="percussion.html">2.5 Percussion</a>    </li>
    <li class=""><a name="toc-Wind-instruments-1" href="wind-instruments.html">2.6 Wind instruments</a>    </li>
    <li class=""><a name="toc-Chord-notation-1" href="chord-notation.html">2.7 Chord notation</a>    </li>
    <li class=""><a name="toc-Contemporary-music-1" href="contemporary-music.html">2.8 Contemporary music</a>    </li>
    <li class=""><a name="toc-Ancient-notation-1" href="ancient-notation.html">2.9 Ancient notation</a>    </li>
    <li class=""><a name="toc-World-music-1" href="world-music.html">2.10 World music</a>    </li>
  </ul>
  </li>
  <li class=""><a name="toc-General-input-and-output-1" href="general-input-and-output.html">3. General input and output</a>
  <ul class="toc">
    <li class=""><a name="toc-Input-structure-1" href="input-structure.html">3.1 Input structure</a>    </li>
    <li class=""><a name="toc-Titles-and-headers-1" href="titles-and-headers.html">3.2 Titles and headers</a>    </li>
    <li class=""><a name="toc-Working-with-input-files-1" href="working-with-input-files.html">3.3 Working with input files</a>    </li>
    <li class=""><a name="toc-Controlling-output-1" href="controlling-output.html">3.4 Controlling output</a>    </li>
    <li class=""><a name="toc-MIDI-output-1" href="midi-output.html">3.5 MIDI output</a>    </li>
    <li class=""><a name="toc-Extracting-musical-information-1" href="extracting-musical-information.html">3.6 Extracting musical information</a>    </li>
  </ul>
  </li>
  <li class=""><a name="toc-Spacing-issues-1" href="spacing-issues.html">4. Spacing issues</a>
  <ul class="toc">
    <li class=""><a name="toc-Page-layout-1" href="page-layout.html">4.1 Page layout</a>    </li>
    <li class=""><a name="toc-Score-layout-1" href="score-layout.html">4.2 Score layout</a>    </li>
    <li class=""><a name="toc-Breaks-1" href="breaks.html">4.3 Breaks</a>    </li>
    <li class=""><a name="toc-Vertical-spacing-1" href="vertical-spacing.html">4.4 Vertical spacing</a>    </li>
    <li class=""><a name="toc-Horizontal-spacing-1" href="horizontal-spacing.html">4.5 Horizontal spacing</a>    </li>
    <li class=""><a name="toc-Fitting-music-onto-fewer-pages-1" href="fitting-music-onto-fewer-pages.html">4.6 Fitting music onto fewer pages</a>    </li>
  </ul>
  </li>
  <li class=""><a name="toc-Changing-defaults-1" href="changing-defaults.html">5. Changing defaults</a>
  <ul class="toc">
    <li class=""><a name="toc-Interpretation-contexts-1" href="interpretation-contexts.html">5.1 Interpretation contexts</a>    </li>
    <li class=""><a name="toc-Explaining-the-Internals-Reference-1" href="explaining-the-internals-reference.html">5.2 Explaining the Internals Reference</a>    </li>
    <li class=""><a name="toc-Modifying-properties-1" href="modifying-properties.html">5.3 Modifying properties</a>    </li>
    <li class=""><a name="toc-Useful-concepts-and-properties-1" href="useful-concepts-and-properties.html">5.4 Useful concepts and properties</a>    </li>
    <li class=""><a name="toc-Advanced-tweaks-1" href="advanced-tweaks.html">5.5 Advanced tweaks</a>    </li>
    <li class=""><a name="toc-Using-music-functions-1" href="using-music-functions.html">5.6 Using music functions</a>    </li>
  </ul>
  </li>
  <li class=""><a name="toc-Notation-manual-tables-1" href="notation-manual-tables.html">A. Notation manual tables</a>
  <ul class="toc">
    <li class=""><a name="toc-Chord-name-chart-1" href="chord-name-chart.html">A.1 Chord name chart</a>    </li>
    <li class=""><a name="toc-Common-chord-modifiers-1" href="common-chord-modifiers.html">A.2 Common chord modifiers</a>    </li>
    <li class=""><a name="toc-Predefined-string-tunings-1" href="predefined-string-tunings.html">A.3 Predefined string tunings</a>    </li>
    <li class=""><a name="toc-Predefined-fretboard-diagrams-1" href="predefined-fretboard-diagrams.html">A.4 Predefined fretboard diagrams</a>    </li>
    <li class=""><a name="toc-Predefined-paper-sizes-1" href="predefined-paper-sizes.html">A.5 Predefined paper sizes</a>    </li>
    <li class=""><a name="toc-MIDI-instruments-1" href="midi-instruments.html">A.6 MIDI instruments</a>    </li>
    <li class=""><a name="toc-List-of-colors-1" href="list-of-colors.html">A.7 List of colors</a>    </li>
    <li class=""><a name="toc-The-Feta-font-1" href="the-feta-font.html">A.8 The Feta font</a>    </li>
    <li class=""><a name="toc-Note-head-styles-1" href="note-head-styles.html">A.9 Note head styles</a>    </li>
    <li class=""><a name="toc-Text-markup-commands-1" href="text-markup-commands.html">A.10 Text markup commands</a>    </li>
    <li class=""><a name="toc-Text-markup-list-commands-1" href="text-markup-list-commands.html">A.11 Text markup list commands</a>    </li>
    <li class=""><a name="toc-List-of-special-characters-1" href="list-of-special-characters.html">A.12 List of special characters</a>    </li>
    <li class=""><a name="toc-List-of-articulations-1" href="list-of-articulations.html">A.13 List of articulations</a>    </li>
    <li class=""><a name="toc-Percussion-notes-1" href="percussion-notes.html">A.14 Percussion notes</a>    </li>
    <li class=""><a name="toc-Technical-glossary-1" href="technical-glossary.html">A.15 Technical glossary</a>    </li>
    <li class=""><a name="toc-All-context-properties-1" href="all-context-properties.html">A.16 All context properties</a>    </li>
    <li class=""><a name="toc-Layout-properties-1" href="layout-properties.html">A.17 Layout properties</a>    </li>
    <li class=""><a name="toc-Available-music-functions-1" href="available-music-functions.html">A.18 Available music functions</a>    </li>
    <li class=""><a name="toc-Context-modification-identifiers-1" href="context-modification-identifiers.html">A.19 Context modification identifiers</a>    </li>
    <li class=""><a name="toc-Predefined-type-predicates-1" href="predefined-type-predicates.html">A.20 Predefined type predicates</a>    </li>
    <li class=""><a name="toc-Scheme-functions-1" href="scheme-functions.html">A.21 Scheme functions</a>    </li>
  </ul>
  </li>
  <li class=""><a name="toc-Cheat-sheet-1" href="cheat-sheet.html">B. Cheat sheet</a>  </li>
  <li class=""><a name="toc-LilyPond-grammar-1" href="lilypond-grammar.html">C. LilyPond grammar</a>  </li>
  <li class=""><a name="toc-GNU-Free-Documentation-License-1" href="gnu-free-documentation-license.html">D. GNU Free Documentation License</a>  </li>
  <li class=""><a name="toc-LilyPond-command-index-1" href="lilypond-command-index.html">E. LilyPond command index</a>  </li>
  <li class=""><a name="toc-LilyPond-index-1" href="lilypond-index.html">F. LilyPond index</a>  </li>
<li>
<!--
we depend on an external entity here, which we cannot control.  Suppose
we go from 2.16.x to 2.17.x and put the documentation under "v2.17".
For some time, Google won't have the new location in its index, so the
search would get nothing.  It would be better to keep "v2.16" in the
search for a while and have a redirection from "v2.16" to "v2.17".
-->

<form action="http://google.com/search"
      method="get"
      name="search"
      onSubmit="search.q.value='site:lilypond.org/doc/v2.16 '
		+ search.brute_query.value"
      onMouseMove="search.q.value='site:lilypond.org/doc/v2.16 '
		   + search.brute_query.value"
      onKeyUp="search.q.value='site:lilypond.org/doc/v2.16 '
	       + search.brute_query.value">
  <input type="hidden" name="btnG" value="Google Search">
  <input type="text" name="brute_query" onfocus="this.value=''" value="Search">
  <input type="hidden" name="q" value="">
</form>
</li>
</ul>
</div>
</div>

</body>
</html>
