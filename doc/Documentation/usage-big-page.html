<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Copyright C 1999-2012 by the authors.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.1
or any later version published by the Free Software Foundation;
with no Invariant Sections.
A copy of the license is included in the section entitled "GNU
Free Documentation License".

 -->
<!-- Created on January 1, 2014 by texi2html 1.82
texi2html was written by: 
            Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Many creative people.
Send bugs and suggestions to <texi2html-bug@nongnu.org>
-->
<head>
<title>LilyPond Application Usage</title>

<meta name="description" content="LilyPond Application Usage">
<meta name="keywords" content="LilyPond Application Usage">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2html 1.82">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link href="#index" rel="start" title="LilyPond &mdash; Usage">
<link href="#lilypond-index" rel="index" title="B. LilyPond index">
<link href="#SEC_Contents" rel="contents" title="Table of Contents">
<link href="#SEC_About" rel="help" title="About This Document">
<link rel="stylesheet" type="text/css" title="Default style" href="../Documentation/css/lilypond-manuals.css">
<!--[if lte IE 7]>
<link href="../Documentation/css/lilypond-ie-fixes.css" rel="stylesheet" type="text/css">
<![endif]-->


</head>

<body lang="en" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#800080" alink="#FF0000">


<div id="main">
<a name="Top"></a>
<table class="nav_table">
<tr><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td></tr></table>
<a name="index"></a>
<h1 class="settitle">LilyPond &mdash; Usage</h1>

<table class="cartouche" border="1"><tr><td>
<p>This file explains how to execute the programs distributed with
LilyPond version 2.16.2.  In addition, it suggests some
&ldquo;best practices&rdquo; for efficient usage.
</p></td></tr></table>







<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#running-lilypond" accesskey="1">1. Running <code>lilypond</code></a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">               Operation.
</td></tr>
<tr><td align="left" valign="top"><a href="#updating-files-with-convert_002dly" accesskey="2">2. Updating files with <code>convert-ly</code></a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"> Updating input files.
</td></tr>
<tr><td align="left" valign="top"><a href="#lilypond_002dbook" accesskey="3">3. Running <code>lilypond-book</code></a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                  Integrating text and music.
</td></tr>
<tr><td align="left" valign="top"><a href="#external-programs" accesskey="4">4. External programs</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">              Mixing LilyPond and other programs.
</td></tr>
<tr><td align="left" valign="top"><a href="#suggestions-for-writing-files" accesskey="5">5. Suggestions for writing files</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">  Best practices and effective bug-fixing.
</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">
Appendices

</pre></th></tr><tr><td align="left" valign="top"><a href="#gnu-free-documentation-license" accesskey="6">A. GNU Free Documentation License</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"> License of this document.
</td></tr>
<tr><td align="left" valign="top"><a href="#lilypond-index" accesskey="7">B. LilyPond index</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<table class="cartouche" border="1"><tr><td>
<p>For more information about how this manual fits with the other
documentation, or to read this manual in other formats, see
<a name="index-Manuals"></a>
<a href="web-big-page.html#manuals">Manuals</a>.
</p>
<p>If you are missing any manuals, the complete documentation can be
found at <a href="http://www.lilypond.org">http://www.lilypond.org/</a>.
</p></td></tr></table>









<hr size="1">
<a name="Running-lilypond"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#index" title="Beginning of this chapter or previous chapter"> &lt;&lt; Top&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#updating-files-with-convert_002dly" title="Next chapter">&nbsp;Updating files with convert-ly &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#index" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Top&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#index" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Top&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#normal-usage" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Normal usage &gt; </a>]</td></tr></table>
<a name="running-lilypond"></a>
<h1 class="chapter">1. Running <code>lilypond</code></h1>

<p>This chapter details the technicalities of running LilyPond.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#normal-usage" accesskey="1">1.1 Normal usage</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#command_002dline-usage" accesskey="2">1.2 Command-line usage</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#error-messages" accesskey="3">1.3 Error messages</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#common-errors" accesskey="4">1.4 Common errors</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>


<hr size="6">
<a name="Normal-usage"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#running-lilypond" title="Beginning of this chapter or previous chapter"> &lt;&lt; Running lilypond&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#updating-files-with-convert_002dly" title="Next chapter">&nbsp;Updating files with convert-ly &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#running-lilypond" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Running lilypond&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#running-lilypond" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Running lilypond&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#command_002dline-usage" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Command-line usage &gt; </a>]</td></tr></table>
<a name="normal-usage"></a>
<h2 class="section">1.1 Normal usage</h2>

<p>Most users run LilyPond through a GUI; if you have not done so
already, please read the <a name="index-Tutorial"></a>
<a href="learning-big-page.html#tutorial">Tutorial</a>.  If you use an alternate
editor to write lilypond files, see the documentation for that
program.
</p>

<hr size="6">
<a name="Command_002dline-usage"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#running-lilypond" title="Beginning of this chapter or previous chapter"> &lt;&lt; Running lilypond&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#updating-files-with-convert_002dly" title="Next chapter">&nbsp;Updating files with convert-ly &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#normal-usage" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Normal usage&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#running-lilypond" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Running lilypond&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#invoking-lilypond" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Invoking lilypond &gt; </a>]</td></tr></table>
<a name="command_002dline-usage"></a>
<h2 class="section">1.2 Command-line usage</h2>

<p>This section contains extra information about using LilyPond on the
command-line.  This may be desirable to pass extra options to the
program.  In addition, there are certain extra &lsquo;helper&rsquo; programs (such
as <code>midi2ly</code>) which are only available on the command-line.
</p>
<p>By &lsquo;command-line&rsquo;, we mean the command line in the operating system.
Windows users might be more familiar with the terms &lsquo;DOS shell&rsquo; or
&lsquo;command shell&rsquo;.  MacOS&nbsp;X users might be more familiar with the terms
&lsquo;terminal&rsquo; or &lsquo;console&rsquo;.  Some additional setup is required
for MacOS&nbsp;X users; please see <a name="index-MacOS-X"></a>
<a href="web-big-page.html#macos-x">MacOS X</a>.
</p>
<p>Describing how to use this part of an operating system is outside the
scope of this manual; please consult other documentation on this topic
if you are unfamiliar with the command-line.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#invoking-lilypond" accesskey="1">Invoking <code>lilypond</code></a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#basic-command-line-options-for-lilypond" accesskey="2">Basic command line options for LilyPond</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#advanced-command-line-options-for-lilypond" accesskey="3">Advanced command line options for LilyPond</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#environment-variables" accesskey="4">Environment variables</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#lilypond-in-chroot-jail" accesskey="5">LilyPond in chroot jail</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr size="6">
<a name="Invoking-lilypond"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#running-lilypond" title="Beginning of this chapter or previous chapter"> &lt;&lt; Running lilypond&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#updating-files-with-convert_002dly" title="Next chapter">&nbsp;Updating files with convert-ly &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#command_002dline-usage" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Command-line usage&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#command_002dline-usage" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Command-line usage&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#invoking-lilypond" title="Next section in reading order" accesskey="n" rel="next">&nbsp; &gt; </a>]</td></tr></table>
<a name="invoking-lilypond"></a>
<h3 class="unnumberedsubsec">Invoking <code>lilypond</code></h3>

<p>The <code>lilypond</code> executable may be called as follows from
the command line.
</p>
<blockquote><pre class="example">lilypond [<var>option</var>]&hellip; <var>file</var>&hellip;
</pre></blockquote>


<p>When invoked with a filename that has no extension, the &lsquo;<tt>.ly</tt>&rsquo;
extension is tried first.  To read input from stdin, use a
dash (<code>-</code>) for <var>file</var>.
</p>
<p>When &lsquo;<tt>filename.ly</tt>&rsquo; is processed it will produce &lsquo;<tt>filename.ps</tt>&rsquo;
and &lsquo;<tt>filename.pdf</tt>&rsquo; as output.  Several files can be specified;
they will each be processed independently.  <sup><a name="DOCF1" href="#FOOT1">1</a></sup>
</p>
<p>If &lsquo;<tt>filename.ly</tt>&rsquo; contains more than one <code>\book</code>
block, then the rest of the scores will be output in numbered files,
starting with &lsquo;<tt>filename-1.pdf</tt>&rsquo;.  In addition, the value of
<code>output-suffix</code> will be inserted between the basename and the
number.  An input file containing
</p>
<blockquote><pre class="example">#(define output-suffix &quot;violin&quot;)
\score { &hellip; }
#(define output-suffix &quot;cello&quot;)
\score { &hellip; }
</pre></blockquote>

<p>will output <var>base</var>&lsquo;<tt>-violin.pdf</tt>&rsquo; and
<var>base</var>&lsquo;<tt>-cello-1.pdf</tt>&rsquo;.
</p>

<hr size="6">
<a name="invoking-lilypond"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#running-lilypond" title="Beginning of this chapter or previous chapter"> &lt;&lt; Running lilypond&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#updating-files-with-convert_002dly" title="Next chapter">&nbsp;Updating files with convert-ly &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#invoking-lilypond" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Invoking lilypond&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#invoking-lilypond" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Invoking lilypond&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#basic-command-line-options-for-lilypond" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Basic command line options for LilyPond &gt; </a>]</td></tr></table>
<h4 class="unnumberedsubsubsec">Standard shell commands</h4>

<p>If your shell (i.e. command window) supports normal redirects,
then you might find it useful to use the following commands to
redirect console output to a file:
</p>
<ul>
<li>
<code>lilypond file.ly 1&gt;stdout.log</code> to redirect normal output

</li><li>
<code>lilypond file.ly 2&gt;stderr.log</code> to redirect error messages

</li><li>
<code>lilypond file.ly &amp;&gt;all.log</code> to redirect all output

</li></ul>

<p>Consult the documentation for your shell to see if it supports these
options, or if the syntax is different.  Note that these are shell
commands and have nothing to do with lilypond.
</p>

<hr size="6">
<a name="Basic-command-line-options-for-LilyPond"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#running-lilypond" title="Beginning of this chapter or previous chapter"> &lt;&lt; Running lilypond&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#updating-files-with-convert_002dly" title="Next chapter">&nbsp;Updating files with convert-ly &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#invoking-lilypond" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; &nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#command_002dline-usage" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Command-line usage&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#advanced-command-line-options-for-lilypond" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Advanced command line options for LilyPond &gt; </a>]</td></tr></table>
<a name="basic-command-line-options-for-lilypond"></a>
<h3 class="unnumberedsubsec">Basic command line options for LilyPond</h3>

<a name="index-Invoking-lilypond"></a>
<a name="index-command-line-options-for-lilypond"></a>
<a name="index-options_002c-command-line"></a>
<a name="index-switches"></a>

<p>The following options are supported:
</p>
<dl compact="compact">
<dt> <code>-d,--define-default=<var>var</var>=<var>val</var></code></dt>
<dd><p>See <a href="#advanced-command-line-options-for-lilypond">Advanced command line options for LilyPond</a>.
</p>
<a name="index-Scheme_002c-expression-evaluation"></a>
<a name="index-expression-evaluation_002c-Scheme"></a>

</dd>
<dt> <code>-e,--evaluate=<var>expr</var></code></dt>
<dd><p>Evaluate the Scheme <var>expr</var> before parsing any &lsquo;<tt>.ly</tt>&rsquo; files.
Multiple &lsquo;<samp>-e</samp>&rsquo; options may be given, they will be evaluated
sequentially.
</p>
<p>The expression will be evaluated in the <code>guile-user</code> module, so
if you want to use definitions in <var>expr</var>, use
</p>
<blockquote><pre class="example">lilypond -e '(define-public a 42)'
</pre></blockquote>

<p>on the command-line, and include
</p>
<blockquote><pre class="example">#(use-modules (guile-user))
</pre></blockquote>

<p>at the top of the <code>.ly</code> file.
</p>
<div class="warning"><p><strong>Note:</strong> Windows users must use double quotes instead of single quotes.
</p>
</div>
<a name="index-output_002c-format"></a>
<a name="index-format_002c-output"></a>

</dd>
<dt> <code>-f,--format=<var>format</var></code></dt>
<dd><p>which formats should be written.  Choices for <code>format</code> are
<code>ps</code>, <code>pdf</code>, and <code>png</code>.
</p>
<p>Example: <code>lilypond -fpng <var>filename</var>.ly</code>
</p>
</dd>
<dt> <code>-h,--help</code></dt>
<dd><p>Show a summary of usage.
</p>
</dd>
<dt> <code>-H,--header=<var>FIELD</var></code></dt>
<dd><p>Dump a header field to file &lsquo;<tt>BASENAME.<var>FIELD</var></tt>&rsquo;.
</p>
</dd>
<dt> <code>-i,--init=<var>file</var></code></dt>
<dd><p>Set init file to <var>file</var> (default: &lsquo;<tt>init.ly</tt>&rsquo;).
</p>
<a name="index-file-searching"></a>
<a name="index-search-path"></a>

</dd>
<dt> <code>-I, --include=<var>directory</var></code></dt>
<dd><p>Add <var>directory</var> to the search path for input files.
</p>
<p>Multiple -I options may be given.  The search will start in the first
defined directory, and if the file to be included is not found the
search will continue in subsequent directories.
</p>
<a name="index-chroot-jail_002c-running-inside"></a>

</dd>
<dt> <code>-j,--jail=<var>user</var>,<var>group</var>,<var>jail</var>,<var>dir</var></code></dt>
<dd><p>Run <code>lilypond</code> in a chroot jail.
</p>
<p>The &lsquo;<samp>--jail</samp>&rsquo; option provides a more flexible alternative to
&lsquo;<samp>-dsafe</samp>&rsquo;, when LilyPond formatting is being provided via a web
server, or whenever LilyPond executes commands sent by external sources
(see <a href="#advanced-command-line-options-for-lilypond">Advanced command line options for LilyPond</a>).
</p>
<p>It works by changing the root of <code>lilypond</code> to <var>jail</var> just
before starting the actual compilation process.  The user and group are
then changed to match those provided, and the current directory is
changed to <var>dir</var>.  This setup guarantees that it is not possible (at
least in theory) to escape from the jail.  Note that for &lsquo;<samp>--jail</samp>&rsquo;
to work, <code>lilypond</code> must be run as root, which is usually
accomplished in a safe way using <code>sudo</code>.
</p>
<p>Setting up a jail can be a relatively complex matter, as we must be sure
that LilyPond is able to find whatever it needs to compile the source
<em>inside</em> the jail itself.  A typical chroot jail will comprise the
following steps:
</p>
<dl compact="compact">
<dt> Setting up a separate filesystem</dt>
<dd><p>A separate filesystem should be created for LilyPond, so that it can be
mounted with safe options such as <code>noexec</code>, <code>nodev</code>, and
<code>nosuid</code>.  In this way, it is impossible to run executables or to
write directly to a device from LilyPond.  If you do not want to create a
separate partition, just create a file of reasonable size and use it to
mount a loop device.  A separate filesystem also guarantees that LilyPond
cannot write more space than it is allowed.
</p>
</dd>
<dt> Setting up a separate user</dt>
<dd><p>A separate user and group (say, <code>lily</code>/<code>lily</code>) with low
privileges should be used to run LilyPond inside the jail.  There should
be a single directory writable by this user, which should be passed in
<var>dir</var>.
</p>
</dd>
<dt> Preparing the jail</dt>
<dd><p>LilyPond needs to read a number of files while running.  All these files
are to be copied into the jail, under the same path they appear in the
real root filesystem.  The entire content of the LilyPond installation
(e.g., &lsquo;<tt>/usr/share/lilypond</tt>&rsquo;) should be copied.
</p>
<p>If problems arise, the simplest way to trace them down is to run
LilyPond using <code>strace</code>, which will allow you to determine which
files are missing.
</p>
</dd>
<dt> Running LilyPond</dt>
<dd><p>In a jail mounted with <code>noexec</code> it is impossible to execute any
external program.  Therefore LilyPond must be run with a backend that
does not require any such program.  As we have already mentioned, it
must be run with superuser privileges (which, of course, it will lose
immediately), possibly using <code>sudo</code>.  It is also good practice
to limit the number of seconds of CPU time LilyPond can use (e.g., using
<code>ulimit&nbsp;-t</code>), and, if your operating system supports it,
the amount of memory that can be allocated.  Also see
<a href="#lilypond-in-chroot-jail">LilyPond in chroot jail</a>.
</p></dd>
</dl>

<a name="index-loglevel"></a>
<a name="index-output_002c-verbosity"></a>

</dd>
<dt> <code>-l,--loglevel=<var>LEVEL</var></code></dt>
<dd><p>Set the verbosity of the console output to <var>LEVEL</var>. Possible values
are:
</p>
<dl compact="compact">
<dt> <code>NONE</code></dt>
<dd><p>No output at all, not even error messages.
</p>
</dd>
<dt> <code>ERROR</code></dt>
<dd><p>Only error messages, no warnings or progress messages.
</p>
</dd>
<dt> <code>WARN</code></dt>
<dd><p>Warnings and error messages, no progress.
</p>
</dd>
<dt> <code>BASIC_PROGRESS</code></dt>
<dd><p>Basic progress messages (success), warnings and errors.
</p>
</dd>
<dt> <code>PROGRESS</code></dt>
<dd><p>All progress messages, warnings and errors.
</p>
</dd>
<dt> <code>INFO (default)</code></dt>
<dd><p>Progress messages, warnings, errors and further execution information.
</p>
</dd>
<dt> <code>DEBUG</code></dt>
<dd><p>All possible messages, including verbose debug output.
</p>
</dd>
</dl>

<a name="index-directory_002c-redirect-output"></a>
<a name="index-output_002c-setting-filename"></a>
<a name="index-output_002c-directory"></a>

</dd>
<dt> <code>-o,--output=<var>FILE</var> or <var>FOLDER</var></code></dt>
<dd><p>Set the default output file to <var>FILE</var> or, if a folder with that name
exists, direct the output to <var>FOLDER</var>, taking the file name from the
input file.  The appropriate suffix will be added (e.g. <code>.pdf</code> for
pdf) in both cases.
</p>
<a name="index-PS-_0028Postscript_0029_002c-output"></a>
<a name="index-Postscript-_0028PS_0029_002c-output"></a>
<a name="index-output_002c-PS-_0028Postscript_0029"></a>

</dd>
<dt> <code>--ps</code></dt>
<dd><p>Generate PostScript.
</p>
<a name="index-PNG-_0028Portable-Network-Graphics_0029_002c-output"></a>
<a name="index-output_002c-PNG-_0028Portable-Network-Graphics_0029"></a>

</dd>
<dt> <code>--png</code></dt>
<dd><p>Generate pictures of each page, in PNG format.  This implies
&lsquo;<samp>--ps</samp>&rsquo;.  The resolution in DPI of the image may be set with
</p><blockquote><pre class="example">-dresolution=110
</pre></blockquote>

<a name="index-PDF-_0028Portable-Document-Format_0029_002c-output"></a>
<a name="index-output_002c-PDF-_0028Portable-Document-Format_0029"></a>

</dd>
<dt> <code>--pdf</code></dt>
<dd><p>Generate PDF.  This implies &lsquo;<samp>--ps</samp>&rsquo;.
</p>
</dd>
<dt> <code>-v,--version</code></dt>
<dd><p>Show version information.
</p>
</dd>
<dt> <code>-V,--verbose</code></dt>
<dd><p>Be verbose: show full paths of all files read, and give timing
information.
</p>
</dd>
<dt> <code>-w,--warranty</code></dt>
<dd><p>Show the warranty with which GNU LilyPond comes.  (It comes with
<strong>NO WARRANTY</strong>!)
</p>
</dd>
</dl>


<hr size="6">
<a name="Advanced-command-line-options-for-LilyPond"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#running-lilypond" title="Beginning of this chapter or previous chapter"> &lt;&lt; Running lilypond&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#updating-files-with-convert_002dly" title="Next chapter">&nbsp;Updating files with convert-ly &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#basic-command-line-options-for-lilypond" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Basic command line options for LilyPond&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#command_002dline-usage" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Command-line usage&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#environment-variables" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Environment variables &gt; </a>]</td></tr></table>
<a name="advanced-command-line-options-for-lilypond"></a>
<h3 class="unnumberedsubsec">Advanced command line options for LilyPond</h3>

<dl compact="compact">
<dt> <code>-d<var>[option-name]</var>=<var>[value]</var>,--define-default=<var>[option-name]</var>=<var>[value]</var></code></dt>
<dd><p>This sets the equivalent internal Scheme function to <var>value</var>.  If a
<var>value</var> is not supplied, then the default value is used.  The prefix
<code>no-</code> may be added to <var>option-name</var> to switch &lsquo;off&rsquo; an
option, e.g.
</p>
<a name="index-point-and-click_002c-command-line"></a>

<blockquote><pre class="example">-dpoint-and-click=#f
</pre></blockquote>

<p>is the same as
</p><blockquote><pre class="example">-dno-point-and-click
</pre></blockquote>
</dd>
</dl>

<p>The following are supported along with their respective
default values:
</p>
<table>
<tr><td width="33%"><strong>Symbol</strong></td><td width="16%"><strong>Value</strong></td><td width="51%"><strong>Explanation/Options</strong></td></tr>
<tr><td width="33%"><code>anti-alias-factor</code></td><td width="16%"><code>1</code></td><td width="51%">Render at higher resolution (using given factor) and scale down
result to prevent &lsquo;jaggies&rsquo; in <code>PNG</code> images.</td></tr>
<tr><td width="33%"><code>aux-files</code></td><td width="16%"><code>#t</code></td><td width="51%">Create <code>.tex</code>, <code>.texi</code>, <code>.count</code> files in the
<code>EPS</code> backend.</td></tr>
<tr><td width="33%"><code>backend</code></td><td width="16%"><code>'ps</code></td><td width="51%">Select backend.  Postscript files (default) include <code>TTF</code>,
<code>Type1</code> and <code>OTF</code> fonts.  No subsetting of these fonts is
done.  Using &lsquo;oriental&rsquo; character sets can lead to very large files.</td></tr>
<tr><td width="33%"></td><td width="16%"><code>'eps</code></td><td width="51%">Encapsulated PostScript.  This dumps every page (system) as a
separate &lsquo;<tt>EPS</tt>&rsquo; file, without fonts, and as one collated &lsquo;<tt>EPS</tt>&rsquo;
file with all pages (systems) including fonts.  Used as default by
<code>lilypond-book</code>.</td></tr>
<tr><td width="33%"></td><td width="16%"><code>'null</code></td><td width="51%">Do not output a printed score; has the same effect as
<code>-dno-print-pages</code>.</td></tr>
<tr><td width="33%"></td><td width="16%"><code>'svg</code></td><td width="51%">Scalable Vector Graphics.  This creates a single <code>SVG</code> file,
without embedded fonts, for every page of output.  It is recommended to
install the Century Schoolbook fonts, included with your LilyPond
installation, for optimal rendering.  Under UNIX, simply copy these
fonts from the LilyPond directory (typically
&lsquo;<tt>/usr/share/lilypond/VERSION/fonts/otf/</tt>&rsquo;) to &lsquo;<tt>~/.fonts/</tt>&rsquo;.  The
<code>SVG</code> output should be compatible with any SVG editor or user
agent. There is also an option <code>svg-woff</code> (below) for use of woff
font files in the SVG backend.</td></tr>
<tr><td width="33%"></td><td width="16%"><code>'scm</code></td><td width="51%">Dump of the raw, internal Scheme-based drawing commands.</td></tr>
<tr><td width="33%"><code>check-internal-types</code></td><td width="16%"><code>#f</code></td><td width="51%">Check every property assignment for types.</td></tr>
<tr><td width="33%"><code>clip-systems</code></td><td width="16%"><code>#f</code></td><td width="51%">Generate cut-out snippets of a score.</td></tr>
<tr><td width="33%"><code>datadir</code></td><td width="16%"></td><td width="51%">Prefix for data files (read-only).</td></tr>
<tr><td width="33%"><code>debug-gc</code></td><td width="16%"><code>#f</code></td><td width="51%">Dump memory debugging statistics.</td></tr>
<tr><td width="33%"><code>debug-gc-assert-parsed-dead</code></td><td width="16%"><code>#f</code></td><td width="51%">For memory debugging: Ensure that all references to parsed objects
are dead. This is an internal option, and is switched on automatically
for <code>`-ddebug-gc'</code>.</td></tr>
<tr><td width="33%"><code>debug-lexer</code></td><td width="16%"><code>#f</code></td><td width="51%">Debug the flex lexer.</td></tr>
<tr><td width="33%"><code>debug-page-breaking-scoring</code></td><td width="16%"><code>#f</code></td><td width="51%">Dump scores for many different page breaking configurations.</td></tr>
<tr><td width="33%"><code>debug-parser</code></td><td width="16%"><code>#f</code></td><td width="51%">Debug the bison parser.</td></tr>
<tr><td width="33%"><code>debug-property-callbacks</code></td><td width="16%"><code>#f</code></td><td width="51%">Debug cyclic callback chains.</td></tr>
<tr><td width="33%"><code>debug-skylines</code></td><td width="16%"><code>#f</code></td><td width="51%">Debug skylines.</td></tr>
<tr><td width="33%"><code>delete-intermediate-files</code></td><td width="16%"><code>#t</code></td><td width="51%">Delete the unusable, intermediate <code>.ps</code> files created during
compilation.</td></tr>
<tr><td width="33%"><code>dump-cpu-profile</code></td><td width="16%"><code>#f</code></td><td width="51%">Dump timing information (system-dependent).</td></tr>
<tr><td width="33%"><code>dump-profile</code></td><td width="16%"><code>#f</code></td><td width="51%">Dump memory and time information for each file.</td></tr>
<tr><td width="33%"><code>dump-signatures</code></td><td width="16%"><code>#f</code></td><td width="51%">Dump output signatures of each system. Used for regression testing.</td></tr>
<tr><td width="33%"><code>eps-box-padding</code></td><td width="16%"><code>#f</code></td><td width="51%">Pad left edge of the output EPS bounding box by the given amount
(in mm).</td></tr>
<tr><td width="33%"><code>gs-load-fonts</code></td><td width="16%"><code>#f</code></td><td width="51%">Load fonts via Ghostscript.</td></tr>
<tr><td width="33%"><code>gs-load-lily-fonts</code></td><td width="16%"><code>#f</code></td><td width="51%">Load only the LilyPond fonts via Ghostscript.</td></tr>
<tr><td width="33%"><code>gui</code></td><td width="16%"><code>#f</code></td><td width="51%">Runs silently and redirect all output to a log file.</td></tr>
</table>

<p><strong>Note to Windows users:</strong> By default <code>lilypond.exe</code> outputs
all progress information to the command window,
<code>lilypond-windows.exe</code> does not and returns a prompt, with no
progress information, immediately at the command line.  The
&lsquo;<samp>-dgui</samp>&rsquo; option can be used in this case to redirect output to a
log file.
</p>
<table>
<tr><td width="33%"><code>help</code></td><td width="16%"><code>#f</code></td><td width="51%">Show this help.</td></tr>
<tr><td width="33%"><code>include-book-title-preview</code></td><td width="16%"><code>#t</code></td><td width="51%">Include book titles in preview images.</td></tr>
<tr><td width="33%"><code>include-eps-fonts</code></td><td width="16%"><code>#t</code></td><td width="51%">Include fonts in separate-system EPS files.</td></tr>
<tr><td width="33%"><code>include-settings</code></td><td width="16%"><code>#f</code></td><td width="51%">Include file for global settings, this is included before the score
is processed.</td></tr>
<tr><td width="33%"><code>job-count</code></td><td width="16%"><code>#f</code></td><td width="51%">Process in parallel, using the given number of jobs.</td></tr>
<tr><td width="33%"><code>log-file</code></td><td width="16%"><code>#f [file]</code></td><td width="51%">If string <code>FOO</code> is given as a second argument,
redirect output to the log file <code>FOO.log</code>.</td></tr>
<tr><td width="33%"><code>max-markup-depth</code></td><td width="16%"><code>1024</code></td><td width="51%">Maximum depth for the markup tree. If a markup has more levels,
assume it will not terminate on its own, print a warning and return a
null markup instead.</td></tr>
<tr><td width="33%"><code>midi-extension</code></td><td width="16%"><code>&quot;midi&quot;</code></td><td width="51%">Set the default file extension for MIDI output file to given
string.</td></tr>
<tr><td width="33%"><code>music-strings-to-paths</code></td><td width="16%"><code>#f</code></td><td width="51%">Convert text strings to paths when glyphs belong to a music font.</td></tr>
<tr><td width="33%"><code>old-relative</code></td><td width="16%"><code>#f</code></td><td width="51%">Make <code>\relative</code> mode for simultaneous music work similar to
chord syntax.</td></tr>
<tr><td width="33%"><code>paper-size</code></td><td width="16%"><code>\&quot;a4\&quot;</code></td><td width="51%">Set default paper size.  Note the string must be enclosed in
escaped double quotes.</td></tr>
<tr><td width="33%"><code>pixmap-format</code></td><td width="16%"><code>png16m</code></td><td width="51%">Set GhostScript&rsquo;s output format for pixel images.</td></tr>
<tr><td width="33%"><code>point-and-click</code></td><td width="16%"><code>#f</code></td><td width="51%">Add &lsquo;point &amp; click&rsquo; links to <code>PDF</code> output. See
<a href="#point-and-click">Point and click</a>.</td></tr>
<tr><td width="33%"><code>preview</code></td><td width="16%"><code>#f</code></td><td width="51%">Create preview images in addition to normal output.</td></tr>
</table>

<p>This option is supported by all backends; <code>pdf</code>, <code>png</code>,
<code>ps</code>, <code>eps</code> and <code>svg</code>, but not <code>scm</code>.  It generates
an output file, in the form <code>myFile.preview.extension</code>, containing
the titles and the first system of music.  If <code>\book</code> or
<code>\bookpart</code> blocks are used, the titles of <code>\book</code>,
<code>\bookpart</code> or <code>\score</code> will appear in the output, including
the first system of every <code>\score</code> block if the <code>\paper</code>
variable <code>print-all-headers</code> is set to <code>#t</code>.
</p>
<p>To suppress the usual output, use the &lsquo;<samp>-dprint-pages</samp>&rsquo; or
&lsquo;<samp>-dno-print-pages</samp>&rsquo; options according to your requirements.
</p>
<table>
<tr><td width="33%"><code>print-pages</code></td><td width="16%"><code>#t</code></td><td width="51%">Generate full pages, the default.  &lsquo;<samp>-dno-print-pages</samp>&rsquo; is
useful in combination with &lsquo;<samp>-dpreview</samp>&rsquo;.</td></tr>
<tr><td width="33%"><code>profile-property-accesses</code></td><td width="16%"><code>#f</code></td><td width="51%">Keep statistics of <code>get_property()</code> function calls.</td></tr>
<tr><td width="33%"><code>protected-scheme-parsing</code></td><td width="16%"><code>#t</code></td><td width="51%">Continue when errors in inline scheme are caught in the parser. If
set to <code>#f</code>, halt on errors and print a stack trace.</td></tr>
<tr><td width="33%"><code>read-file-list</code></td><td width="16%"><code>#f [file]</code></td><td width="51%">Specify name of a file which contains a list of input files to be
processed.</td></tr>
<tr><td width="33%"><code>relative-includes</code></td><td width="16%"><code>#f</code></td><td width="51%">When processing an <code>\include</code> command, look for the included
file relative to the current file (instead of the root file).</td></tr>
<tr><td width="33%"><code>resolution</code></td><td width="16%"><code>101</code></td><td width="51%">Set resolution for generating <code>PNG</code> pixmaps to given value (in
dpi).</td></tr>
<tr><td width="33%"><code>safe</code></td><td width="16%"><code>#f</code></td><td width="51%">Do not trust the <code>.ly</code> input.</td></tr>
</table>

<p>When LilyPond formatting is available through a web server, either the
&lsquo;<samp>--safe</samp>&rsquo; or the &lsquo;<samp>--jail</samp>&rsquo; option <b>MUST</b> be passed.  The
&lsquo;<samp>--safe</samp>&rsquo; option will prevent inline Scheme code from wreaking
havoc, e.g,
</p>
<blockquote><pre class="verbatim">#(system &quot;rm -rf /&quot;)
{
  c4^$(ly:gulp-file &quot;/etc/passwd&quot;)
}
</pre></blockquote>

<p>The &lsquo;<samp>-dsafe</samp>&rsquo; option works by evaluating in-line Scheme
expressions in a special safe module.  This is derived from GUILE
&lsquo;<tt>safe-r5rs</tt>&rsquo; module, but also adds a number of functions of the
LilyPond API which are listed in &lsquo;<tt>scm/safe-lily.scm</tt>&rsquo;.
</p>
<p>In addition, safe mode disallows <code>\include</code> directives and
disables the use of backslashes in TeX strings.  It is also not
possible to import LilyPond variables into Scheme while in safe mode.
</p>
<p>&lsquo;<samp>-dsafe</samp>&rsquo; does <em>not</em> detect resource overuse, so it is still
possible to make the program hang indefinitely, for example by feeding
cyclic data structures into the backend.  Therefore, if using LilyPond
on a publicly accessible webserver, the process should be limited in
both CPU and memory usage.
</p>
<p>Safe mode will prevent many useful LilyPond snippets from being
compiled.
</p>
<p>The &lsquo;<samp>--jail</samp>&rsquo; is an even more secure alternative, but requires
more work to set up. See <a href="#basic-command-line-options-for-lilypond">Basic command line options for LilyPond</a>.
</p>
<table>
<tr><td width="33%"><code>separate-log-files</code></td><td width="16%"><code>#f</code></td><td width="51%">For input files <code>FILE1.ly</code>, <code>FILE2.ly</code>, etc. output log
data to files <code>FILE1.log</code>, <code>FILE2.log</code>, ...</td></tr>
<tr><td width="33%"><code>show-available-fonts</code></td><td width="16%"><code>#f</code></td><td width="51%">List available font names.</td></tr>
<tr><td width="33%"><code>strict-infinity-checking</code></td><td width="16%"><code>#f</code></td><td width="51%">Force a crash on encountering <code>Inf</code> and <code>NaN</code> floating
point exceptions.</td></tr>
<tr><td width="33%"><code>strip-output-dir</code></td><td width="16%"><code>#t</code></td><td width="51%">Don&rsquo;t use directories from input files while constructing output
file names.</td></tr>
<tr><td width="33%"><code>svg-woff</code></td><td width="16%"><code>#f</code></td><td width="51%">Use woff font files in SVG backend.</td></tr>
<tr><td width="33%"><code>trace-memory-frequency</code></td><td width="16%"><code>#f</code></td><td width="51%">Record Scheme cell usage this many times per second.  Dump the
results to <code>FILE.stacks</code> and <code>FILE.graph</code>.</td></tr>
<tr><td width="33%"><code>trace-scheme-coverage</code></td><td width="16%"><code>#f</code></td><td width="51%">Record coverage of Scheme files in <code>FILE.cov</code>.</td></tr>
<tr><td width="33%"><code>verbose</code></td><td width="16%"><code>#f</code></td><td width="51%">Verbose output, i.e. loglevel at DEBUG (read-only).</td></tr>
<tr><td width="33%"><code>warning-as-error</code></td><td width="16%"><code>#f</code></td><td width="51%">Change all warning and &lsquo;programming error&rsquo; messages into errors.</td></tr>
</table>


<hr size="6">
<a name="Environment-variables"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#running-lilypond" title="Beginning of this chapter or previous chapter"> &lt;&lt; Running lilypond&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#updating-files-with-convert_002dly" title="Next chapter">&nbsp;Updating files with convert-ly &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#advanced-command-line-options-for-lilypond" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Advanced command line options for LilyPond&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#command_002dline-usage" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Command-line usage&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#lilypond-in-chroot-jail" title="Next section in reading order" accesskey="n" rel="next">&nbsp;LilyPond in chroot jail &gt; </a>]</td></tr></table>
<a name="environment-variables"></a>
<h3 class="unnumberedsubsec">Environment variables</h3>

<a name="index-LANG"></a>
<a name="index-LILYPOND_005fDATADIR"></a>

<p><code>lilypond</code> recognizes the following environment variables:
</p><dl compact="compact">
<dt> <code>LILYPOND_DATADIR</code></dt>
<dd><p>This specifies a directory where locale messages and
data files will be looked up by default.  The directory should contain
subdirectories called &lsquo;<tt>ly/</tt>&rsquo;, &lsquo;<tt>ps/</tt>&rsquo;, &lsquo;<tt>tex/</tt>&rsquo;, etc.
</p>
</dd>
<dt> <code>LANG</code></dt>
<dd><p>This selects the language for the warning messages.
</p>
</dd>
<dt> <code>LILYPOND_LOGLEVEL</code></dt>
<dd><p>The default loglevel. If LilyPond is called without an explicit loglevel
(i.e. no &lsquo;<samp>--loglevel</samp>&rsquo; command line option), this value is used.
</p>
</dd>
<dt> <code>LILYPOND_GC_YIELD</code></dt>
<dd><p>A variable, as a percentage, that tunes memory management
behavior.  A higher values means the program uses more memory, a
smaller value means more CPU time is used.  The default value is
<code>70</code>.
</p>
</dd>
</dl>


<hr size="6">
<a name="LilyPond-in-chroot-jail"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#running-lilypond" title="Beginning of this chapter or previous chapter"> &lt;&lt; Running lilypond&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#updating-files-with-convert_002dly" title="Next chapter">&nbsp;Updating files with convert-ly &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#environment-variables" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Environment variables&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#command_002dline-usage" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Command-line usage&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#error-messages" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Error messages &gt; </a>]</td></tr></table>
<a name="lilypond-in-chroot-jail"></a>
<h3 class="unnumberedsubsec">LilyPond in chroot jail</h3>

<p>Setting up the server to run LilyPond in a chroot jail is a complicated
task.  The steps are listed below.  Examples in the steps are from
Ubuntu GNU/Linux, and may require the use of <code>sudo</code> as appropriate.
</p>
<ul>
<li> Install the necessary packages: LilyPond, GhostScript, and ImageMagick.

</li><li> Create a new user by the name of <code>lily</code>:

<blockquote><pre class="example">adduser lily
</pre></blockquote>

<p>This will create a new group for the <code>lily</code> user as well, and a
home folder, <code>/home/lily</code>
</p>
</li><li> In the home folder of the <code>lily</code> user create a file to use as a
separate filesystem:

<blockquote><pre class="example">dd if=/dev/zero of=/home/lily/loopfile bs=1k count= 200000
</pre></blockquote>

<p>This example creates a 200MB file for use as the jail filesystem.
</p>
</li><li> Create a loop device, make a file system and mount it, then create
a folder that can be written by the <code>lily</code> user:

<blockquote><pre class="example">mkdir /mnt/lilyloop
losetup /dev/loop0 /home/lily/loopfile
mkfs -t ext3 /dev/loop0 200000
mount -t ext3 /dev/loop0 /mnt/lilyloop
mkdir /mnt/lilyloop/lilyhome
chown lily /mnt/lilyloop/lilyhome
</pre></blockquote>

</li><li> In the configuration of the servers, the JAIL will be <code>/mnt/lilyloop</code>
and the DIR will be <code>/lilyhome</code>.

</li><li> Create a big directory tree in the jail by copying the necessary files, as
shown in the sample script below.

<p>You can use <code>sed</code> to create the necessary copy commands for a given
executable:
</p>
<blockquote><pre class="example">for i in &quot;/usr/local/lilypond/usr/bin/lilypond&quot; &quot;/bin/sh&quot; &quot;/usr/bin/;  \
  do ldd $i | sed 's/.*=&gt; \/\(.*\/\)\([^(]*\).*/mkdir -p \1 \&amp;\&amp;  \
    cp -L \/\1\2 \1\2/' | sed 's/\t\/\(.*\/\)\(.*\) (.*)$/mkdir -p  \
      \1 \&amp;\&amp; cp -L \/\1\2 \1\2/' | sed '/.*=&gt;.*/d'; done
</pre></blockquote>

</li></ul>

<a name="Example-script-for-32_002dbit-Ubuntu-8_002e04"></a>
<h3 class="subheading">Example script for 32-bit Ubuntu 8.04</h3>

<blockquote><pre class="example">#!/bin/sh
## defaults set here

username=lily
home=/home
loopdevice=/dev/loop0
jaildir=/mnt/lilyloop
# the prefix (without the leading slash!)
lilyprefix=usr/local
# the directory where lilypond is installed on the system
lilydir=/$lilyprefix/lilypond/

userhome=$home/$username
loopfile=$userhome/loopfile
adduser $username
dd if=/dev/zero of=$loopfile bs=1k count=200000
mkdir $jaildir
losetup $loopdevice $loopfile
mkfs -t ext3 $loopdevice 200000
mount -t ext3 $loopdevice $jaildir
mkdir $jaildir/lilyhome
chown $username $jaildir/lilyhome
cd $jaildir

mkdir -p bin usr/bin usr/share usr/lib usr/share/fonts $lilyprefix tmp
chmod a+w tmp

cp -r -L $lilydir $lilyprefix
cp -L /bin/sh /bin/rm bin
cp -L /usr/bin/convert /usr/bin/gs usr/bin
cp -L /usr/share/fonts/truetype usr/share/fonts

# Now the library copying magic
for i in &quot;$lilydir/usr/bin/lilypond&quot; &quot;$lilydir/usr/bin/guile&quot; &quot;/bin/sh&quot;  \
  &quot;/bin/rm&quot; &quot;/usr/bin/gs&quot; &quot;/usr/bin/convert&quot;; do ldd $i | sed 's/.*=&gt;  \
    \/\(.*\/\)\([^(]*\).*/mkdir -p \1 \&amp;\&amp; cp -L \/\1\2 \1\2/' | sed  \
      's/\t\/\(.*\/\)\(.*\) (.*)$/mkdir -p \1 \&amp;\&amp; cp -L \/\1\2 \1\2/'  \
        | sed '/.*=&gt;.*/d'; done | sh -s

# The shared files for ghostscript...
      cp -L -r /usr/share/ghostscript usr/share
# The shared files for ImageMagick
      cp -L -r /usr/lib/ImageMagick* usr/lib

### Now, assuming that you have test.ly in /mnt/lilyloop/lilyhome,
### you should be able to run:
### Note that /$lilyprefix/bin/lilypond is a script, which sets the
### LD_LIBRARY_PATH - this is crucial
      /$lilyprefix/bin/lilypond -jlily,lily,/mnt/lilyloop,/lilyhome test.ly
</pre></blockquote>


<hr size="6">
<a name="Error-messages"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#running-lilypond" title="Beginning of this chapter or previous chapter"> &lt;&lt; Running lilypond&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#updating-files-with-convert_002dly" title="Next chapter">&nbsp;Updating files with convert-ly &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#lilypond-in-chroot-jail" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; LilyPond in chroot jail&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#running-lilypond" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Running lilypond&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#common-errors" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Common errors &gt; </a>]</td></tr></table>
<a name="error-messages"></a>
<h2 class="section">1.3 Error messages</h2>

<a name="index-error-messages"></a>
<p>Different error messages can appear while compiling a file:
</p>
<dl compact="compact">
<dt> <em>Warning</em></dt>
<dd><a name="index-warning"></a>
<p>Something looks suspect.  If you are requesting something out of the
ordinary then you will understand the message, and can ignore it.
However, warnings usually indicate that something is wrong with the
input file.
</p>
</dd>
<dt> <em>Error</em></dt>
<dd><a name="index-error"></a>
<p>Something is definitely wrong.  The current processing step (parsing,
interpreting, or formatting) will be finished, but the next step will
be skipped.
</p>
</dd>
<dt> <em>Fatal error</em></dt>
<dd><a name="index-fatal-error"></a>
<p>Something is definitely wrong, and LilyPond cannot continue.  This
happens rarely.  The most usual cause is misinstalled fonts.
</p>
</dd>
<dt> <em>Scheme error</em></dt>
<dd><a name="index-trace_002c-Scheme"></a>
<a name="index-call-trace"></a>
<a name="index-Scheme-error"></a>
<p>Errors that occur while executing Scheme code are caught by the Scheme
interpreter.  If running with the verbose option (&lsquo;<samp>-V</samp>&rsquo; or
&lsquo;<samp>--verbose</samp>&rsquo;) then a call trace of the offending
function call is printed.
</p>
</dd>
<dt> <em>Programming error</em></dt>
<dd><a name="index-Programming-error"></a>
<p>There was some internal inconsistency.  These error messages are
intended to help the programmers and debuggers.  Usually, they can be
ignored.  Sometimes, they come in such big quantities that they obscure
other output.
</p>
</dd>
<dt> <em>Aborted (core dumped)</em></dt>
<dd><a name="index-Aborted-_0028core-dumped_0029"></a>
<p>This signals a serious programming error that caused the program to
crash.  Such errors are considered critical.  If you stumble on one,
send a bug-report.
</p></dd>
</dl>

<a name="index-errors_002c-message-format"></a>
<p>If warnings and errors can be linked to some part of the input file,
then error messages have the following form
</p>
<blockquote><pre class="example"><var>filename</var>:<var>lineno</var>:<var>columnno</var>: <var>message</var>
<var>offending input line</var>
</pre></blockquote>

<p>A line-break is inserted in the offending line to indicate the column
where the error was found.  For example,
</p>
<blockquote><pre class="example">test.ly:2:19: error: not a duration: 5
  { c'4 e'
           5 g' }
</pre></blockquote>

<p>These locations are LilyPond&rsquo;s best guess about where the warning or
error occurred, but (by their very nature) warnings and errors occur
when something unexpected happens.  If you can&rsquo;t see an error in the
indicated line of your input file, try checking one or two lines
above the indicated position.
</p>
<p>More information about errors is given in <a href="#common-errors">Common errors</a>.
</p>

<hr size="6">
<a name="Common-errors"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#running-lilypond" title="Beginning of this chapter or previous chapter"> &lt;&lt; Running lilypond&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#updating-files-with-convert_002dly" title="Next chapter">&nbsp;Updating files with convert-ly &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#error-messages" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Error messages&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#running-lilypond" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Running lilypond&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#music-runs-off-the-page" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Music runs off the page &gt; </a>]</td></tr></table>
<a name="common-errors"></a>
<h2 class="section">1.4 Common errors</h2>

<p>The error conditions described below occur often, yet the cause
is not obvious or easily found.  Once seen and understood, they
are easily handled.
</p>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#music-runs-off-the-page" accesskey="1">Music runs off the page</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#an-extra-staff-appears" accesskey="2">An extra staff appears</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#apparent-error-in-_002e_002e_002fly_002finit_002ely" accesskey="3">Apparent error in <code>../ly/init.ly</code></a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#error-message-unbound-variable-_0025" accesskey="4">Error message Unbound variable %</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#error-message-ft_005fget_005fglyph_005fname" accesskey="5">Error message FT_Get_Glyph_Name</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#warning-staff-affinities-should-only-decrease" accesskey="6">Warning staff affinities should only decrease</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr size="6">
<a name="Music-runs-off-the-page"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#running-lilypond" title="Beginning of this chapter or previous chapter"> &lt;&lt; Running lilypond&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#updating-files-with-convert_002dly" title="Next chapter">&nbsp;Updating files with convert-ly &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#common-errors" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Common errors&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#common-errors" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Common errors&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#an-extra-staff-appears" title="Next section in reading order" accesskey="n" rel="next">&nbsp;An extra staff appears &gt; </a>]</td></tr></table>
<a name="music-runs-off-the-page"></a>
<h3 class="unnumberedsubsec">Music runs off the page</h3>

<p>Music running off the page over the right margin or appearing
unduly compressed is almost always due to entering an incorrect
duration on a note, causing the final note in a measure to extend
over the bar line.  It is not invalid if the final note in a
measure does not end on the automatically entered bar line, as the
note is simply assumed to carry over into the next measure.  But
if a long sequence of such carry-over measures occurs the music
can appear compressed or may flow off the page because automatic
line breaks can be inserted only at the end of complete measures,
i.e., where all notes end before or at the end of the measure.
</p>
<div class="warning"><p><strong>Note:</strong> An incorrect duration can cause line breaks to be
inhibited, leading to a line of highly compressed music or
music which flows off the page.
</p>
</div>
<p>The incorrect duration can be found easily if bar checks are used,
see <a name="index-Bar-and-bar-number-checks"></a>
<a href="notation-big-page.html#bar-and-bar-number-checks">Bar and bar number checks</a>.
</p>
<p>If you actually intend to have a series of such carry-over measures
you will need to insert an invisible bar line where you want the
line to break.  For details, see <a name="index-Bar-lines"></a>
<a href="notation-big-page.html#bar-lines">Bar lines</a>.
</p>

<hr size="6">
<a name="An-extra-staff-appears"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#running-lilypond" title="Beginning of this chapter or previous chapter"> &lt;&lt; Running lilypond&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#updating-files-with-convert_002dly" title="Next chapter">&nbsp;Updating files with convert-ly &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#music-runs-off-the-page" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Music runs off the page&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#common-errors" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Common errors&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#apparent-error-in-_002e_002e_002fly_002finit_002ely" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Apparent error in ../ly/init.ly &gt; </a>]</td></tr></table>
<a name="an-extra-staff-appears"></a>
<h3 class="unnumberedsubsec">An extra staff appears</h3>

<p>If contexts are not created explicitly with <code>\new</code> or
<code>\context</code>, they will be silently created as soon as a
command is encountered which cannot be applied to an existing
context.  In simple scores the automatic creation of contexts is
useful, and most of the examples in the LilyPond manuals take
advantage of this simplification.  But occasionally the silent
creation of contexts can give rise to unexpected new staves or
scores.  For example, it might be expected that the following code
would cause all note heads within the following staff to be
colored red, but in fact it results in two staves with the note
heads remaining the default black in the lower staff.
</p>
<blockquote><pre class="verbatim">\override Staff.NoteHead #'color = #red
\new Staff { a }
</pre><p>
 <a href="56/lily-12297b8c.ly">
  <img align="middle"
       border="0"
       src="56/lily-12297b8c.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>This is because a <code>Staff</code> context does not exist when the
override is processed, so one is implicitly created and the override
is applied to it, but then the <code>\new Staff</code> command creates
another, separate, staff into which the notes are placed.  The
correct code to color all note heads red is
</p>
<blockquote><pre class="verbatim">\new Staff {
  \override Staff.NoteHead #'color = #red
  a
}
</pre><p>
 <a href="27/lily-1017dbc6.ly">
  <img align="middle"
       border="0"
       src="27/lily-1017dbc6.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>As a second example, if a <code>\relative</code> command is placed inside
a <code>\repeat</code> command, two staves result, the second offset from
the first, because the <code>\repeat</code> command generates two
<code>\relative</code> blocks, which each implicitly create <code>Staff</code>
and <code>Voice</code> blocks.
</p>
<blockquote><pre class="verbatim">\repeat unfold 2 {
  \relative c' { c4 d e f }
}
</pre><p>
 <a href="8d/lily-a4799122.ly">
  <img align="middle"
       border="0"
       src="8d/lily-a4799122.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>Explicitly instantiating the <code>Voice</code> context fixes the
problem:
</p>
<blockquote><pre class="verbatim">\new Voice {
  \repeat unfold 2 {
    \relative c' { c4 d e f }
  }
}
</pre><p>
 <a href="dd/lily-8f66d026.ly">
  <img align="middle"
       border="0"
       src="dd/lily-8f66d026.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>




<hr size="6">
<a name="Apparent-error-in-_002e_002e_002fly_002finit_002ely"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#running-lilypond" title="Beginning of this chapter or previous chapter"> &lt;&lt; Running lilypond&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#updating-files-with-convert_002dly" title="Next chapter">&nbsp;Updating files with convert-ly &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#an-extra-staff-appears" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; An extra staff appears&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#common-errors" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Common errors&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#error-message-unbound-variable-_0025" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Error message Unbound variable % &gt; </a>]</td></tr></table>
<a name="apparent-error-in-_002e_002e_002fly_002finit_002ely"></a>
<h3 class="unnumberedsubsec">Apparent error in <code>../ly/init.ly</code></h3>

<p>Various obscure error messages may appear about syntax errors in
&lsquo;<tt>../ly/init.ly</tt>&rsquo; if the input file is not correctly formed,
for example, if it does not contain correctly
matched braces or quote signs.
</p>
<p>The most common error is a missing brace, (<code>}</code>), at the end of
a <code>score</code> block.  Here the solution is obvious: check the
<code>score</code> block is correctly terminated.  The correct structure
of an input file is described in <a name="index-How-LilyPond-input-files-work"></a>
<a href="learning-big-page.html#how-lilypond-input-files-work">How LilyPond input files work</a>.
Using an editor which automatically highlights matching brackets and
braces is helpful to avoid such errors.
</p>
<p>A second common cause is no white space between the last syllable
of a lyrics block and the terminating brace, (<code>}</code>).  Without
this separation the brace is taken to be part of the syllable.  It
is always advisable to ensure there is white space before and after
<em>every</em> brace.  For the importance of this when using lyrics,
see <a name="index-Entering-lyrics"></a>
<a href="notation-big-page.html#entering-lyrics">Entering lyrics</a>.
</p>
<p>This error message can also appear if a terminating quote sign,
(<code>&quot;</code>), is omitted.  In this case an accompanying error message
should give a line number close to the line in error.  The
mismatched quote will usually be on the line one or two above.
</p>
<hr size="6">
<a name="Error-message-Unbound-variable-_0025"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#running-lilypond" title="Beginning of this chapter or previous chapter"> &lt;&lt; Running lilypond&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#updating-files-with-convert_002dly" title="Next chapter">&nbsp;Updating files with convert-ly &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#apparent-error-in-_002e_002e_002fly_002finit_002ely" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Apparent error in ../ly/init.ly&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#common-errors" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Common errors&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#error-message-ft_005fget_005fglyph_005fname" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Error message FT_Get_Glyph_Name &gt; </a>]</td></tr></table>
<a name="error-message-unbound-variable-_0025"></a>
<h3 class="unnumberedsubsec">Error message Unbound variable %</h3>

<p>This error message will appear at the bottom of the console
output or log file together with a &ldquo;GUILE signalled an error &hellip;&rdquo;
message every time a Scheme routine is called which (invalidly)
contains a <em>LilyPond</em> rather than a <em>Scheme</em> comment.
</p>
<p>LilyPond comments begin with a percent sign, (<code>%</code>), and must
not be used within Scheme routines.  Scheme comments begin with a
semi-colon, (<code>;</code>).
</p>
<hr size="6">
<a name="Error-message-FT_005fGet_005fGlyph_005fName"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#running-lilypond" title="Beginning of this chapter or previous chapter"> &lt;&lt; Running lilypond&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#updating-files-with-convert_002dly" title="Next chapter">&nbsp;Updating files with convert-ly &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#error-message-unbound-variable-_0025" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Error message Unbound variable %&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#common-errors" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Common errors&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#warning-staff-affinities-should-only-decrease" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Warning staff affinities should only decrease &gt; </a>]</td></tr></table>
<a name="error-message-ft_005fget_005fglyph_005fname"></a>
<h3 class="unnumberedsubsec">Error message FT_Get_Glyph_Name</h3>

<p>This error messages appears in the console output or log file if
an input file contains a non-ASCII character and was not saved in
UTF-8 encoding.  For details, see <a name="index-Text-encoding"></a>
<a href="notation-big-page.html#text-encoding">Text encoding</a>.
</p>

<hr size="6">
<a name="Warning-staff-affinities-should-only-decrease"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#running-lilypond" title="Beginning of this chapter or previous chapter"> &lt;&lt; Running lilypond&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#updating-files-with-convert_002dly" title="Next chapter">&nbsp;Updating files with convert-ly &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#error-message-ft_005fget_005fglyph_005fname" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Error message FT_Get_Glyph_Name&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#common-errors" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Common errors&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#updating-files-with-convert_002dly" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Updating files with convert-ly &gt; </a>]</td></tr></table>
<a name="warning-staff-affinities-should-only-decrease"></a>
<h3 class="unnumberedsubsec">Warning staff affinities should only decrease</h3>
<p>This warning can appear if there are no staves in the printed
output, for example if there are just a <code>ChordName</code> context
and a <code>Lyrics</code> context as in a lead sheet.  The warning
messages can be avoided by making one of the contexts behave as a
staff by inserting
</p>
<blockquote><pre class="example">\override VerticalAxisGroup #'staff-affinity = ##f
</pre></blockquote>

<p>at its start.  For details, see &ldquo;Spacing of non-staff lines&rdquo; in
<a name="index-Flexible-vertical-spacing-within-systems"></a>
<a href="notation-big-page.html#flexible-vertical-spacing-within-systems">Flexible vertical spacing within systems</a>.
</p>



<hr size="6">
<a name="Updating-files-with-convert_002dly"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#running-lilypond" title="Beginning of this chapter or previous chapter"> &lt;&lt; Running lilypond&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#lilypond_002dbook" title="Next chapter">&nbsp;lilypond-book &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#warning-staff-affinities-should-only-decrease" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Warning staff affinities should only decrease&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#index" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Top&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#why-does-the-syntax-change_003f" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Why does the syntax change? &gt; </a>]</td></tr></table>
<a name="updating-files-with-convert_002dly"></a>
<h1 class="chapter">2. Updating files with <code>convert-ly</code></h1>

<a name="index-Updating-a-LilyPond-file"></a>
<a name="index-convert_002dly"></a>

<p>The LilyPond input syntax is routinely changed to simplify it or improve
it in different ways.  As a side effect of this, the LilyPond interpreter
often is no longer compatible with older input files.  To remedy this,
the program <code>convert-ly</code> can be used to deal with most of the
syntax changes between LilyPond versions.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#why-does-the-syntax-change_003f" accesskey="1">2.1 Why does the syntax change?</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#invoking-convert_002dly" accesskey="2">2.2 Invoking <code>convert-ly</code></a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#command-line-options-for-convert_002dly" accesskey="3">2.3 Command line options for <code>convert-ly</code></a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#problems-running-convert_002dly" accesskey="4">2.4 Problems running <code>convert-ly</code></a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#manual-conversions" accesskey="5">2.5 Manual conversions</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>


<hr size="6">
<a name="Why-does-the-syntax-change_003f"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#updating-files-with-convert_002dly" title="Beginning of this chapter or previous chapter"> &lt;&lt; Updating files with convert-ly&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#lilypond_002dbook" title="Next chapter">&nbsp;lilypond-book &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#updating-files-with-convert_002dly" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Updating files with convert-ly&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#updating-files-with-convert_002dly" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Updating files with convert-ly&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#invoking-convert_002dly" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Invoking convert-ly &gt; </a>]</td></tr></table>
<a name="why-does-the-syntax-change_003f"></a>
<h2 class="section">2.1 Why does the syntax change?</h2>

<a name="index-convert_002dly-1"></a>
<a name="index-updating-old-input-files"></a>

<p>The LilyPond input syntax occasionally changes.  As LilyPond
itself improves, the syntax (input language) is modified
accordingly.  Sometimes these changes are made to make the input
easier to read and write or sometimes the changes are made to
accommodate new features of LilyPond.
</p>
<p>For example, all <code>\paper</code> and <code>\layout</code> property names
are supposed to be written in the form <code>first-second-third</code>.
However, in version 2.11.60, we noticed that the
<code>printallheaders</code> property did not follow this convention.
Should we leave it alone (confusing new users who must deal with
an inconsistent input format), or change it (annoying old users
with existing scores)?  In this case, we decided to change the
name to <code>print-all-headers</code>.  Fortunately, this change can be
automated with our <code>convert-ly</code> tool.
</p>
<p>Unfortunately, <code>convert-ly</code> cannot handle all input changes.
For example, in LilyPond 2.4 and earlier, accents and non-English
letters were entered using LaTeX &ndash; displaying the French word for
Christmas was entered as <code>No\&quot;el</code>.  But in LilyPond
2.6 and above, the special <code>ë</code> must be entered directly into
the LilyPond file as an UTF-8 character.  <code>convert-ly</code> cannot
change all the LaTeX special characters into UTF-8 characters; you
must manually update your old LilyPond input files.
</p>

<hr size="6">
<a name="Invoking-convert_002dly"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#updating-files-with-convert_002dly" title="Beginning of this chapter or previous chapter"> &lt;&lt; Updating files with convert-ly&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#lilypond_002dbook" title="Next chapter">&nbsp;lilypond-book &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#why-does-the-syntax-change_003f" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Why does the syntax change?&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#updating-files-with-convert_002dly" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Updating files with convert-ly&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#command-line-options-for-convert_002dly" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Command line options for convert-ly &gt; </a>]</td></tr></table>
<a name="invoking-convert_002dly"></a>
<h2 class="section">2.2 Invoking <code>convert-ly</code></h2>

<p><code>convert-ly</code> uses <code>\version</code> statements in the input
file to detect the old version number.  In most cases, to upgrade
your input file it is sufficient to run
</p>
<blockquote><pre class="example">convert-ly -e myfile.ly
</pre></blockquote>

<p>in the directory containing the file.  This will upgrade
&lsquo;<tt>myfile.ly</tt>&rsquo; in-place and preserve the original file in
&lsquo;<tt>myfile.ly~</tt>&rsquo;.
</p>
<div class="warning"><p><strong>Note:</strong> <code>convert-ly</code> always converts up to the last
syntax change handled by it.  This means that the <code>version</code>
number left in the file is usually lower than the version of
<code>convert-ly</code> itself.
</p>
</div>
<p>To convert all the input files in a directory together use
</p>
<blockquote><pre class="example">convert-ly -e *.ly
</pre></blockquote>

<p>Alternatively, if you want to specify a different name for the
upgraded file, preserving the original file and name unchanged,
use
</p>
<blockquote><pre class="example">convert-ly myfile.ly &gt; mynewfile.ly
</pre></blockquote>

<p>The program will list the version numbers for which conversions
have been made.  If no version numbers are listed the file is
already up to date.
</p>
<p>MacOS&nbsp;X users may execute these commands under the menu entry
<code>Compile &gt; Update syntax</code>.
</p>
<p>Windows users should enter these commands in a Command Prompt
window, which is usually found under
<code>Start &gt; Accessories &gt; Command Prompt</code>.
</p>

<hr size="6">
<a name="Command-line-options-for-convert_002dly"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#updating-files-with-convert_002dly" title="Beginning of this chapter or previous chapter"> &lt;&lt; Updating files with convert-ly&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#lilypond_002dbook" title="Next chapter">&nbsp;lilypond-book &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#invoking-convert_002dly" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Invoking convert-ly&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#updating-files-with-convert_002dly" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Updating files with convert-ly&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#problems-running-convert_002dly" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Problems running convert-ly &gt; </a>]</td></tr></table>
<a name="command-line-options-for-convert_002dly"></a>
<h2 class="section">2.3 Command line options for <code>convert-ly</code></h2>

<p>The program is invoked as follows:
</p>
<blockquote><pre class="example">convert-ly [<var>option</var>]&hellip; <var>filename</var>&hellip;
</pre></blockquote>


<p>The following options can be given:
</p>
<dl compact="compact">
<dt> <code>-e,--edit</code></dt>
<dd><p>Apply the conversions direct to the input file, modifying it
in-place.
</p>
</dd>
<dt> <code>-f,--from=<var>from-patchlevel</var></code></dt>
<dd><p>Set the version to convert from.  If this is not set, <code>convert-ly</code>
will guess this, on the basis of <code>\version</code> strings in the file.
E.g. &lsquo;<samp>--from=2.10.25</samp>&rsquo;
</p>
</dd>
<dt> <code>-n,--no-version</code></dt>
<dd><p>Normally, <code>convert-ly</code> adds a <code>\version</code> indicator
to the output.  Specifying this option suppresses this.
</p>
</dd>
<dt> <code>-s, --show-rules</code></dt>
<dd><p>Show all known conversions and exit.
</p>
</dd>
<dt> <code>--to=<var>to-patchlevel</var></code></dt>
<dd><p>Set the goal version of the conversion.  It defaults to the latest
available version.  E.g. &lsquo;<samp>--to=2.12.2</samp>&rsquo;
</p>
</dd>
<dt> <code>-h, --help</code></dt>
<dd><p>Print usage help.
</p>
</dd>
<dt> <code>-l <var>loglevel</var>, --loglevel=<var>loglevel</var></code></dt>
<dd><p>Set the output verbosity to <var>loglevel</var>. Possible values are <code>NONE</code>,
<code>ERROR</code>, <code>WARNING</code>, <code>PROGRESS</code> (default) and <code>DEBUG</code>.
</p>
</dd>
</dl>

<p>To upgrade LilyPond fragments in texinfo files, use
</p>
<blockquote><pre class="example">convert-ly --from=... --to=... --no-version *.itely
</pre></blockquote>

<p>To see the changes in the LilyPond syntax between two versions, use
</p>
<blockquote><pre class="example">convert-ly --from=... --to=... -s
</pre></blockquote>


<hr size="6">
<a name="Problems-running-convert_002dly"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#updating-files-with-convert_002dly" title="Beginning of this chapter or previous chapter"> &lt;&lt; Updating files with convert-ly&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#lilypond_002dbook" title="Next chapter">&nbsp;lilypond-book &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#command-line-options-for-convert_002dly" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Command line options for convert-ly&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#updating-files-with-convert_002dly" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Updating files with convert-ly&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#manual-conversions" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Manual conversions &gt; </a>]</td></tr></table>
<a name="problems-running-convert_002dly"></a>
<h2 class="section">2.4 Problems running <code>convert-ly</code></h2>

<p>When running convert-ly in a Command Prompt window under Windows
on a file which has spaces in the filename or in the path to it,
it is necessary to surround the entire input file name with three
(!) sets of double quotes:
</p>
<blockquote><pre class="example">convert-ly &quot;&quot;&quot;D:/My Scores/Ode.ly&quot;&quot;&quot; &gt; &quot;D:/My Scores/new Ode.ly&quot;
</pre></blockquote>

<p>If the simple <code>convert-ly -e *.ly</code> command fails because the
expanded command line becomes too long, the <code>convert-ly</code>
command may be placed in a loop instead.  This example for UNIX
will upgrade all &lsquo;<tt>.ly</tt>&rsquo; files in the current directory
</p>
<blockquote><pre class="example">for f in *.ly; do convert-ly -e $f; done;
</pre></blockquote>

<p>In the Windows Command Prompt window the corresponding command is
</p>
<blockquote><pre class="example">for %x in (*.ly) do convert-ly -e &quot;&quot;&quot;%x&quot;&quot;&quot;
</pre></blockquote>

<p>Not all language changes are handled.  Only one output option can be
specified.  Automatically updating scheme and LilyPond scheme
interfaces is quite unlikely; be prepared to tweak scheme code
manually.
</p>

<hr size="6">
<a name="Manual-conversions"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#updating-files-with-convert_002dly" title="Beginning of this chapter or previous chapter"> &lt;&lt; Updating files with convert-ly&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#lilypond_002dbook" title="Next chapter">&nbsp;lilypond-book &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#problems-running-convert_002dly" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Problems running convert-ly&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#updating-files-with-convert_002dly" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Updating files with convert-ly&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#lilypond_002dbook" title="Next section in reading order" accesskey="n" rel="next">&nbsp;lilypond-book &gt; </a>]</td></tr></table>
<a name="manual-conversions"></a>
<h2 class="section">2.5 Manual conversions</h2>

<p>In theory, a program like <code>convert-ly</code> could handle any
syntax change.  After all, a computer program interprets the old
version and the new version, so another computer program can
translate one file into another<sup><a name="DOCF2" href="#FOOT2">2</a></sup>.
</p>
<p>However, the LilyPond project has limited resources: not all
conversions are performed automatically.  Below is a list of known
problems.
</p>

<pre class="verbatim">1.6-&gt;2.0:
 Doesn't always convert figured bass correctly, specifically things like {&lt;
&gt;}.  Mats' comment on working around this:
   To be able to run convert-ly
   on it, I first replaced all occurrences of '{&lt;' to some dummy like '{#'
   and similarly I replaced '&gt;}' with '&amp;}'.  After the conversion, I could
   then change back from '{ #' to '{ &lt;' and from '&amp; }' to '&gt; }'.
 Doesn't convert all text markup correctly.  In the old markup syntax,
 it was possible to group a number of markup commands together within
parentheses, e.g.
   -#'((bold italic) &quot;string&quot;)
   This will incorrectly be converted into
   -\markup{{\bold italic} &quot;string&quot;}
   instead of the correct
   -\markup{\bold \italic &quot;string&quot;}
2.0-&gt;2.2:
 Doesn't handle \partcombine
 Doesn't do \addlyrics =&gt; \lyricsto, this breaks some scores with multiple
stanzas.
2.0-&gt;2.4:
 \magnify isn't changed to \fontsize.
    - \magnify #m =&gt; \fontsize #f, where f = 6ln(m)/ln(2)
 remove-tag isn't changed.
    - \applyMusic #(remove-tag '. . .) =&gt; \keepWithTag #'. . .
 first-page-number isn't changed.
    - first-page-number no =&gt; print-first-page-number = ##f
 Line breaks in header strings aren't converted.
    - \\\\  as line break in \header strings =&gt; \markup \center-align &lt;
      &quot;First Line&quot; &quot;Second Line&quot; &gt;
 Crescendo and decrescendo terminators aren't converted.
    - \rced =&gt; \!
    - \rc =&gt; \!
2.2-&gt;2.4:
 \turnOff (used in \set Staff.VoltaBracket = \turnOff) is not properly
converted.
2.4.2-&gt;2.5.9
 \markup{ \center-align &lt;{ ... }&gt; } should be converted to:
 \markup{ \center-align {\line { ... }} }
 but now, \line is missing.
2.4-&gt;2.6
 Special LaTeX characters such as $~$ in text are not converted to UTF8.
2.8
 \score{} must now begin with a music expression.  Anything else
 (particularly \header{}) must come after the music.
</pre>




<hr size="6">
<a name="lilypond_002dbook"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#updating-files-with-convert_002dly" title="Beginning of this chapter or previous chapter"> &lt;&lt; Updating files with convert-ly&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#external-programs" title="Next chapter">&nbsp;External programs &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#manual-conversions" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Manual conversions&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#index" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Top&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#an-example-of-a-musicological-document" title="Next section in reading order" accesskey="n" rel="next">&nbsp;An example of a musicological document &gt; </a>]</td></tr></table>
<a name="lilypond_002dbook"></a>
<h1 class="chapter">3. Running <code>lilypond-book</code></h1>

<p>If you want to add pictures of music to a document, you can simply do it
the way you would do with other types of pictures.  The pictures are
created separately, yielding PostScript output or PNG images, and those
are included into a LaTeX or HTML document.
</p>
<p><code>lilypond-book</code> provides a way to automate this process: This
program extracts snippets of music from your document, runs
<code>lilypond</code> on them, and outputs the document with pictures
substituted for the music.  The line width and font size definitions for
the music are adjusted to match the layout of your document.
</p>
<p>This is a separate program from <code>lilypond</code> itself, and is run
on the command line; for more information, see
<a href="#command_002dline-usage">Command-line usage</a>.  If you have trouble running
<code>lilypond-book</code> on Windows or Mac OS X using the command line, then
see either <a name="index-Windows"></a>
<a href="web-big-page.html#windows">Windows</a> or <a name="index-MacOS-X-1"></a>
<a href="web-big-page.html#macos-x">MacOS X</a>.
</p>
<p>This procedure may be applied to LaTeX, HTML, Texinfo or DocBook
documents.
</p>
<a name="index-texinfo"></a>
<a name="index-LaTex"></a>
<a name="index-texinfo-1"></a>
<a name="index-texi"></a>
<a name="index-HTML"></a>
<a name="index-docbook"></a>
<a name="index-documents_002c-adding-music"></a>
<a name="index-HTML_002c-adding-music"></a>
<a name="index-Texinfo_002c-adding-music"></a>
<a name="index-DocBook_002c-adding-music"></a>
<a name="index-LaTeX_002c-adding-music"></a>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#an-example-of-a-musicological-document" accesskey="1">3.1 An example of a musicological document</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#integrating-music-and-text" accesskey="2">3.2 Integrating music and text</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#music-fragment-options" accesskey="3">3.3 Music fragment options</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#invoking-lilypond_002dbook" accesskey="4">3.4 Invoking <code>lilypond-book</code></a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#filename-extensions" accesskey="5">3.5 Filename extensions</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#lilypond_002dbook-templates" accesskey="6">3.6 lilypond-book templates</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#sharing-the-table-of-contents" accesskey="7">3.7 Sharing the table of contents</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#alternate-methods-of-mixing-text-and-music" accesskey="8">3.8 Alternative methods of mixing text and music</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>


<hr size="6">
<a name="An-example-of-a-musicological-document"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#lilypond_002dbook" title="Beginning of this chapter or previous chapter"> &lt;&lt; lilypond-book&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#external-programs" title="Next chapter">&nbsp;External programs &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#lilypond_002dbook" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; lilypond-book&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#lilypond_002dbook" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;lilypond-book&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#integrating-music-and-text" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Integrating music and text &gt; </a>]</td></tr></table>
<a name="an-example-of-a-musicological-document"></a>
<h2 class="section">3.1 An example of a musicological document</h2>

<a name="index-musicology"></a>
<p>Some texts contain music examples.  These texts are musicological
treatises, songbooks, or manuals like this.  Such texts can be made by
hand, simply by importing a PostScript figure into the word processor.
However, there is an automated procedure to reduce the amount of work
involved in HTML, LaTeX, Texinfo and DocBook documents.
</p>
<p>A script called <code>lilypond-book</code> will extract the music fragments,
format them, and put back the resulting notation.  Here we show a small
example for use with LaTeX.  The example also contains explanatory
text, so we will not comment on it further.
</p>
<a name="Input"></a>
<h3 class="subheading">Input</h3>

<blockquote><pre class="verbatim">\documentclass[a4paper]{article}

\begin{document}

Documents for \verb+lilypond-book+ may freely mix music and text.
For example,

\begin{lilypond}
\relative c' {
  c2 e2 \times 2/3 { f8 a b } a2 e4
}
\end{lilypond}

Options are put in brackets.

\begin{lilypond}[fragment,quote,staffsize=26,verbatim]
  c'4 f16
\end{lilypond}

Larger examples can be put into a separate file, and introduced with
\verb+\lilypondfile+.

\lilypondfile[quote,noindent]{screech-and-boink.ly}

(If needed, replace @file{screech-and-boink.ly} by any @file{.ly} file
you put in the same directory as this file.)

\end{document}
</pre></blockquote>

<a name="Processing"></a>
<h3 class="subheading">Processing</h3>

<p>Save the code above to a file called &lsquo;<tt>lilybook.lytex</tt>&rsquo;, then in a
terminal run
</p>
<blockquote><pre class="example">lilypond-book --output=out --pdf lilybook.lytex
<em>lilypond-book (GNU LilyPond) 2.16.2 </em>
<em>Reading lilybook.lytex...</em>
<em>..lots of stuff deleted..</em>
<em>Compiling lilybook.tex...</em>
cd out
pdflatex lilybook
<em>..lots of stuff deleted..</em>
xpdf lilybook
<em>(replace <code>xpdf</code> by your favorite PDF viewer)</em>
</pre></blockquote>

<p>Running <code>lilypond-book</code> and <code>latex</code> creates a lot of
temporary files, which would clutter up the working directory.  To
remedy this, use the &lsquo;<samp>--output=<var>dir</var></samp>&rsquo; option.  It will create
the files in a separate subdirectory &lsquo;<tt>dir</tt>&rsquo;.
</p>
<p>Finally the result of the LaTeX example shown above.<sup><a name="DOCF3" href="#FOOT3">3</a></sup>  This finishes the tutorial section.
</p>


<a name="Output"></a>
<h3 class="subheading">Output</h3>

<p>Documents for <code>lilypond-book</code> may freely mix music and text.
For example,
</p>
<p>
 <a href="e5/lily-1edf8da1.ly">
  <img align="middle"
       border="0"
       src="e5/lily-1edf8da1.png"
       alt="[image of music]">
 </a>
</p>



<p>Options are put in brackets.
</p>
<blockquote><pre class="verbatim">c'4 f16
</pre><p>
 <a href="b7/lily-82a2c89b.ly">
  <img align="middle"
       border="0"
       src="b7/lily-82a2c89b.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>Larger examples can be put into a separate file, and introduced with
<code>\lilypondfile</code>.
</p>
<blockquote><p>
 <a href="08/lily-f2ae16a8.ly">
  <img align="middle"
       border="0"
       src="08/lily-f2ae16a8.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>If a <code>tagline</code> is required, either default or custom, then the
entire snippet must be enclosed in a <code>\book { }</code> construct.
</p>
<pre class="verbatim">\book{
  \header{
    title = &quot;A scale in LilyPond&quot;
  }

  \relative c' {
    c d e f g a b c
  }
}
</pre><p>
 <a href="25/lily-fde05565.ly">
  <img align="middle"
       border="0"
       src="25/lily-fde05565.png"
       alt="[image of music]">
 </a>
</p>





<hr size="6">
<a name="Integrating-music-and-text"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#lilypond_002dbook" title="Beginning of this chapter or previous chapter"> &lt;&lt; lilypond-book&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#external-programs" title="Next chapter">&nbsp;External programs &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#an-example-of-a-musicological-document" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; An example of a musicological document&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#lilypond_002dbook" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;lilypond-book&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#latex" title="Next section in reading order" accesskey="n" rel="next">&nbsp;LaTeX &gt; </a>]</td></tr></table>
<a name="integrating-music-and-text"></a>
<h2 class="section">3.2 Integrating music and text</h2>

<p>Here we explain how to integrate LilyPond with various output formats.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#latex" accesskey="1">3.2.1 LaTeX</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#texinfo" accesskey="2">3.2.2 Texinfo</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#html" accesskey="3">3.2.3 HTML</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#docbook" accesskey="4">3.2.4 DocBook</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr size="6">
<a name="LaTeX"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#lilypond_002dbook" title="Beginning of this chapter or previous chapter"> &lt;&lt; lilypond-book&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#external-programs" title="Next chapter">&nbsp;External programs &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#integrating-music-and-text" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Integrating music and text&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#integrating-music-and-text" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Integrating music and text&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#texinfo" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Texinfo &gt; </a>]</td></tr></table>
<a name="latex"></a>
<h3 class="subsection">3.2.1 LaTeX</h3>

<p>LaTeX is the de-facto standard for publishing layouts in the exact
sciences.  It is built on top of the TeX typesetting engine,
providing the best typography available anywhere.
</p>
<p>See
<a href="http://www.ctan.org/tex-archive/info/lshort/english"><em>The Not So Short Introduction to LaTeX</em></a> for an overview on how
to use LaTeX.
</p>
<p><code>lilypond-book</code> provides the following commands and environments to
include music in LaTeX files:
</p>
<ul>
<li>
the <code>\lilypond{...}</code> command, where you can directly enter short
lilypond code

</li><li>
the <code>\begin{lilypond}...\end{lilypond}</code> environment, where you
can directly enter longer lilypond code

</li><li>
the <code>\lilypondfile{...}</code> command to insert a lilypond file

</li><li>
the <code>\musicxmlfile{...}</code> command to insert a MusicXML file, which
will be processed by <code>musicxml2ly</code> and <code>lilypond</code>.

</li></ul>

<p>In the input file, music is specified with any of the following commands:
</p>
<blockquote><pre class="example">\begin{lilypond}[options,go,here]
  YOUR LILYPOND CODE
\end{lilypond}

\lilypond[options,go,here]{ YOUR LILYPOND CODE }

\lilypondfile[options,go,here]{<var>filename</var>}

\musicxmlfile[options,go,here]{<var>filename</var>}
</pre></blockquote>



<p>Additionally, <code>\lilypondversion</code> displays the current version
of lilypond.
Running <code>lilypond-book</code> yields a file that can be further
processed with LaTeX.
</p>
<p>We show some examples here.  The <code>lilypond</code> environment
</p>
<blockquote><pre class="example">\begin{lilypond}[quote,fragment,staffsize=26]
  c' d' e' f' g'2 g'2
\end{lilypond}
</pre></blockquote>

<p>produces
</p>
<blockquote><p>
 <a href="5a/lily-d67e1e90.ly">
  <img align="middle"
       border="0"
       src="5a/lily-d67e1e90.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>The short version
</p>
<blockquote><pre class="example">\lilypond[quote,fragment,staffsize=11]{&lt;c' e' g'&gt;}
</pre></blockquote>

<p>produces
</p>
<blockquote><p>
 <a href="d9/lily-f0683194.ly">
  <img align="middle"
       border="0"
       src="d9/lily-f0683194.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>Currently, you cannot include <code>{</code> or <code>}</code> within
<code>\lilypond{}</code>, so this command is only useful with the
<code>fragment</code> option.
</p>
<p>The default line width of the music will be adjusted by examining the
commands in the document preamble, the part of the document before
<code>\begin{document}</code>.  The <code>lilypond-book</code> command sends
these to LaTeX to find out how wide the text is.  The line width for
the music fragments is then adjusted to the text width.  Note that this
heuristic algorithm can fail easily; in such cases it is necessary to
use the <code>line-width</code> music fragment option.
</p>
<a name="index-titling-and-lilypond_002dbook"></a>
<a name="index-_005cheader-in-LaTeX-documents"></a>

<p>Each snippet will call the following macros if they have been defined by
the user:
</p>
<ul>
<li> <code>\preLilyPondExample</code> called before the music,

</li><li> <code>\postLilyPondExample</code> called after the music,

</li><li> <code>\betweenLilyPondSystem[1]</code> is called between systems if
<code>lilypond-book</code> has split the snippet into several PostScript
files.  It must be defined as taking one parameter and will be
passed the number of files already included in this snippet.
The default is to simply insert a <code>\linebreak</code>.
</li></ul>


<a name="Selected-Snippets"></a>
<h4 class="subsubheading">Selected Snippets</h4>

<p>Sometimes it is useful to display music elements (such as ties and slurs)
as if they continued after the end of the fragment.  This can be done by
breaking the staff and suppressing inclusion of the rest of the LilyPond
output.
</p>
<p>In LaTeX, define <code>\betweenLilyPondSystem</code> in such a way that
inclusion of other systems is terminated once the required number of
systems are included.  Since <code>\betweenLilyPondSystem</code> is first
called <em>after</em> the first system, including only the first system
is trivial.
</p>
<blockquote><pre class="example">\def\betweenLilyPondSystem#1{\endinput}

\begin{lilypond}[fragment]
  c'1\( e'( c'~ \break c' d) e f\)
\end{lilypond}
</pre></blockquote>

<p>If a greater number of systems is requested, a TeX conditional must
be used before the <code>\endinput</code>.  In this example, replace &lsquo;2&rsquo; by
the number of systems you want in the output.
</p>
<blockquote><pre class="example">\def\betweenLilyPondSystem#1{
    \ifnum#1&lt;2\else\expandafter\endinput\fi
}
</pre></blockquote>

<p>(Since <code>\endinput</code> immediately stops the processing of the current
input file we need <code>\expandafter</code> to delay the call of <code>\endinput</code>
after executing <code>\fi</code> so that the <code>\if</code>-<code>\fi</code> clause is
balanced.)
</p>
<p>Remember that the definition of <code>\betweenLilyPondSystem</code> is
effective until TeX quits the current group (such as the LaTeX
environment) or is overridden by another definition (which is, in
most cases, for the rest of the document).  To reset your
definition, write
</p>
<blockquote><pre class="example">\let\betweenLilyPondSystem\undefined
</pre></blockquote>

<p>in your LaTeX source.
</p>
<p>This may be simplified by defining a TeX macro
</p>
<blockquote><pre class="example">\def\onlyFirstNSystems#1{
    \def\betweenLilyPondSystem##1{%
      \ifnum##1&lt;#1\else\expandafter\endinput\fi}
}
</pre></blockquote>

<p>and then saying only how many systems you want before each fragment,
</p>
<blockquote><pre class="example">\onlyFirstNSystems{3}
\begin{lilypond}...\end{lilypond}
\onlyFirstNSystems{1}
\begin{lilypond}...\end{lilypond}
</pre></blockquote>


<a name="See-also-1"></a>
<h4 class="subsubheading">See also</h4>
<p>There are specific <code>lilypond-book</code> command line options and
other details to know when processing LaTeX documents, see
<a href="#invoking-lilypond_002dbook">Invoking <code>lilypond-book</code></a>.
</p>

<hr size="6">
<a name="Texinfo"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#lilypond_002dbook" title="Beginning of this chapter or previous chapter"> &lt;&lt; lilypond-book&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#external-programs" title="Next chapter">&nbsp;External programs &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#latex" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; LaTeX&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#integrating-music-and-text" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Integrating music and text&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#html" title="Next section in reading order" accesskey="n" rel="next">&nbsp;HTML &gt; </a>]</td></tr></table>
<a name="texinfo"></a>
<h3 class="subsection">3.2.2 Texinfo</h3>

<p>Texinfo is the standard format for documentation of the GNU project.  An
example of a Texinfo document is this manual.  The HTML, PDF, and Info
versions of the manual are made from the Texinfo document.
</p>
<p><code>lilypond-book</code> provides the following commands and environments to
include music into Texinfo files:
</p>
<ul>
<li>
the <code>@lilypond{...}</code> command, where you can directly enter short
lilypond code

</li><li>
the <code>@lilypond...@end lilypond</code> environment, where you can directly
enter longer lilypond code

</li><li>
the <code>@lilypondfile{...}</code> command to insert a lilypond file

</li><li>
the <code>@musicxmlfile{...}</code> command to insert a MusicXML file, which
will be processed by <code>musicxml2ly</code> and <code>lilypond</code>.

</li></ul>

<p>In the input file, music is specified with any of the following commands
</p>
<blockquote><pre class="example">@lilypond[options,go,here]
  YOUR LILYPOND CODE
@end lilypond

@lilypond[options,go,here]{ YOUR LILYPOND CODE }

@lilypondfile[options,go,here]{<var>filename</var>}

@musicxmlfile[options,go,here]{<var>filename</var>}
</pre></blockquote>

<p>Additionally, <code>@lilypondversion</code> displays the current version
of lilypond.
</p>
<p>When <code>lilypond-book</code> is run on it, this results in a Texinfo
file (with extension &lsquo;<tt>.texi</tt>&rsquo;) containing <code>@image</code> tags for
HTML, Info and printed output.  <code>lilypond-book</code> generates images
of the music in EPS and PDF formats for use in the printed output, and
in PNG format for use in HTML and Info output.
</p>
<p>We show two simple examples here.  A <code>lilypond</code> environment
</p>
<blockquote><pre class="example">@lilypond[fragment]
c' d' e' f' g'2 g'
@end lilypond
</pre></blockquote>

<p>produces
</p>
<p>
 <a href="49/lily-84022578.ly">
  <img align="middle"
       border="0"
       src="49/lily-84022578.png"
       alt="[image of music]">
 </a>
</p>



<p>The short version
</p>
<blockquote><pre class="example">@lilypond[fragment,staffsize=11]{&lt;c' e' g'&gt;}
</pre></blockquote>

<p>produces
</p>
<p>
 <a href="0c/lily-92b92a6d.ly">
  <img align="middle"
       border="0"
       src="0c/lily-92b92a6d.png"
       alt="[image of music]">
 </a>
</p>



<p>Contrary to LaTeX, <code>@lilypond{...}</code> does not generate an
in-line image.  It always gets a paragraph of its own.
</p>

<hr size="6">
<a name="HTML"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#lilypond_002dbook" title="Beginning of this chapter or previous chapter"> &lt;&lt; lilypond-book&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#external-programs" title="Next chapter">&nbsp;External programs &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#texinfo" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Texinfo&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#integrating-music-and-text" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Integrating music and text&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#docbook" title="Next section in reading order" accesskey="n" rel="next">&nbsp;DocBook &gt; </a>]</td></tr></table>
<a name="html"></a>
<h3 class="subsection">3.2.3 HTML</h3>

<p><code>lilypond-book</code> provides the following commands and environments to
include music in HTML files:
</p>
<ul>
<li>
the <code>&lt;lilypond ... /&gt;</code> command, where you can directly enter short
lilypond code

</li><li>
the <code>&lt;lilyond&gt;...&lt;/lilypond&gt;</code> environment, where you can directly
enter longer lilypond code

</li><li>
the <code>&lt;lilypondfile&gt;...&lt;/lilypondfile&gt;</code> command to insert a lilypond file

</li><li>
the <code>&lt;musicxmlfile&gt;...&lt;/musicxmlfile&gt;</code> command to insert a MusicXML
file, which will be processed by <code>musicxml2ly</code> and <code>lilypond</code>.

</li></ul>

<p>In the input file, music is specified with any of the following commands:
</p>
<blockquote><pre class="example">&lt;lilypond options go here&gt;
  YOUR LILYPOND CODE
&lt;/lilypond&gt;

&lt;lilypond options go here: YOUR LILYPOND CODE /&gt;

&lt;lilypondfile options go here&gt;<var>filename</var>&lt;/lilypondfile&gt;

&lt;musicxmlfile options go here&gt;<var>filename</var>&lt;/musicxmlfile&gt;
</pre></blockquote>

<p>For example, you can write
</p><blockquote><pre class="example">&lt;lilypond fragment relative=2&gt;
\key c \minor c4 es g2
&lt;/lilypond&gt;
</pre></blockquote>

<p><code>lilypond-book</code> then produces an HTML file with appropriate image
tags for the music fragments:
</p>
<p>
 <a href="c9/lily-7a8f0874.ly">
  <img align="middle"
       border="0"
       src="c9/lily-7a8f0874.png"
       alt="[image of music]">
 </a>
</p>



<p>For inline pictures, use <code>&lt;lilypond ... /&gt;</code>, where the options
are separated by a colon from the music, for example
</p>
<blockquote><pre class="example">Some music in &lt;lilypond relative=2: a b c/&gt; a line of text.
</pre></blockquote>

<p>To include separate files, say
</p>
<blockquote><pre class="example">&lt;lilypondfile <var>option1</var> <var>option2</var> ...&gt;<var>filename</var>&lt;/lilypondfile&gt;
</pre></blockquote>

<p><code>&lt;musicxmlfile&gt;</code> uses the same syntax as <code>&lt;lilypondfile&gt;</code>, but
simply references a MusicXML file rather than a LilyPond file.
</p>
<p>For a list of options to use with the <code>lilypond</code> or
<code>lilypondfile</code> tags, see <a href="#music-fragment-options">Music fragment options</a>.
</p>
<p>Additionally, <code>&lt;lilypondversion/&gt;</code> displays the current version
of lilypond.
</p>

<a name="index-titling-in-HTML"></a>
<a name="index-preview-image"></a>
<a name="index-thumbnail"></a>

<hr size="6">
<a name="DocBook"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#lilypond_002dbook" title="Beginning of this chapter or previous chapter"> &lt;&lt; lilypond-book&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#external-programs" title="Next chapter">&nbsp;External programs &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#html" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; HTML&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#integrating-music-and-text" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Integrating music and text&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#music-fragment-options" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Music fragment options &gt; </a>]</td></tr></table>
<a name="docbook"></a>
<h3 class="subsection">3.2.4 DocBook</h3>

<p>For inserting LilyPond snippets it is good to keep the conformity of our
DocBook document, thus allowing us to use DocBook editors, validation
etc.  So we don&rsquo;t use custom tags, only specify a convention based on the
standard DocBook elements.
</p>
<a name="Common-conventions"></a>
<h3 class="subheading">Common conventions</h3>

<p>For inserting all type of snippets we use the <code>mediaobject</code> and
<code>inlinemediaobject</code> element, so our snippets can be formatted
inline or not inline.  The snippet formatting options are always
provided in the <code>role</code> property of the innermost element (see in
next sections).  Tags are chosen to allow DocBook editors format the
content gracefully.  The DocBook files to be processed with
<code>lilypond-book</code> should have the extension &lsquo;<tt>.lyxml</tt>&rsquo;.
</p>
<a name="Including-a-LilyPond-file"></a>
<h3 class="subheading">Including a LilyPond file</h3>

<p>This is the most simple case.  We must use the &lsquo;<tt>.ly</tt>&rsquo; extension for
the included file, and insert it as a standard <code>imageobject</code>, with
the following structure:
</p>
<blockquote><pre class="example">&lt;mediaobject&gt;
  &lt;imageobject&gt;
    &lt;imagedata fileref=&quot;music1.ly&quot; role=&quot;printfilename&quot; /&gt;
  &lt;/imageobject&gt;
&lt;/mediaobject&gt;
</pre></blockquote>

<p>Note that you can use <code>mediaobject</code> or <code>inlinemediaobject</code>
as the outermost element as you wish.
</p>
<a name="Including-LilyPond-code"></a>
<h3 class="subheading">Including LilyPond code</h3>

<p>Including LilyPond code is possible by using a <code>programlisting</code>,
where the language is set to <code>lilypond</code> with the following
structure:
</p>
<blockquote><pre class="example">&lt;inlinemediaobject&gt;
  &lt;textobject&gt;
    &lt;programlisting language=&quot;lilypond&quot; role=&quot;fragment verbatim staffsize=16 ragged-right relative=2&quot;&gt;
\context Staff \with {
  \remove &quot;Time_signature_engraver&quot;
  \remove &quot;Clef_engraver&quot;}
  { c4( fis) }
    &lt;/programlisting&gt;
  &lt;/textobject&gt;
&lt;/inlinemediaobject&gt;
</pre></blockquote>

<p>As you can see, the outermost element is a <code>mediaobject</code> or
<code>inlinemediaobject</code>, and there is a <code>textobject</code> containing
the <code>programlisting</code> inside.
</p>
<a name="Processing-the-DocBook-document"></a>
<h3 class="subheading">Processing the DocBook document</h3>

<p>Running <code>lilypond-book</code> on our &lsquo;<tt>.lyxml</tt>&rsquo; file will create a
valid DocBook document to be further processed with &lsquo;<tt>.xml</tt>&rsquo;
extension.  If you use
<a href="http://dblatex.sourceforge.net">dblatex</a>, it will create a
PDF file from this document automatically.  For HTML (HTML Help,
JavaHelp etc.) generation you can use the official DocBook XSL
stylesheets, however, it is possible that you have to make some
customization for it.
</p>

<hr size="6">
<a name="Music-fragment-options"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#lilypond_002dbook" title="Beginning of this chapter or previous chapter"> &lt;&lt; lilypond-book&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#external-programs" title="Next chapter">&nbsp;External programs &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#docbook" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; DocBook&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#lilypond_002dbook" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;lilypond-book&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#invoking-lilypond_002dbook" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Invoking lilypond-book &gt; </a>]</td></tr></table>
<a name="music-fragment-options"></a>
<h2 class="section">3.3 Music fragment options</h2>

<p>In the following, a &lsquo;LilyPond command&rsquo; refers to any command described
in the previous sections which is handled by <code>lilypond-book</code> to
produce a music snippet.  For simplicity, LilyPond commands are only
shown in LaTeX syntax.
</p>
<p>Note that the option string is parsed from left to right; if an option
occurs multiple times, the last one is taken.
</p>
<p>The following options are available for LilyPond commands:
</p>
<dl compact="compact">
<dt> <code>staffsize=<var>ht</var></code></dt>
<dd><p>Set staff size to <var>ht</var>, which is measured in points.
</p>
</dd>
<dt> <code>ragged-right</code></dt>
<dd><p>Produce ragged-right lines with natural spacing, i.e.,
<code>ragged-right = ##t</code> is added to the LilyPond snippet.  Single-line
snippets will always be typeset by default as ragged-right, unless
<code>noragged-right</code> is explicitly given.
</p>
</dd>
<dt> <code>noragged-right</code></dt>
<dd><p>For single-line snippets, allow the staff length to be stretched to
equal that of the line width, i.e., <code>ragged-right = ##f</code> is
added to the LilyPond snippet.
</p>
</dd>
<dt> <code>line-width</code></dt>
<dt> <code>line-width=<var>size</var>\<var>unit</var></code></dt>
<dd><p>Set line width to <var>size</var>, using <var>unit</var> as units.  <var>unit</var> is
one of the following strings: <code>cm</code>, <code>mm</code>, <code>in</code>, or
<code>pt</code>.  This option affects LilyPond output (this is, the staff
length of the music snippet), not the text layout.
</p>
<p>If used without an argument, set line width to a default value (as
computed with a heuristic algorithm).
</p>
<p>If no <code>line-width</code> option is given, <code>lilypond-book</code> tries to
guess a default for <code>lilypond</code> environments which don&rsquo;t use the
<code>ragged-right</code> option.
</p>
</dd>
<dt> <code>papersize=<var>string</var></code></dt>
<dd><p>Where <var>string</var> is a paper size defined in &lsquo;<tt>scm/paper.scm</tt>&rsquo; i.e.
<code>a5</code>, <code>quarto</code>, <code>11x17</code> etc.
</p>
<p>Values not defined in &lsquo;<tt>scm/paper.scm</tt>&rsquo; will be ignored, a warning
will be posted and the snippet will be printed using the default
<code>a4</code> size.
</p>
</dd>
<dt> <code>notime</code></dt>
<dd><p>Do not print the time signature, and turns off the timing (time signature,
bar lines) in the score.
</p>
</dd>
<dt> <code>fragment</code></dt>
<dd><p>Make <code>lilypond-book</code> add some boilerplate code so that you can
simply enter, say,
</p>
<blockquote><pre class="example">c'4
</pre></blockquote>

<p>without <code>\layout</code>, <code>\score</code>, etc.
</p>
</dd>
<dt> <code>nofragment</code></dt>
<dd><p>Do not add additional code to complete LilyPond code in music snippets.
Since this is the default, <code>nofragment</code> is redundant normally.
</p>
</dd>
<dt> <code>indent=<var>size</var>\<var>unit</var></code></dt>
<dd><p>Set indentation of the first music system to <var>size</var>, using
<var>unit</var> as units.  <var>unit</var> is one of the following strings:
<code>cm</code>, <code>mm</code>, <code>in</code>, or <code>pt</code>.  This option affects
LilyPond, not the text layout.
</p>
</dd>
<dt> <code>noindent</code></dt>
<dd><p>Set indentation of the first music system to zero.  This option affects
LilyPond, not the text layout.  Since no indentation is the default,
<code>noindent</code> is redundant normally.
</p>
</dd>
<dt> <code>quote</code></dt>
<dd><p>Reduce line length of a music snippet by <em>2*0.4</em>in and put
the output into a quotation block.  The value &lsquo;0.4in&rsquo; can be
controlled with the <code>exampleindent</code> option.
</p>
</dd>
<dt> <code>exampleindent</code></dt>
<dd><p>Set the amount by which the <code>quote</code> option indents a music snippet.
</p>
</dd>
<dt> <code>relative</code></dt>
<dt> <code>relative=<var>n</var></code></dt>
<dd><p>Use relative octave mode.  By default, notes are specified relative to
middle&nbsp;C.  The optional integer argument specifies the octave of
the starting note, where the default <code>1</code> is middle C.
<code>relative</code> option only works when <code>fragment</code> option is set,
so <code>fragment</code> is automatically implied by <code>relative</code>,
regardless of the presence of any <code>(no)fragment</code> option in the
source.
</p></dd>
</dl>

<p>LilyPond also uses <code>lilypond-book</code> to produce its own
documentation.  To do that, some more obscure music fragment options are
available.
</p>
<dl compact="compact">
<dt> <code>verbatim</code></dt>
<dd><p>The argument of a LilyPond command is copied to the output file and
enclosed in a verbatim block, followed by any text given with the
<code>intertext</code> option (not implemented yet); then the actual music is
displayed.  This option does not work well with <code>\lilypond{}</code> if
it is part of a paragraph.
</p>
<p>If <code>verbatim</code> is used in a <code>lilypondfile</code> command, it is
possible to enclose verbatim only a part of the source file.  If the
source file contain a comment containing &lsquo;<samp>begin verbatim</samp>&rsquo; (without
quotes), quoting the source in the verbatim block will start after the
last occurrence of such a comment; similarly, quoting the source verbatim
will stop just before the first occurrence of a comment containing
&lsquo;<samp>end verbatim</samp>&rsquo;, if there is any.  In the following source file
example, the music will be interpreted in relative mode, but the
verbatim quote will not show the <code>relative</code> block, i.e.
</p>
<blockquote><pre class="example">\relative c' { % begin verbatim
  c4 e2 g4
  f2 e % end verbatim
}
</pre></blockquote>

<p>will be printed with a verbatim block like
</p>
<blockquote><pre class="example">  c4 e2 g4
  f2 e
</pre></blockquote>

<p>If you would like to translate comments and variable names in verbatim
output but not in the sources, you may set the environment variable
<code>LYDOC_LOCALEDIR</code> to a directory path; the directory should
contain a tree of &lsquo;<tt>.mo</tt>&rsquo; message catalogs with <code>lilypond-doc</code>
as a domain.
</p>
</dd>
<dt> <code>addversion</code></dt>
<dd><p>(Only for Texinfo output.)  Prepend line <code>\version
@w{&quot;@version{}&quot;}</code> to <code>verbatim</code> output.
</p>
</dd>
<dt> <code>texidoc</code></dt>
<dd><p>(Only for Texinfo output.)  If <code>lilypond</code> is called with the
&lsquo;<samp>--header=texidoc</samp>&rsquo; option, and the file to be processed is
called &lsquo;<tt>foo.ly</tt>&rsquo;, it creates a file &lsquo;<tt>foo.texidoc</tt>&rsquo; if there
is a <code>texidoc</code> field in the <code>\header</code>.  The <code>texidoc</code>
option makes <code>lilypond-book</code> include such files, adding its
contents as a documentation block right before the music snippet (but
outside the <code>example</code> environment generated by a <code>quote</code>
option).
</p>
<p>Assuming the file &lsquo;<tt>foo.ly</tt>&rsquo; contains
</p>
<blockquote><pre class="example">\header {
  texidoc = &quot;This file demonstrates a single note.&quot;
}
{ c'4 }
</pre></blockquote>

<p>and we have this in our Texinfo document &lsquo;<tt>test.texinfo</tt>&rsquo;
</p>
<blockquote><pre class="example">@lilypondfile[texidoc]{foo.ly}
</pre></blockquote>

<p>the following command line gives the expected result
</p>
<blockquote><pre class="example">lilypond-book --pdf --process=&quot;lilypond \
  -dbackend=eps --header=texidoc&quot; test.texinfo
</pre></blockquote>

<p>Most LilyPond test documents (in the &lsquo;<tt>input</tt>&rsquo; directory of the
distribution) are small &lsquo;<tt>.ly</tt>&rsquo; files which look exactly like this.
</p>
<p>For localization purpose, if the Texinfo document contains
<code>@documentlanguage <var>LANG</var></code> and &lsquo;<tt>foo.ly</tt>&rsquo; header
contains a <code>texidoc<var>LANG</var></code> field, and if <code>lilypond</code>
is called with &lsquo;<samp>--header=texidoc<var>LANG</var></samp>&rsquo;, then
&lsquo;<tt>foo.texidoc<var>LANG</var></tt>&rsquo; will be included instead of
&lsquo;<tt>foo.texidoc</tt>&rsquo;.
</p>
</dd>
<dt> <code>doctitle</code></dt>
<dd><p>(Only for Texinfo output.) This option works similarly to
<code>texidoc</code> option: if <code>lilypond</code> is called with the
&lsquo;<samp>--header=doctitle</samp>&rsquo; option, and the file to be processed is
called &lsquo;<tt>foo.ly</tt>&rsquo; and contains a <code>doctitle</code> field in the
<code>\header</code>, it creates a file &lsquo;<tt>foo.doctitle</tt>&rsquo;.  When
<code>doctitle</code> option is used, the contents of &lsquo;<tt>foo.doctitle</tt>&rsquo;,
which should be a single line of <var>text</var>, is inserted in the
Texinfo document as <code>@lydoctitle <var>text</var></code>.
<code>@lydoctitle</code> should be a macro defined in the Texinfo document.
The same remark about <code>texidoc</code> processing with localized
languages also applies to <code>doctitle</code>.
</p>
</dd>
<dt> <code>nogettext</code></dt>
<dd><p>(Only for Texinfo output.) Do not translate comments and variable
names in the snippet quoted verbatim.
</p>
</dd>
<dt> <code>printfilename</code></dt>
<dd><p>If a LilyPond input file is included with <code>\lilypondfile</code>, print
the file name right before the music snippet.  For HTML output, this
is a link.  Only the base name of the file is printed, i.e. the
directory part of the file path is stripped.
</p>
</dd>
</dl>


<hr size="6">
<a name="Invoking-lilypond_002dbook"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#lilypond_002dbook" title="Beginning of this chapter or previous chapter"> &lt;&lt; lilypond-book&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#external-programs" title="Next chapter">&nbsp;External programs &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#music-fragment-options" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Music fragment options&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#lilypond_002dbook" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;lilypond-book&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#filename-extensions" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Filename extensions &gt; </a>]</td></tr></table>
<a name="invoking-lilypond_002dbook"></a>
<h2 class="section">3.4 Invoking <code>lilypond-book</code></h2>

<p><code>lilypond-book</code> produces a file with one of the following
extensions: &lsquo;<tt>.tex</tt>&rsquo;, &lsquo;<tt>.texi</tt>&rsquo;, &lsquo;<tt>.html</tt>&rsquo; or &lsquo;<tt>.xml</tt>&rsquo;,
depending on the output format.  All of &lsquo;<tt>.tex</tt>&rsquo;, &lsquo;<tt>.texi</tt>&rsquo; and
&lsquo;<tt>.xml</tt>&rsquo; files need further processing.
</p>
<a name="Format_002dspecific-instructions"></a>
<h3 class="subheading">Format-specific instructions</h3>

<a name="LaTeX-3"></a>
<h4 class="subsubheading">LaTeX</h4>

<p>There are two ways of processing your LaTeX document for printing or
publishing: getting a PDF file directly with PDFLaTeX, or getting a
PostScript file with LaTeX via a DVI to PostScript translator like
<code>dvips</code>.  The first way is simpler and recommended<sup><a name="DOCF4" href="#FOOT4">4</a></sup>, and whichever
way you use, you can easily convert between PostScript and PDF with
tools, like <code>ps2pdf</code> and <code>pdf2ps</code> included in
Ghostscript package.
</p>
<p>To produce a PDF file through PDFLaTeX, use
</p>
<blockquote><pre class="example">lilypond-book --pdf yourfile.lytex
pdflatex yourfile.tex
</pre></blockquote>

<a name="index-outline-fonts"></a>
<a name="index-type1-fonts"></a>
<a name="index-dvips"></a>
<a name="index-invoking-dvips"></a>
<p>To produce PDF output via LaTeX/<code>dvips</code>/<code>ps2pdf</code>, you
should do
</p>
<blockquote><pre class="example">lilypond-book yourfile.lytex
latex yourfile.tex
dvips -Ppdf yourfile.dvi
ps2pdf yourfile.ps
</pre></blockquote>

<p>The &lsquo;<tt>.dvi</tt>&rsquo; file created by this process will not contain
 note heads.  This is normal; if you follow the instructions, they
will be included in the &lsquo;<tt>.ps</tt>&rsquo; and &lsquo;<tt>.pdf</tt>&rsquo; files.
</p>
<p>Running <code>dvips</code> may produce some warnings about fonts; these
are harmless and may be ignored.  If you are running <code>latex</code> in
twocolumn mode, remember to add &lsquo;<samp>-t landscape</samp>&rsquo; to the
<code>dvips</code> options.
</p>
<a name="Known-issues-and-warnings"></a>
<h4 class="subsubheading">Known issues and warnings</h4>
<p>The <code>\pageBreak</code> command will not work within a
<code>\begin{lilypond} &hellip; \end{lilypond}</code> environment.
</p>
<p>Many <code>\paper</code> block variables will also not work within a
<code>\begin{lilypond} &hellip; \end{lilypond}</code> environment.  Use
<code>\newcommand</code> with <code>\betweenLilyPondSystem</code> in the preamble;
</p>
<blockquote><pre class="example">\newcommand{\betweenLilyPondSystem}[1]{\vspace{36mm}\linebreak}
</pre></blockquote>


<a name="Texinfo-3"></a>
<h4 class="subsubheading">Texinfo</h4>

<p>To produce a Texinfo document (in any output format), follow the normal
procedures for Texinfo; this is, either call <code>texi2pdf</code> or
<code>texi2dvi</code> or <code>makeinfo</code>, depending on the output format
you want to create.
See the documentation of Texinfo for further details.
</p>

<a name="Command-line-options"></a>
<h3 class="subheading">Command line options</h3>

<p><code>lilypond-book</code> accepts the following command line options:
</p>
<dl compact="compact">
<dt> <code>-f <var>format</var></code></dt>
<dt> <code>--format=<var>format</var></code></dt>
<dd><p>Specify the document type to process: <code>html</code>, <code>latex</code>,
<code>texi</code> (the default) or <code>docbook</code>.  If this option is missing,
<code>lilypond-book</code> tries to detect the format automatically, see
<a href="#filename-extensions">Filename extensions</a>.  Currently, <code>texi</code> is the same as
<code>texi-html</code>.
</p>

</dd>
<dt> <code>-F <var>filter</var></code></dt>
<dt> <code>--filter=<var>filter</var></code></dt>
<dd><p>Pipe snippets through <var>filter</var>.  <code>lilypond-book</code> will
not &ndash;filter and &ndash;process at the same time.  For example,
</p>
<blockquote><pre class="example">lilypond-book --filter='convert-ly --from=2.0.0 -' my-book.tely
</pre></blockquote>

</dd>
<dt> <code>-h</code></dt>
<dt> <code>--help</code></dt>
<dd><p>Print a short help message.
</p>
</dd>
<dt> <code>-I <var>dir</var></code></dt>
<dt> <code>--include=<var>dir</var></code></dt>
<dd><p>Add <var>dir</var> to the include path.  <code>lilypond-book</code> also looks
for already compiled snippets in the include path, and does not write
them back to the output directory, so in some cases it is necessary to
invoke further processing commands such as <code>makeinfo</code> or
<code>latex</code> with the same &lsquo;<samp>-I <var>dir</var></samp>&rsquo; options.
</p>
</dd>
<dt> <code>-l <var>loglevel</var></code></dt>
<dt> <code>--loglevel=<var>loglevel</var></code></dt>
<dd><p>Set the output verbosity to <var>loglevel</var>. Possible values are <code>NONE</code>,
<code>ERROR</code>, <code>WARNING</code>, <code>PROGRESS</code> (default) and <code>DEBUG</code>. If
this option is not used, and the environment variable
<code>LILYPOND_BOOK_LOGLEVEL</code> is set, its value is used as the loglevel.
</p>
</dd>
<dt> <code>-o <var>dir</var></code></dt>
<dt> <code>--output=<var>dir</var></code></dt>
<dd><p>Place generated files in directory <var>dir</var>.  Running
<code>lilypond-book</code> generates lots of small files that LilyPond will
process.  To avoid all that garbage in the source directory, use the
&lsquo;<samp>--output</samp>&rsquo; command line option, and change to that directory
before running <code>latex</code> or <code>makeinfo</code>.
</p>
<blockquote><pre class="example">lilypond-book --output=out yourfile.lytex
cd out
...
</pre></blockquote>

</dd>
<dt> <code>--skip-lily-check</code></dt>
<dd><p>Do not fail if no lilypond output is found.  It is used for LilyPond
Info documentation without images.
</p>
</dd>
<dt> <code>--skip-png-check</code></dt>
<dd><p>Do not fail if no PNG images are found for EPS files.  It is used for
LilyPond Info documentation without images.
</p>
</dd>
<dt> <code>--lily-output-dir=<var>dir</var></code></dt>
<dd><p>Write lily-XXX files to directory <var>dir</var>, link into &lsquo;<samp>--output</samp>&rsquo;
directory.  Use this option to save building time for documents in
different directories which share a lot of identical snippets.
</p>
</dd>
<dt> <code>--lily-loglevel=<var>loglevel</var></code></dt>
<dd><p>Set the output verbosity of the invoked <code>lilypond</code> calls to
<var>loglevel</var>.  Possible values are <code>NONE</code>, <code>ERROR</code>,
<code>WARNING</code>, <code>BASIC_PROGRESS</code>, <code>PROGRESS</code>, <code>INFO</code>
(default) and <code>DEBUG</code>.  If this option is not used, and the
environment variable <code>LILYPOND_LOGLEVEL</code> is set, its value is used
as the loglevel.
</p>

</dd>
<dt> <code>--info-images-dir=<var>dir</var></code></dt>
<dd><p>Format Texinfo output so that Info will look for images of music in
<var>dir</var>.
</p>
</dd>
<dt> <code>--latex-program=<var>prog</var></code></dt>
<dd><p>Run executable <code>prog</code> instead of <code>latex</code>.  This is
useful if your document is processed with <code>xelatex</code>, for
example.
</p>
</dd>
<dt> <code>--left-padding=<var>amount</var></code></dt>
<dd><p>Pad EPS boxes by this much.  <var>amount</var> is measured in millimeters,
and is 3.0 by default.  This option should be used if the lines of
music stick out of the right margin.
</p>
<p>The width of a tightly clipped system can vary, due to notation
elements that stick into the left margin, such as bar numbers and
instrument names.  This option will shorten each line and move each
line to the right by the same amount.
</p>
</dd>
<dt> <code>-P <var>command</var></code></dt>
<dt> <code>--process=<var>command</var></code></dt>
<dd><p>Process LilyPond snippets using <var>command</var>.  The default command is
<code>lilypond</code>.  <code>lilypond-book</code> will not &lsquo;<samp>--filter</samp>&rsquo; and
&lsquo;<samp>--process</samp>&rsquo; at the same time.
</p>
</dd>
<dt> <code>--pdf</code></dt>
<dd><p>Create PDF files for use with PDFLaTeX.
</p>
</dd>
<dt> <code>--redirect-lilypond-output</code></dt>
<dd><p>By default, output is displayed on the terminal.  This option redirects
all output to log files in the same directory as the source files.
</p>
</dd>
<dt> <code>--use-source-file-names</code></dt>
<dd><p>Write snippet output files with the same base name as their source file.
This option works only for snippets included with <code>lilypondfile</code>
and only if directories implied by &lsquo;<samp>--output-dir</samp>&rsquo; and
&lsquo;<samp>--lily-output-dir</samp>&rsquo; options are different.
</p>
</dd>
<dt> <code>-V</code></dt>
<dt> <code>--verbose</code></dt>
<dd><p>Be verbose. This is equivalent to <code>--loglevel=DEBUG</code>.
</p>
</dd>
<dt> <code>-v</code></dt>
<dt> <code>--version</code></dt>
<dd><p>Print version information.
</p></dd>
</dl>



<a name="Known-issues-and-warnings-6"></a>
<h4 class="subsubheading">Known issues and warnings</h4>

<p>The Texinfo command <code>@pagesizes</code> is not interpreted.  Similarly,
LaTeX commands that change margins and line widths after the preamble
are ignored.
</p>
<p>Only the first <code>\score</code> of a LilyPond block is processed.
</p>

<hr size="6">
<a name="Filename-extensions"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#lilypond_002dbook" title="Beginning of this chapter or previous chapter"> &lt;&lt; lilypond-book&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#external-programs" title="Next chapter">&nbsp;External programs &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#invoking-lilypond_002dbook" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Invoking lilypond-book&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#lilypond_002dbook" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;lilypond-book&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#lilypond_002dbook-templates" title="Next section in reading order" accesskey="n" rel="next">&nbsp;lilypond-book templates &gt; </a>]</td></tr></table>
<a name="filename-extensions"></a>
<h2 class="section">3.5 Filename extensions</h2>

<p>You can use any filename extension for the input file, but if you do not
use the recommended extension for a particular format you may need to
manually specify the output format; for details, see <a href="#invoking-lilypond_002dbook">Invoking <code>lilypond-book</code></a>.  Otherwise, <code>lilypond-book</code> automatically
selects the output format based on the input filename&rsquo;s extension.
</p>
<blockquote><table>
<tr><td width="20%"><p> <strong>extension</strong> </p></td><td width="50%"><p> <strong>output format</strong>
</p></td></tr>
<tr><td width="20%"></td></tr>
<tr><td width="20%"><p> &lsquo;<tt>.html</tt>&rsquo; </p></td><td width="50%"><p> HTML
</p></td></tr>
<tr><td width="20%"><p> &lsquo;<tt>.htmly</tt>&rsquo; </p></td><td width="50%"><p> HTML
</p></td></tr>
<tr><td width="20%"><p> &lsquo;<tt>.itely</tt>&rsquo; </p></td><td width="50%"><p> Texinfo
</p></td></tr>
<tr><td width="20%"><p> &lsquo;<tt>.latex</tt>&rsquo; </p></td><td width="50%"><p> LaTeX
</p></td></tr>
<tr><td width="20%"><p> &lsquo;<tt>.lytex</tt>&rsquo; </p></td><td width="50%"><p> LaTeX
</p></td></tr>
<tr><td width="20%"><p> &lsquo;<tt>.lyxml</tt>&rsquo; </p></td><td width="50%"><p> DocBook
</p></td></tr>
<tr><td width="20%"><p> &lsquo;<tt>.tely</tt>&rsquo; </p></td><td width="50%"><p> Texinfo
</p></td></tr>
<tr><td width="20%"><p> &lsquo;<tt>.tex</tt>&rsquo; </p></td><td width="50%"><p> LaTeX
</p></td></tr>
<tr><td width="20%"><p> &lsquo;<tt>.texi</tt>&rsquo; </p></td><td width="50%"><p> Texinfo
</p></td></tr>
<tr><td width="20%"><p> &lsquo;<tt>.texinfo</tt>&rsquo; </p></td><td width="50%"><p> Texinfo
</p></td></tr>
<tr><td width="20%"><p> &lsquo;<tt>.xml</tt>&rsquo; </p></td><td width="50%"><p> HTML
</p></td></tr>
</table>
</blockquote>

<p>If you use the same filename extension for the input file than the
extension <code>lilypond-book</code> uses for the output file, and if the
input file is in the same directory as <code>lilypond-book</code> working
directory, you must use &lsquo;<samp>--output</samp>&rsquo; option to make
<code>lilypond-book</code> running, otherwise it will exit with an error
message like &ldquo;Output would overwrite input file&rdquo;.
</p>

<hr size="6">
<a name="lilypond_002dbook-templates"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#lilypond_002dbook" title="Beginning of this chapter or previous chapter"> &lt;&lt; lilypond-book&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#external-programs" title="Next chapter">&nbsp;External programs &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#filename-extensions" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Filename extensions&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#lilypond_002dbook" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;lilypond-book&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#lilypond_002dbook-templates" title="Next section in reading order" accesskey="n" rel="next">&nbsp; &gt; </a>]</td></tr></table>
<a name="lilypond_002dbook-templates"></a>
<h2 class="section">3.6 lilypond-book templates</h2>

<p>These templates are for use with <code>lilypond-book</code>.  If you&rsquo;re not familiar
with this program, please refer to
<a href="#lilypond_002dbook">Running <code>lilypond-book</code></a>.
</p>
<hr size="6">
<a name="lilypond_002dbook-templates"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#lilypond_002dbook" title="Beginning of this chapter or previous chapter"> &lt;&lt; lilypond-book&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#external-programs" title="Next chapter">&nbsp;External programs &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#lilypond_002dbook-templates" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; lilypond-book templates&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#lilypond_002dbook-templates" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;lilypond-book templates&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#lilypond_002dbook-templates" title="Next section in reading order" accesskey="n" rel="next">&nbsp; &gt; </a>]</td></tr></table>
<h3 class="subsection">3.6.1 LaTeX</h3>

<p>You can include LilyPond fragments in a LaTeX document.
</p>
<blockquote><pre class="example">\documentclass[]{article}

\begin{document}

Normal LaTeX text.

\begin{lilypond}
\relative c'' {
  a4 b c d
}
\end{lilypond}

More LaTeX text, and options in square brackets.

\begin{lilypond}[fragment,relative=2,quote,staffsize=26,verbatim]
d4 c b a
\end{lilypond}
\end{document}
</pre></blockquote>

<hr size="6">
<a name="lilypond_002dbook-templates"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#lilypond_002dbook" title="Beginning of this chapter or previous chapter"> &lt;&lt; lilypond-book&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#external-programs" title="Next chapter">&nbsp;External programs &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#lilypond_002dbook-templates" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; &nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#lilypond_002dbook-templates" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;lilypond-book templates&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#lilypond_002dbook-templates" title="Next section in reading order" accesskey="n" rel="next">&nbsp; &gt; </a>]</td></tr></table>
<h3 class="subsection">3.6.2 Texinfo</h3>

<p>You can include LilyPond fragments in Texinfo; in fact, this entire manual
is written in Texinfo.
</p>
<blockquote><pre class="example">\input texinfo @node Top
@top

Texinfo text

@lilypond
\relative c' {
  a4 b c d
}
@end lilypond

More Texinfo text, and options in brackets.

@lilypond[verbatim,fragment,ragged-right]
d4 c b a
@end lilypond

@bye
</pre></blockquote>


<hr size="6">
<a name="lilypond_002dbook-templates"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#lilypond_002dbook" title="Beginning of this chapter or previous chapter"> &lt;&lt; lilypond-book&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#external-programs" title="Next chapter">&nbsp;External programs &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#lilypond_002dbook-templates" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; &nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#lilypond_002dbook-templates" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;lilypond-book templates&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#lilypond_002dbook-templates" title="Next section in reading order" accesskey="n" rel="next">&nbsp; &gt; </a>]</td></tr></table>
<h3 class="subsection">3.6.3 html</h3>

<blockquote><pre class="example">&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;&gt;
&lt;!-- header_tag --&gt;
&lt;HTML&gt;
&lt;body&gt;

&lt;p&gt;
Documents for lilypond-book may freely mix music and text.  For
example,
&lt;lilypond&gt;
\relative c'' {
  a4 b c d
}
&lt;/lilypond&gt;
&lt;/p&gt;

&lt;p&gt;
Another bit of lilypond, this time with options:

&lt;lilypond fragment quote staffsize=26 verbatim&gt;
a4 b c d
&lt;/lilypond&gt;
&lt;/p&gt;

&lt;/body&gt;
&lt;/html&gt;


</pre></blockquote>

<hr size="6">
<a name="lilypond_002dbook-templates"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#lilypond_002dbook" title="Beginning of this chapter or previous chapter"> &lt;&lt; lilypond-book&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#external-programs" title="Next chapter">&nbsp;External programs &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#lilypond_002dbook-templates" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; &nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#lilypond_002dbook-templates" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;lilypond-book templates&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#sharing-the-table-of-contents" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Sharing the table of contents &gt; </a>]</td></tr></table>
<h3 class="subsection">3.6.4 xelatex</h3>

<pre class="verbatim">\documentclass{article}
\usepackage{ifxetex}
\ifxetex
%xetex specific stuff
\usepackage{xunicode,fontspec,xltxtra}
\setmainfont[Numbers=OldStyle]{Times New Roman}
\setsansfont{Arial}
\else
%This can be empty if you are not going to use pdftex
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage{mathptmx}%Times
\usepackage{helvet}%Helvetica
\fi
%Here you can insert all packages that pdftex also understands
\usepackage[ngerman,finnish,english]{babel}
\usepackage{graphicx}

\begin{document}
\title{A short document with LilyPond and xelatex}
\maketitle

Normal \textbf{font} commands inside the \emph{text} work,
because they \textsf{are supported by \LaTeX{} and XeteX.}
If you want to use specific commands like \verb+\XeTeX+, you
should include them again in a \verb+\ifxetex+ environment.
You can use this to print the \ifxetex \XeTeX{} command \else
XeTeX command \fi which is not known to normal \LaTeX .

In normal text you can easily use LilyPond commands, like this:

\begin{lilypond}
{a2 b c'8 c' c' c'}
\end{lilypond}

\noindent
and so on.

The fonts of snippets set with LilyPond will have to be set from
inside
of the snippet.  For this you should read the AU on how to use
lilypond-book.

\selectlanguage{ngerman}
Auch Umlaute funktionieren ohne die \LaTeX -Befehle, wie auch alle
anderen
seltsamen Zeichen: __ ______, wenn sie von der Schriftart
unterst__tzt werden.
\end{document}
</pre>

<hr size="6">
<a name="Sharing-the-table-of-contents"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#lilypond_002dbook" title="Beginning of this chapter or previous chapter"> &lt;&lt; lilypond-book&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#external-programs" title="Next chapter">&nbsp;External programs &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#lilypond_002dbook-templates" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; &nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#lilypond_002dbook" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;lilypond-book&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#alternate-methods-of-mixing-text-and-music" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Alternate methods of mixing text and music &gt; </a>]</td></tr></table>
<a name="sharing-the-table-of-contents"></a>
<h2 class="section">3.7 Sharing the table of contents</h2>

<p>These functions already exist in the OrchestralLily package:
</p>
<blockquote><pre class="example"><a href="http://repo.or.cz/w/orchestrallily.git">http://repo.or.cz/w/orchestrallily.git</a>
</pre></blockquote>

<p>For greater flexibility in text handling, some users prefer to
export the table of contents from lilypond and read it into
LaTeX.
</p>
<a name="Exporting-the-ToC-from-LilyPond"></a>
<h4 class="subsubheading">Exporting the ToC from LilyPond</h4>

<p>This assumes that your score has multiple movements in the same lilypond
output file.
</p>
<table><tr><td>&nbsp;</td><td><pre class="smallexample">#(define (oly:create-toc-file layout pages)
  (let* ((label-table (ly:output-def-lookup layout 'label-page-table)))
    (if (not (null? label-table))
      (let* ((format-line (lambda (toc-item)
             (let* ((label (car toc-item))
                    (text  (caddr toc-item))
                    (label-page (and (list? label-table)
                                     (assoc label label-table)))
                    (page (and label-page (cdr label-page))))
               (format #f &quot;~a, section, 1, {~a}, ~a&quot; page text label))))
             (formatted-toc-items (map format-line (toc-items)))
             (whole-string (string-join formatted-toc-items &quot;,\n&quot;))
             (output-name (ly:parser-output-name parser))
             (outfilename (format &quot;~a.toc&quot; output-name))
             (outfile (open-output-file outfilename)))
        (if (output-port? outfile)
            (display whole-string outfile)
            (ly:warning (_ &quot;Unable to open output file ~a for the TOC information&quot;) outfilename))
        (close-output-port outfile)))))

\paper {
  #(define (page-post-process layout pages) (oly:create-toc-file layout pages))
}
</pre></td></tr></table>

<a name="Importing-the-ToC-into-LaTeX"></a>
<h4 class="subsubheading">Importing the ToC into LaTeX</h4>

<p>In LaTeX, the header should include:
</p>
<table><tr><td>&nbsp;</td><td><pre class="smallexample">\usepackage{pdfpages}
\includescore{nameofthescore}
</pre></td></tr></table>

<p>where <code>\includescore</code> is defined as:
</p>
<table><tr><td>&nbsp;</td><td><pre class="smallexample">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% \includescore{PossibleExtension}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Read in the TOC entries for a PDF file from the corresponding .toc file.
% This requires some heave latex tweaking, since reading in things from a file
% and inserting it into the arguments of a macro is not (easily) possible

% Solution by Patrick Fimml on #latex on April 18, 2009:
% \readfile{filename}{\variable}
% reads in the contents of the file into \variable (undefined if file
% doesn't exist)
\newread\readfile@f
\def\readfile@line#1{%
{\catcode`\^^M=10\global\read\readfile@f to \readfile@tmp}%
\edef\do{\noexpand\g@addto@macro{\noexpand#1}{\readfile@tmp}}\do%
\ifeof\readfile@f\else%
\readfile@line{#1}%
\fi%
}
\def\readfile#1#2{%
\openin\readfile@f=#1 %
\ifeof\readfile@f%
\typeout{No TOC file #1 available!}%
\else%
\gdef#2{}%
\readfile@line{#2}%
\fi
\closein\readfile@f%
}%


\newcommand{\includescore}[1]{
\def\oly@fname{\oly@basename\@ifmtarg{#1}{}{_#1}}
\let\oly@addtotoc\undefined
\readfile{\oly@xxxxxxxxx}{\oly@addtotoc}
\ifx\oly@addtotoc\undefined
\includepdf[pages=-]{\oly@fname}
\else
\edef\includeit{\noexpand\includepdf[pages=-,addtotoc={\oly@addtotoc}]
{\oly@fname}}\includeit
\fi
}
</pre></td></tr></table>


<hr size="6">
<a name="Alternate-methods-of-mixing-text-and-music"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#lilypond_002dbook" title="Beginning of this chapter or previous chapter"> &lt;&lt; lilypond-book&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#external-programs" title="Next chapter">&nbsp;External programs &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#sharing-the-table-of-contents" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Sharing the table of contents&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#lilypond_002dbook" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;lilypond-book&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#external-programs" title="Next section in reading order" accesskey="n" rel="next">&nbsp;External programs &gt; </a>]</td></tr></table>
<a name="alternate-methods-of-mixing-text-and-music"></a>
<h2 class="section">3.8 Alternative methods of mixing text and music</h2>

<p>Other means of mixing text and music (without
<code>lilypond-book</code>) are discussed in
<a href="#lilypond-output-in-other-programs">LilyPond output in other programs</a>.
</p>




<hr size="6">
<a name="External-programs"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#lilypond_002dbook" title="Beginning of this chapter or previous chapter"> &lt;&lt; lilypond-book&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#suggestions-for-writing-files" title="Next chapter">&nbsp;Suggestions for writing files &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#alternate-methods-of-mixing-text-and-music" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Alternate methods of mixing text and music&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#index" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Top&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#point-and-click" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Point and click &gt; </a>]</td></tr></table>
<a name="external-programs"></a>
<h1 class="chapter">4. External programs</h1>

<p>LilyPond can interact with other programs in various ways.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#point-and-click" accesskey="1">4.1 Point and click</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#text-editor-support" accesskey="2">4.2 Text editor support</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#converting-from-other-formats" accesskey="3">4.3 Converting from other formats</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#lilypond-output-in-other-programs" accesskey="4">4.4 LilyPond output in other programs</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#independent-includes" accesskey="5">4.5 Independent <code>include</code>s</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>


<hr size="6">
<a name="Point-and-click"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#external-programs" title="Beginning of this chapter or previous chapter"> &lt;&lt; External programs&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#suggestions-for-writing-files" title="Next chapter">&nbsp;Suggestions for writing files &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#external-programs" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; External programs&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#external-programs" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;External programs&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#enabling-point-and-click" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Enabling point and click &gt; </a>]</td></tr></table>
<a name="point-and-click"></a>
<h2 class="section">4.1 Point and click</h2>

<p>Point and click adds links to pdf documents for certain music
elements.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#enabling-point-and-click" accesskey="1">Enabling point and click</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#selective-point_002dand_002dclick" accesskey="2">Selective point-and-click</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr size="6">
<a name="Enabling-point-and-click"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#external-programs" title="Beginning of this chapter or previous chapter"> &lt;&lt; External programs&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#suggestions-for-writing-files" title="Next chapter">&nbsp;Suggestions for writing files &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#point-and-click" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Point and click&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#point-and-click" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Point and click&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#selective-point_002dand_002dclick" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Selective point-and-click &gt; </a>]</td></tr></table>
<a name="enabling-point-and-click"></a>
<h3 class="unnumberedsubsec">Enabling point and click</h3>

<a name="index-point-and-click"></a>

<p>Point and click lets you find notes in the input by clicking on them
in the PDF viewer.  This makes it easier to find input that causes
some error in the sheet music.
</p>
<p>When this functionality is active, LilyPond adds hyperlinks to the PDF
file.  These hyperlinks are sent to the web-browser, which opens a
text-editor with the cursor in the right place.
</p>
<p>To make this chain work, you should configure your PDF viewer to
follow hyperlinks using the &lsquo;<tt>lilypond-invoke-editor</tt>&rsquo; script
supplied with LilyPond.
</p>
<p>For Xpdf on UNIX, the following should be present in
&lsquo;<tt>xpdfrc</tt>&rsquo;.  On UNIX, this file is found either in
&lsquo;<tt>/etc/xpdfrc</tt>&rsquo; or as &lsquo;<tt>$HOME/.xpdfrc</tt>&rsquo;.
</p>
<blockquote><pre class="example">urlCommand     &quot;lilypond-invoke-editor %s&quot;
</pre></blockquote>

<p>The program &lsquo;<tt>lilypond-invoke-editor</tt>&rsquo; is a small helper
program.  It will invoke an editor for the special <code>textedit</code>
URIs, and run a web browser for others.  It tests the environment
variable <code>EDITOR</code> for the following patterns,
</p>
<dl compact="compact">
<dt> <code>emacs</code></dt>
<dd><p>  this will invoke
</p><blockquote><pre class="example">emacsclient --no-wait +<var>line</var>:<var>column</var> <var>file</var>
</pre></blockquote>
</dd>
<dt> <code>gvim</code></dt>
<dd><p>  this will invoke
</p><blockquote><pre class="example">gvim --remote +:<var>line</var>:norm<var>column</var> <var>file</var>
</pre></blockquote>

</dd>
<dt> <code>nedit</code></dt>
<dd><p>this will invoke
</p><blockquote><pre class="example">  nc -noask +<var>line</var> <var>file</var>'
</pre></blockquote>
</dd>
</dl>

<p>The environment variable <code>LYEDITOR</code> is used to override this.  It
contains the command line to start the editor, where <code>%(file)s</code>,
<code>%(column)s</code>, <code>%(line)s</code> is replaced with the file, column
and line respectively.  The  setting
</p>
<blockquote><pre class="example">emacsclient --no-wait +%(line)s:%(column)s %(file)s
</pre></blockquote>

<p>for <code>LYEDITOR</code> is equivalent to the standard emacsclient
invocation.
</p>

<a name="index-file-size_002c-output"></a>

<p>The point and click links enlarge the output files significantly.  For
reducing the size of PDF and PS files, point and click may be switched
off by issuing
</p>
<blockquote><pre class="example">\pointAndClickOff
</pre></blockquote>

<p>in a &lsquo;<tt>.ly</tt>&rsquo; file.  Point and click may be explicitly enabled with
</p>
<blockquote><pre class="example">\pointAndClickOn
</pre></blockquote>

<p>Alternately, you may disable point and click with a command-line
option:
</p>
<blockquote><pre class="example">lilypond -dno-point-and-click file.ly
</pre></blockquote>

<div class="warning"><p><strong>Note:</strong> You should always turn off point and click in any LilyPond
files to be distributed to avoid including path information about
your computer in the .pdf file, which can pose a security risk.
</p>
</div>
<hr size="6">
<a name="Selective-point_002dand_002dclick"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#external-programs" title="Beginning of this chapter or previous chapter"> &lt;&lt; External programs&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#suggestions-for-writing-files" title="Next chapter">&nbsp;Suggestions for writing files &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#enabling-point-and-click" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Enabling point and click&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#point-and-click" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Point and click&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#text-editor-support" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Text editor support &gt; </a>]</td></tr></table>
<a name="selective-point_002dand_002dclick"></a>
<h3 class="unnumberedsubsec">Selective point-and-click</h3>

<p>For some interactive applications, it may be desirable to only
include certain point-and-click items.  For example, if somebody
wanted to create an application which played audio or video
starting from a particular note, it would be awkward if clicking
on the note produced the point-and-click location for an
accidental or slur which occurred over that note.
</p>
<p>This may be controlled by indicating which events to include:
</p>
<ul>
<li>
Hard-coded in the &lsquo;<tt>.ly</tt>&rsquo; file:

<blockquote><pre class="example">\pointAndClickTypes #'note-event
\relative c' {
  c2\f( f)
}
</pre></blockquote>

<p>or
</p>
<blockquote><pre class="example">#(ly:set-option 'point-and-click 'note-event)
\relative c' {
  c2\f( f)
}
</pre></blockquote>

</li><li>
Command-line:

<blockquote><pre class="example">lilypond -dpoint-and-click=note-event   example.ly
</pre></blockquote>

</li></ul>

<p>Multiple events can be included:
</p>
<ul>
<li>
Hard-coded in the &lsquo;<tt>.ly</tt>&rsquo; file:

<blockquote><pre class="example">\pointAndClickTypes #'(note-event dynamic-event)
\relative c' {
  c2\f( f)
}
</pre></blockquote>

<p>or
</p>
<blockquote><pre class="example">#(ly:set-option 'point-and-click '(note-event dynamic-event))
\relative c' {
  c2\f( f)
}
</pre></blockquote>

</li><li>
Command-line:

<table><tr><td>&nbsp;</td><td><pre class="smallexample">lilypond \
  -e&quot;(ly:set-option 'point-and-click '(note-event dynamic-event))&quot; \
  example.ly
</pre></td></tr></table>


</li></ul>


<hr size="6">
<a name="Text-editor-support"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#external-programs" title="Beginning of this chapter or previous chapter"> &lt;&lt; External programs&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#suggestions-for-writing-files" title="Next chapter">&nbsp;Suggestions for writing files &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#selective-point_002dand_002dclick" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Selective point-and-click&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#external-programs" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;External programs&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#emacs-mode" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Emacs mode &gt; </a>]</td></tr></table>
<a name="text-editor-support"></a>
<h2 class="section">4.2 Text editor support</h2>

<a name="index-editors"></a>
<a name="index-vim"></a>
<a name="index-emacs"></a>
<a name="index-modes_002c-editor"></a>
<a name="index-syntax-coloring"></a>
<a name="index-coloring_002c-syntax"></a>

<p>There is support for different text editors for LilyPond.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#emacs-mode" accesskey="1">Emacs mode</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#vim-mode" accesskey="2">Vim mode</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#other-editors" accesskey="3">Other editors</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr size="6">
<a name="Emacs-mode"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#external-programs" title="Beginning of this chapter or previous chapter"> &lt;&lt; External programs&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#suggestions-for-writing-files" title="Next chapter">&nbsp;Suggestions for writing files &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#text-editor-support" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Text editor support&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#text-editor-support" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Text editor support&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#vim-mode" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Vim mode &gt; </a>]</td></tr></table>
<a name="emacs-mode"></a>
<h3 class="unnumberedsubsec">Emacs mode</h3>

<p>Emacs has a &lsquo;<tt>lilypond-mode</tt>&rsquo;, which provides keyword
autocompletion, indentation, LilyPond specific parenthesis matching
and syntax coloring, handy compile short-cuts and reading LilyPond
manuals using Info.  If &lsquo;<tt>lilypond-mode</tt>&rsquo; is not installed on your
platform, see below.
</p>
<p>An Emacs mode for entering music and running LilyPond is contained in
the source archive in the &lsquo;<tt>elisp</tt>&rsquo; directory.  Do <code>make
install</code> to install it to <var>elispdir</var>.  The file &lsquo;<tt>lilypond-init.el</tt>&rsquo;
should be placed to <var>load-path</var>&lsquo;<tt>/site-start.d/</tt>&rsquo; or appended
to your &lsquo;<tt>~/.emacs</tt>&rsquo; or &lsquo;<tt>~/.emacs.el</tt>&rsquo;.
</p>
<p>As a user, you may want add your source path (e.g. &lsquo;<tt>~/site-lisp/</tt>&rsquo;) to
your <var>load-path</var> by appending the following line (as modified) to your
&lsquo;<tt>~/.emacs</tt>&rsquo;
</p>
<blockquote><pre class="example">(setq load-path (append (list (expand-file-name &quot;~/site-lisp&quot;)) load-path))
</pre></blockquote>


<hr size="6">
<a name="Vim-mode"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#external-programs" title="Beginning of this chapter or previous chapter"> &lt;&lt; External programs&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#suggestions-for-writing-files" title="Next chapter">&nbsp;Suggestions for writing files &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#emacs-mode" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Emacs mode&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#text-editor-support" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Text editor support&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#other-editors" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Other editors &gt; </a>]</td></tr></table>
<a name="vim-mode"></a>
<h3 class="unnumberedsubsec">Vim mode</h3>

<p>For <a href="http://www.vim.org">Vim</a>, a filetype plugin, indent
mode, and syntax-highlighting mode are available to use with
LilyPond.  To enable all of these features, create (or modify)
your &lsquo;<tt>$HOME/.vimrc</tt>&rsquo; to contain these three lines, in order:
</p>
<blockquote><pre class="example">filetype off
set runtimepath+=/usr/local/share/lilypond/current/vim/
filetype on
</pre></blockquote>

<p>If LilyPond is not installed in the &lsquo;<tt>/usr/local/</tt>&rsquo; directory,
change the path appropriately.  This topic is discussed in
<a name="index-Other-sources-of-information"></a>
<a href="learning-big-page.html#other-sources-of-information">Other sources of information</a>.
</p>

<hr size="6">
<a name="Other-editors"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#external-programs" title="Beginning of this chapter or previous chapter"> &lt;&lt; External programs&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#suggestions-for-writing-files" title="Next chapter">&nbsp;Suggestions for writing files &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#vim-mode" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Vim mode&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#text-editor-support" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Text editor support&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#converting-from-other-formats" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Converting from other formats &gt; </a>]</td></tr></table>
<a name="other-editors"></a>
<h3 class="unnumberedsubsec">Other editors</h3>

<p>Other editors (both text and graphical) support LilyPond, but
their special configuration files are not distributed with
LilyPond.  Consult their documentation for more information.  Such
editors are listed in <a name="index-Easier-editing"></a>
<a href="web-big-page.html#easier-editing">Easier editing</a>.
</p>

<hr size="6">
<a name="Converting-from-other-formats"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#external-programs" title="Beginning of this chapter or previous chapter"> &lt;&lt; External programs&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#suggestions-for-writing-files" title="Next chapter">&nbsp;Suggestions for writing files &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#other-editors" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Other editors&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#external-programs" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;External programs&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#invoking-midi2ly" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Invoking midi2ly &gt; </a>]</td></tr></table>
<a name="converting-from-other-formats"></a>
<h2 class="section">4.3 Converting from other formats</h2>

<p>Music can be entered also by importing it from other formats.  This
chapter documents the tools included in the distribution to do so.
There are other tools that produce LilyPond input, for example GUI
sequencers and XML converters.  Refer to the
<a href="http://lilypond.org">website</a> for more details.
</p>
<p>These are separate programs from <code>lilypond</code> itself, and are
run on the command line; see <a href="#command_002dline-usage">Command-line usage</a> for more
information.  If you have MacOS 10.3 or 10.4 and you have trouble
running some of these scripts, e.g. <code>convert-ly</code>, see
<a name="index-MacOS-X-2"></a>
<a href="web-big-page.html#macos-x">MacOS X</a>.
</p>

<a name="Known-issues-and-warnings-5"></a>
<h4 class="subsubheading">Known issues and warnings</h4>
<p>We unfortunately do not have the resources to maintain these
programs; please consider them &ldquo;as-is&rdquo;.  Patches are appreciated, but
bug reports will almost certainly not be resolved.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#invoking-midi2ly" accesskey="1">4.3.1 Invoking <code>midi2ly</code></a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">            Importing MIDI.
</td></tr>
<tr><td align="left" valign="top"><a href="#invoking-musicxml2ly" accesskey="2">4.3.2 Invoking <code>musicxml2ly</code></a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">        Importing MusicXML.
</td></tr>
<tr><td align="left" valign="top"><a href="#invoking-abc2ly" accesskey="3">4.3.3 Invoking <code>abc2ly</code></a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">             Importing ABC.
</td></tr>
<tr><td align="left" valign="top"><a href="#invoking-etf2ly" accesskey="4">4.3.4 Invoking <code>etf2ly</code></a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">             Importing Finale.
</td></tr>
<tr><td align="left" valign="top"><a href="#other-formats" accesskey="5">4.3.5 Other formats</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>



<hr size="6">
<a name="Invoking-midi2ly"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#external-programs" title="Beginning of this chapter or previous chapter"> &lt;&lt; External programs&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#suggestions-for-writing-files" title="Next chapter">&nbsp;Suggestions for writing files &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#converting-from-other-formats" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Converting from other formats&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#converting-from-other-formats" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Converting from other formats&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#invoking-musicxml2ly" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Invoking musicxml2ly &gt; </a>]</td></tr></table>
<a name="invoking-midi2ly"></a>
<h3 class="subsection">4.3.1 Invoking <code>midi2ly</code></h3>

<a name="index-MIDI"></a>

<p><code>midi2ly</code> translates a Type&nbsp;1 MIDI file to a LilyPond source
file.
</p>
<p>MIDI (Music Instrument Digital Interface) is a standard for digital
instruments: it specifies cabling, a serial protocol and a file
format.  The MIDI file format is a de facto standard format for
exporting music from other programs, so this capability may come in
useful when importing files from a program that has a converter for a
direct format.
</p>
<p><code>midi2ly</code> converts tracks into <a name="index-Staff"></a>
<a href="internals-big-page.html#staff">Staff</a> and
channels into <a name="index-Voice"></a>
<a href="internals-big-page.html#voice">Voice</a> contexts.  Relative mode is used
for pitches, durations are only written when necessary.
</p>
<p>It is possible to record a MIDI file using a digital keyboard, and
then convert it to &lsquo;<tt>.ly</tt>&rsquo;.  However, human players are not
rhythmically exact enough to make a MIDI to LY conversion trivial.
When invoked with quantizing (&lsquo;<samp>-s</samp>&rsquo; and &lsquo;<samp>-d</samp>&rsquo; options)
<code>midi2ly</code> tries to compensate for these timing errors, but is not
very good at this.  It is therefore not recommended to use <code>midi2ly</code>
for human-generated midi files.
</p>

<p>It is invoked from the command-line as follows,
</p><blockquote><pre class="example">midi2ly [<var>option</var>]&hellip; <var>midi-file</var>
</pre></blockquote>

<p>Note that by &lsquo;command-line&rsquo;, we mean the command line of the
operating system.  See <a href="#converting-from-other-formats">Converting from other formats</a>, for
more information about this.
</p>
<p>The following options are supported by <code>midi2ly</code>.
</p>
<dl compact="compact">
<dt> <code>-a, --absolute-pitches</code></dt>
<dd><p>Print absolute pitches.
</p>
</dd>
<dt> <code>-d, --duration-quant=<var>DUR</var></code></dt>
<dd><p>Quantize note durations on <var>DUR</var>.
</p>
</dd>
<dt> <code>-e, --explicit-durations</code></dt>
<dd><p>Print explicit durations.
</p>
</dd>
<dt> <code>-h,--help</code></dt>
<dd><p>Show summary of usage.
</p>
</dd>
<dt> <code>-k, --key=<var>acc</var>[:<var>minor</var>]</code></dt>
<dd><p>Set default key.  <em><var>acc</var> &gt; 0</em> sets number of sharps;
<em><var>acc</var> &lt; 0</em> sets number of flats.  A minor key is indicated by
<code>:1</code>.
</p>
</dd>
<dt> <code>-o, --output=<var>file</var></code></dt>
<dd><p>Write output to <var>file</var>.
</p>
</dd>
<dt> <code>-s, --start-quant=<var>DUR</var></code></dt>
<dd><p>Quantize note starts on <var>DUR</var>.
</p>
</dd>
<dt> <code>-t, --allow-tuplet=<var>DUR</var>*<var>NUM</var>/<var>DEN</var></code></dt>
<dd><p>Allow tuplet durations <var>DUR</var>*<var>NUM</var>/<var>DEN</var>.
</p>
</dd>
<dt> <code>-v, --verbose</code></dt>
<dd><p>Be verbose.
</p>
</dd>
<dt> <code>-V, --version</code></dt>
<dd><p>Print version number.
</p>
</dd>
<dt> <code>-w, --warranty</code></dt>
<dd><p>Show warranty and copyright.
</p>
</dd>
<dt> <code>-x, --text-lyrics</code></dt>
<dd><p>Treat every text as a lyric.
</p></dd>
</dl>


<a name="Known-issues-and-warnings-2"></a>
<h4 class="subsubheading">Known issues and warnings</h4>

<p>Overlapping notes in an arpeggio will not be correctly rendered.  The
first note will be read and the others will be ignored.  Set them all
to a single duration and add phrase markings or pedal indicators.
</p>

<hr size="6">
<a name="Invoking-musicxml2ly"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#external-programs" title="Beginning of this chapter or previous chapter"> &lt;&lt; External programs&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#suggestions-for-writing-files" title="Next chapter">&nbsp;Suggestions for writing files &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#invoking-midi2ly" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Invoking midi2ly&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#converting-from-other-formats" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Converting from other formats&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#invoking-abc2ly" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Invoking abc2ly &gt; </a>]</td></tr></table>
<a name="invoking-musicxml2ly"></a>
<h3 class="subsection">4.3.2 Invoking <code>musicxml2ly</code></h3>

<a name="index-MusicXML"></a>

<p><a href="http://www.musicxml.org">MusicXML</a> is an XML dialect
for representing music notation.
</p>
<p><code>musicxml2ly</code> extracts the notes, articulations, score structure,
lyrics, etc. from part-wise MusicXML files, and writes them to a &lsquo;<tt>.ly</tt>&rsquo;
file.  It is invoked from the command-line.
</p>

<p>It is invoked from the command-line as follows,
</p><blockquote><pre class="example">musicxml2ly [<var>option</var>]&hellip; <var>xml-file</var>
</pre></blockquote>

<p>Note that by &lsquo;command-line&rsquo;, we mean the command line of the
operating system.  See <a href="#converting-from-other-formats">Converting from other formats</a>, for
more information about this.
</p>
<p>If the given filename is &lsquo;<tt>-</tt>&rsquo;, <code>musicxml2ly</code> reads input
from the command line.
</p>
<p>The following options are supported by <code>musicxml2ly</code>:
</p>
<dl compact="compact">
<dt> <code>-a, --absolute</code></dt>
<dd><p>convert pitches in absolute mode.
</p>
</dd>
<dt> <code>-h,--help</code></dt>
<dd><p>print usage and option summary.
</p>
</dd>
<dt> <code>-l, --language=LANG</code></dt>
<dd><p>use LANG for pitch names, e.g. &rsquo;deutsch&rsquo; for note names in German.
</p>
</dd>
<dt> <code>--loglevel=<var>loglevel</var></code></dt>
<dd><p>Set the output verbosity to <var>loglevel</var>. Possible values are <code>NONE</code>,
<code>ERROR</code>, <code>WARNING</code>, <code>PROGRESS</code> (default) and <code>DEBUG</code>.
</p>
</dd>
<dt> <code>--lxml</code></dt>
<dd><p>use the lxml.etree Python package for XML-parsing; uses less memory and cpu time.
</p>
</dd>
<dt> <code>-m, --midi</code></dt>
<dd><p>activate midi-block.
</p>
</dd>
<dt> <code>-nd --no-articulation-directions</code></dt>
<dd><p>do not convert directions (<code>^</code>, <code>_</code> or <code>-</code>) for
articulations, dynamics, etc.
</p>
</dd>
<dt> <code>--no-beaming</code></dt>
<dd><p>do not convert beaming information, use LilyPond&rsquo;s automatic
beaming instead.
</p>
</dd>
<dt> <code>-o,--output=<var>file</var></code></dt>
<dd><p>set output filename to <var>file</var>.  If <var>file</var> is &lsquo;<tt>-</tt>&rsquo;, the output
will be printed on stdout.  If not given, <var>xml-file</var>&lsquo;<tt>.ly</tt>&rsquo; will
be used.
</p>
</dd>
<dt> <code>-r,--relative</code></dt>
<dd><p>convert pitches in relative mode (default).
</p>
</dd>
<dt> <code>-v,--verbose</code></dt>
<dd><p>be verbose.
</p>
</dd>
<dt> <code>--version</code></dt>
<dd><p>print version information.
</p>
</dd>
<dt> <code>-z,--compressed</code></dt>
<dd><p>input file is a zip-compressed MusicXML file.
</p></dd>
</dl>


<hr size="6">
<a name="Invoking-abc2ly"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#external-programs" title="Beginning of this chapter or previous chapter"> &lt;&lt; External programs&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#suggestions-for-writing-files" title="Next chapter">&nbsp;Suggestions for writing files &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#invoking-musicxml2ly" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Invoking musicxml2ly&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#converting-from-other-formats" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Converting from other formats&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#invoking-etf2ly" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Invoking etf2ly &gt; </a>]</td></tr></table>
<a name="invoking-abc2ly"></a>
<h3 class="subsection">4.3.3 Invoking <code>abc2ly</code></h3>

<div class="warning"><p><strong>Note:</strong> This program is not supported, and may be remove from
future versions of LilyPond.
</p>
</div>
<a name="index-ABC"></a>

<p>ABC is a fairly simple ASCII based format.  It is described at the ABC site:
</p>
<blockquote><p><a href="http://www.walshaw.plus.com/abc/learn.html">http://www.walshaw.plus.com/abc/learn.html</a>.
</p></blockquote>

<p><code>abc2ly</code> translates from ABC to LilyPond.  It is invoked as follows:
</p>
<blockquote><pre class="example">abc2ly [<var>option</var>]&hellip; <var>abc-file</var>
</pre></blockquote>

<p>The following options are supported by <code>abc2ly</code>:
</p>
<dl compact="compact">
<dt> <code>-b,--beams=None</code></dt>
<dd><p>preserve ABC&rsquo;s notion of beams
</p></dd>
<dt> <code>-h,--help</code></dt>
<dd><p>this help
</p></dd>
<dt> <code>-o,--output=<var>file</var></code></dt>
<dd><p>set output filename to <var>file</var>.
</p></dd>
<dt> <code>-s,--strict</code></dt>
<dd><p>be strict about success
</p></dd>
<dt> <code>--version</code></dt>
<dd><p>print version information.
</p></dd>
</dl>

<p>There is a rudimentary facility for adding LilyPond code to the ABC
source file.  If you say:
</p>
<blockquote><pre class="example">%%LY voices \set autoBeaming = ##f
</pre></blockquote>

<p>This will cause the text following the keyword &lsquo;voices&rsquo; to be inserted
into the current voice of the LilyPond output file.
</p>
<p>Similarly,
</p>
<blockquote><pre class="example">%%LY slyrics more words
</pre></blockquote>

<p>will cause the text following the &lsquo;slyrics&rsquo; keyword to be inserted
into the current line of lyrics.
</p>

<a name="Known-issues-and-warnings-1"></a>
<h4 class="subsubheading">Known issues and warnings</h4>

<p>The ABC standard is not very &lsquo;standard&rsquo;.  For extended features
(e.g., polyphonic music) different conventions exist.
</p>
<p>Multiple tunes in one file cannot be converted.
</p>
<p>ABC synchronizes words and notes at the beginning of a line;
<code>abc2ly</code> does not.
</p>
<p><code>abc2ly</code> ignores the ABC beaming.
</p>

<hr size="6">
<a name="Invoking-etf2ly"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#external-programs" title="Beginning of this chapter or previous chapter"> &lt;&lt; External programs&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#suggestions-for-writing-files" title="Next chapter">&nbsp;Suggestions for writing files &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#invoking-abc2ly" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Invoking abc2ly&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#converting-from-other-formats" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Converting from other formats&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#other-formats" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Other formats &gt; </a>]</td></tr></table>
<a name="invoking-etf2ly"></a>
<h3 class="subsection">4.3.4 Invoking <code>etf2ly</code></h3>

<div class="warning"><p><strong>Note:</strong> This program is not supported, and may be remove from
future versions of LilyPond.
</p>
</div>
<a name="index-ETF"></a>
<a name="index-enigma"></a>
<a name="index-Finale"></a>
<a name="index-Coda-Technology"></a>

<p>ETF (Enigma Transport Format) is a format used by Coda Music
Technology&rsquo;s Finale product.  <code>etf2ly</code> will convert part of an ETF
file to a ready-to-use LilyPond file.
</p>
<p>It is invoked from the command-line as follows.
</p>
<blockquote><pre class="example">etf2ly [<var>option</var>]&hellip; <var>etf-file</var>
</pre></blockquote>

<p>Note that by &lsquo;command-line&rsquo;, we mean the command line of the
operating system.  See <a href="#converting-from-other-formats">Converting from other formats</a>, for
more information about this.
</p>
<p>The following options are supported by <code>etf2ly</code>:
</p>
<dl compact="compact">
<dt> <code>-h,--help</code></dt>
<dd><p>this help
</p></dd>
<dt> <code>-o,--output=<var>FILE</var></code></dt>
<dd><p>set output filename to <var>FILE</var>
</p></dd>
<dt> <code>--version</code></dt>
<dd><p>version information
</p></dd>
</dl>


<a name="Known-issues-and-warnings-4"></a>
<h4 class="subsubheading">Known issues and warnings</h4>

<p>The list of articulation scripts is incomplete.  Empty measures
confuse <code>etf2ly</code>.  Sequences of grace notes are ended improperly.
</p>

<hr size="6">
<a name="Other-formats"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#external-programs" title="Beginning of this chapter or previous chapter"> &lt;&lt; External programs&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#suggestions-for-writing-files" title="Next chapter">&nbsp;Suggestions for writing files &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#invoking-etf2ly" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Invoking etf2ly&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#converting-from-other-formats" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Converting from other formats&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#lilypond-output-in-other-programs" title="Next section in reading order" accesskey="n" rel="next">&nbsp;LilyPond output in other programs &gt; </a>]</td></tr></table>
<a name="other-formats"></a>
<h3 class="subsection">4.3.5 Other formats</h3>

<a name="index-External-programs_002c-generating-LilyPond-files"></a>

<p>LilyPond itself does not come with support for any other formats,
but some external tools can also generate LilyPond files.  These
are listed in <a name="index-Easier-editing-1"></a>
<a href="web-big-page.html#easier-editing">Easier editing</a>.
</p>


<hr size="6">
<a name="LilyPond-output-in-other-programs"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#external-programs" title="Beginning of this chapter or previous chapter"> &lt;&lt; External programs&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#suggestions-for-writing-files" title="Next chapter">&nbsp;Suggestions for writing files &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#other-formats" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Other formats&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#external-programs" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;External programs&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#many-quotes-from-a-large-score" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Many quotes from a large score &gt; </a>]</td></tr></table>
<a name="lilypond-output-in-other-programs"></a>
<h2 class="section">4.4 LilyPond output in other programs</h2>

<p>This section shows methods to integrate text and music, different than
the automated method with <code>lilypond-book</code>.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#many-quotes-from-a-large-score" accesskey="1">Many quotes from a large score</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#inserting-lilypond-output-into-openoffice_002eorg" accesskey="2">Inserting LilyPond output into OpenOffice.org</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#inserting-lilypond-output-into-other-programs" accesskey="3">Inserting LilyPond output into other programs</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr size="6">
<a name="Many-quotes-from-a-large-score"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#external-programs" title="Beginning of this chapter or previous chapter"> &lt;&lt; External programs&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#suggestions-for-writing-files" title="Next chapter">&nbsp;Suggestions for writing files &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#lilypond-output-in-other-programs" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; LilyPond output in other programs&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#lilypond-output-in-other-programs" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;LilyPond output in other programs&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#inserting-lilypond-output-into-openoffice_002eorg" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Inserting LilyPond output into OpenOffice.org &gt; </a>]</td></tr></table>
<a name="many-quotes-from-a-large-score"></a>
<h3 class="unnumberedsubsec">Many quotes from a large score</h3>

<p>If you need to quote many fragments from a large score, you can also use
the clip systems feature, see <a name="index-Extracting-fragments-of-music"></a>
<a href="notation-big-page.html#extracting-fragments-of-music">Extracting fragments of music</a>.
</p>

<hr size="6">
<a name="Inserting-LilyPond-output-into-OpenOffice_002eorg"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#external-programs" title="Beginning of this chapter or previous chapter"> &lt;&lt; External programs&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#suggestions-for-writing-files" title="Next chapter">&nbsp;Suggestions for writing files &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#many-quotes-from-a-large-score" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Many quotes from a large score&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#lilypond-output-in-other-programs" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;LilyPond output in other programs&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#inserting-lilypond-output-into-other-programs" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Inserting LilyPond output into other programs &gt; </a>]</td></tr></table>
<a name="inserting-lilypond-output-into-openoffice_002eorg"></a>
<h3 class="unnumberedsubsec">Inserting LilyPond output into OpenOffice.org</h3>

<a name="index-OpenOffice_002eorg"></a>

<p>LilyPond notation can be added to OpenOffice.org with
<a href="http://ooolilypond.sourceforge.net">OOoLilyPond</a>.
</p>

<hr size="6">
<a name="Inserting-LilyPond-output-into-other-programs"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#external-programs" title="Beginning of this chapter or previous chapter"> &lt;&lt; External programs&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#suggestions-for-writing-files" title="Next chapter">&nbsp;Suggestions for writing files &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#inserting-lilypond-output-into-openoffice_002eorg" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Inserting LilyPond output into OpenOffice.org&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#lilypond-output-in-other-programs" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;LilyPond output in other programs&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#independent-includes" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Independent includes &gt; </a>]</td></tr></table>
<a name="inserting-lilypond-output-into-other-programs"></a>
<h3 class="unnumberedsubsec">Inserting LilyPond output into other programs</h3>

<p>To insert LilyPond output in other programs, use <code>lilypond</code>
instead of <code>lilypond-book</code>.  Each example must be created
individually and added to the document; consult the documentation for
that program.  Most programs will be able to insert LilyPond output in
&lsquo;<tt>PNG</tt>&rsquo;, &lsquo;<tt>EPS</tt>&rsquo;, or &lsquo;<tt>PDF</tt>&rsquo; formats.
</p>
<p>To reduce the white space around your LilyPond score, use
the following options
</p>
<blockquote><pre class="example">\paper{
  indent=0\mm
  line-width=120\mm
  oddFooterMarkup=##f
  oddHeaderMarkup=##f
  bookTitleMarkup = ##f
  scoreTitleMarkup = ##f
}

{ c1 }
</pre></blockquote>

<p>To produce useful image files:
</p>
<blockquote><pre class="example">EPS

lilypond -dbackend=eps -dno-gs-load-fonts -dinclude-eps-fonts myfile.ly

PNG

lilypond -dbackend=eps -dno-gs-load-fonts -dinclude-eps-fonts --png myfile.ly

A transparent PNG

lilypond -dbackend=eps -dno-gs-load-fonts -dinclude-eps-fonts \
  -dpixmap-format=pngalpha --png myfile.ly
</pre></blockquote>


<hr size="6">
<a name="Independent-includes"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#external-programs" title="Beginning of this chapter or previous chapter"> &lt;&lt; External programs&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#suggestions-for-writing-files" title="Next chapter">&nbsp;Suggestions for writing files &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#inserting-lilypond-output-into-other-programs" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Inserting LilyPond output into other programs&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#external-programs" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;External programs&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#midi-articulation" title="Next section in reading order" accesskey="n" rel="next">&nbsp;MIDI articulation &gt; </a>]</td></tr></table>
<a name="independent-includes"></a>
<h2 class="section">4.5 Independent <code>include</code>s</h2>

<p>Some people have written large (and useful!) code that can be
shared between projects.  This code might eventually make its way
into LilyPond itself, but until that happens, you must download
and <code>\include</code> them manually.
</p>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#midi-articulation" accesskey="1">4.5.1 MIDI articulation</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>


<hr size="6">
<a name="MIDI-articulation"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#external-programs" title="Beginning of this chapter or previous chapter"> &lt;&lt; External programs&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#suggestions-for-writing-files" title="Next chapter">&nbsp;Suggestions for writing files &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#independent-includes" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Independent includes&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#independent-includes" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Independent includes&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#suggestions-for-writing-files" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Suggestions for writing files &gt; </a>]</td></tr></table>
<a name="midi-articulation"></a>
<h3 class="subsection">4.5.1 MIDI articulation</h3>

<p>LilyPond can be used to produce MIDI output, for
&ldquo;proof-hearing&rdquo; what has been written.  However, only dynamics,
explicit tempo markings, and the notes and durations themselves
are produced in the output.
</p>
<p>The <em>articulate</em> project is one attempt to get more of the
information in the score into MIDI.  It works by shortening
notes not under slurs, to &lsquo;articulate&rsquo; the notes.  The amount of
shortening depends on any articulation markings attached to a
note: staccato halves the note value, tenuto gives a note its full
duration, and so on.  The script also realises trills and turns,
and could be extended to expand other ornaments such as mordents.
</p>
<blockquote><pre class="example"><a href="http://www.nicta.com.au/people/chubbp/articulate">http://www.nicta.com.au/people/chubbp/articulate</a>
</pre></blockquote>

<a name="Known-issues-and-warnings-3"></a>
<h4 class="subsubheading">Known issues and warnings</h4>

<p>Its main limitation is that it can only affect things it knows
about: anything that is merely textual markup (instead of a note
property) is still ignored.
</p>




<hr size="6">
<a name="Suggestions-for-writing-files"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#external-programs" title="Beginning of this chapter or previous chapter"> &lt;&lt; External programs&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#gnu-free-documentation-license" title="Next chapter">&nbsp;GNU Free Documentation License &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#midi-articulation" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; MIDI articulation&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#index" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Top&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#general-suggestions" title="Next section in reading order" accesskey="n" rel="next">&nbsp;General suggestions &gt; </a>]</td></tr></table>
<a name="suggestions-for-writing-files"></a>
<h1 class="chapter">5. Suggestions for writing files</h1>

<p>Now you&rsquo;re ready to begin writing larger LilyPond input files &ndash;
not just the little examples in the tutorial, but whole pieces.
But how should you go about doing it?
</p>
<p>As long as LilyPond can understand your input files and produce
the output that you want, it doesn&rsquo;t matter what your input files
look like.  However, there are a few other things to consider when
writing LilyPond input files.
</p>
<ul>
<li> What if you make a mistake?  The structure of a LilyPond
file can make certain errors easier (or harder) to find.

</li><li> What if you want to share your input files with somebody
else?  In fact, what if you want to alter your own input files in
a few years?  Some LilyPond input files are understandable at
first glance; others may leave you scratching your head
for an hour.

</li><li> What if you want to upgrade your LilyPond file for use
with a later version of LilyPond?  The input syntax changes
occasionally as LilyPond improves.  Most changes can be
done automatically with <code>convert-ly</code>, but some changes
might require manual assistance.  LilyPond input files can be
structured in order to be easier (or harder) to update.

</li></ul>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#general-suggestions" accesskey="1">5.1 General suggestions</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#typesetting-existing-music" accesskey="2">5.2 Typesetting existing music</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#large-projects" accesskey="3">5.3 Large projects</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#troubleshooting" accesskey="4">5.4 Troubleshooting</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#make-and-makefiles" accesskey="5">5.5 Make and Makefiles</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>


<hr size="6">
<a name="General-suggestions"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#suggestions-for-writing-files" title="Beginning of this chapter or previous chapter"> &lt;&lt; Suggestions for writing files&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#gnu-free-documentation-license" title="Next chapter">&nbsp;GNU Free Documentation License &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#suggestions-for-writing-files" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Suggestions for writing files&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#suggestions-for-writing-files" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Suggestions for writing files&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#typesetting-existing-music" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Typesetting existing music &gt; </a>]</td></tr></table>
<a name="general-suggestions"></a>
<h2 class="section">5.1 General suggestions</h2>

<p>Here are a few suggestions that can help you to avoid or fix
problems:
</p>
<ul>
<li> <strong>Include <code>\version</code> numbers in every file</strong>.  Note that all
templates contain <code>\version</code> information.  We
highly recommend that you always include the <code>\version</code>, no matter
how small your file is.  Speaking from personal experience, it&rsquo;s
quite frustrating to try to remember which version of LilyPond you were
using a few years ago.  <code>convert-ly</code> requires you to declare
which version of LilyPond you used.

</li><li> <strong>Include checks</strong>: <a name="index-Bar-and-bar-number-checks-1"></a>
<a href="notation-big-page.html#bar-and-bar-number-checks">Bar and bar number checks</a>,
<a name="index-Octave-checks"></a>
<a href="notation-big-page.html#octave-checks">Octave checks</a>.  If you include checks every so often, then
if you make a mistake, you can pinpoint it quicker.  How often is
&lsquo;every so often&rsquo;?  It depends on the complexity of the music.
For very simple music, perhaps just once or twice.  For very
complex music, perhaps every bar.

</li><li> <strong>One bar per line of text</strong>.  If there is anything complicated,
either in the music
itself or in the output you desire, it&rsquo;s often good to write only one bar
per line.  Saving screen space by cramming eight bars per line just isn&rsquo;t
worth it if you have to &lsquo;debug&rsquo; your input files.

</li><li> <strong>Comment your input files</strong>.  Use either bar numbers
(every so often) or
references to musical themes (&lsquo;second theme in violins,&rsquo; &lsquo;fourth
variation,&rsquo; etc.).  You may not need comments when you&rsquo;re writing the piece
for the first time, but if you want to go back to change something two or
three years later, or if you pass the source over to a friend, it will
be much more
challenging to determine your intentions or how your file is structured if
you didn&rsquo;t comment the file.

</li><li> <strong>Indent your braces</strong>.  A lot of problems are caused by an
imbalance
in the number of <code>{</code> and <code>}</code>.

</li><li> <strong>Explicitly add durations</strong> at the beginnings of sections
and variables.  If you specify <code>c4 d e</code> at the beginning of a
phrase (instead of just <code>c d e</code>) you can save yourself some
problems if you rearrange your music later.

</li><li> <strong>Separate tweaks</strong> from music definitions.  See
<a name="index-Saving-typing-with-variables-and-functions"></a>
<a href="learning-big-page.html#saving-typing-with-variables-and-functions">Saving typing with variables and functions</a>, and
<a name="index-Style-sheets"></a>
<a href="learning-big-page.html#style-sheets">Style sheets</a>.

</li></ul>


<hr size="6">
<a name="Typesetting-existing-music"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#suggestions-for-writing-files" title="Beginning of this chapter or previous chapter"> &lt;&lt; Suggestions for writing files&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#gnu-free-documentation-license" title="Next chapter">&nbsp;GNU Free Documentation License &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#general-suggestions" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; General suggestions&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#suggestions-for-writing-files" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Suggestions for writing files&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#large-projects" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Large projects &gt; </a>]</td></tr></table>
<a name="typesetting-existing-music"></a>
<h2 class="section">5.2 Typesetting existing music</h2>

<p>If you are entering music from an existing score (i.e., typesetting a
piece of existing sheet music),
</p>
<ul>
<li> Enter the manuscript (the physical copy of the music) into
LilyPond one system at a time (but still only one bar per line of text),
and check each system when you finish it.  You may use the
<code>showLastLength</code> or <code>showFirstLength</code> properties to speed up
processing &ndash; see <a name="index-Skipping-corrected-music"></a>
<a href="notation-big-page.html#skipping-corrected-music">Skipping corrected music</a>.

</li><li> Define <code>mBreak = { \break }</code> and insert <code>\mBreak</code>
in the input file whenever the manuscript has a line break.  This
makes it much easier to compare the LilyPond music to the original
music.  When you are finished proofreading your score, you may
define <code>mBreak = { }</code> to remove all those line breaks.  This
will allow LilyPond to place line breaks wherever it feels are
best.

</li><li> When entering a part for a transposing instrument into a
variable, it is recommended that the notes are wrapped in

<blockquote><pre class="example">\transpose c natural-pitch {...}
</pre></blockquote>

<p>(where <code>natural-pitch</code> is the open pitch of the instrument) so
that the music in the variable is effectively in C. You can transpose
it back again when the variable is used, if required, but you might
not want to (e.g., when printing a score in concert pitch,
converting a trombone part from treble to bass clef, etc.)
Mistakes in transpositions are less likely if all the music in
variables is at a consistent pitch.
</p>
<p>Also, only ever transpose to/from C. That means that the only other
keys you will use are the natural pitches of the instruments - bes
for a B-flat trumpet, aes for an A-flat clarinet, etc.
</p>
</li></ul>


<hr size="6">
<a name="Large-projects"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#suggestions-for-writing-files" title="Beginning of this chapter or previous chapter"> &lt;&lt; Suggestions for writing files&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#gnu-free-documentation-license" title="Next chapter">&nbsp;GNU Free Documentation License &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#typesetting-existing-music" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Typesetting existing music&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#suggestions-for-writing-files" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Suggestions for writing files&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#troubleshooting" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Troubleshooting &gt; </a>]</td></tr></table>
<a name="large-projects"></a>
<h2 class="section">5.3 Large projects</h2>

<p>When working on a large project, having a clear structure to your
lilypond input files becomes vital.
</p>
<ul>
<li> <strong>Use a variable for each voice</strong>, with a minimum of
structure inside the definition.  The structure of the
<code>\score</code> section is the most likely thing to change;
the <code>violin</code> definition is extremely unlikely to change
in a new version of LilyPond.

<blockquote><pre class="example">violin = \relative c'' {
g4 c'8. e16
}
...
\score {
  \new GrandStaff {
    \new Staff {
      \violin
    }
  }
}
</pre></blockquote>

</li><li> <strong>Separate tweaks from music definitions</strong>.  This
point was made previously, but for large
projects it is absolutely vital.  We might need to change
the definition of <code>fthenp</code>, but then we only need
to do this once, and we can still avoid touching anything
inside <code>violin</code>.

<blockquote><pre class="example">fthenp = _\markup{
  \dynamic f \italic \small { 2nd } \hspace #0.1 \dynamic p }
violin = \relative c'' {
g4\fthenp c'8. e16
}
</pre></blockquote>

</li></ul>


<hr size="6">
<a name="Troubleshooting"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#suggestions-for-writing-files" title="Beginning of this chapter or previous chapter"> &lt;&lt; Suggestions for writing files&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#gnu-free-documentation-license" title="Next chapter">&nbsp;GNU Free Documentation License &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#large-projects" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Large projects&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#suggestions-for-writing-files" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Suggestions for writing files&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#make-and-makefiles" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Make and Makefiles &gt; </a>]</td></tr></table>
<a name="troubleshooting"></a>
<h2 class="section">5.4 Troubleshooting</h2>

<p>Sooner or later, you will write a file that LilyPond cannot
compile.  The messages that LilyPond gives may help
you find the error, but in many cases you need to do some
investigation to determine the source of the problem.
</p>
<p>The most powerful tools for this purpose are the
single line comment (indicated by <code>%</code>) and the block
comment (indicated by <code>%{ ... %}</code>).  If you don&rsquo;t
know where a problem is, start commenting out huge portions
of your input file.  After you comment out a section, try
compiling the file again.  If it works, then the problem
must exist in the portion you just commented.  If it doesn&rsquo;t
work, then keep on commenting out material until you have
something that works.
</p>
<p>In an extreme case, you might end up with only
</p>
<blockquote><pre class="example">\score {
  &lt;&lt;
    % \melody
    % \harmony
    % \bass
  &gt;&gt;
  \layout{}
}
</pre></blockquote>

<p>(in other words, a file without any music)
</p>
<p>If that happens, don&rsquo;t give up.  Uncomment a bit &ndash; say,
the bass part &ndash; and see if it works.  If it doesn&rsquo;t work,
then comment out all of the bass music (but leave
<code>\bass</code> in the <code>\score</code> uncommented.
</p>
<blockquote><pre class="example">bass = \relative c' {
%{
  c4 c c c
  d d d d
%}
}
</pre></blockquote>

<p>Now start slowly uncommenting more and more of the
<code>bass</code> part until you find the problem line.
</p>
<p>Another very useful debugging technique is constructing
<a name="index-Tiny-examples"></a>
<a href="web-big-page.html#tiny-examples">Tiny examples</a>.
</p>

<hr size="6">
<a name="Make-and-Makefiles"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#suggestions-for-writing-files" title="Beginning of this chapter or previous chapter"> &lt;&lt; Suggestions for writing files&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#gnu-free-documentation-license" title="Next chapter">&nbsp;GNU Free Documentation License &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#troubleshooting" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Troubleshooting&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#suggestions-for-writing-files" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Suggestions for writing files&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#gnu-free-documentation-license" title="Next section in reading order" accesskey="n" rel="next">&nbsp;GNU Free Documentation License &gt; </a>]</td></tr></table>
<a name="make-and-makefiles"></a>
<h2 class="section">5.5 Make and Makefiles</h2>

<a name="index-makefiles"></a>
<a name="index-make"></a>

<p>Pretty well all the platforms Lilypond can run on support a software
facility called <code>make</code>.  This software reads a special file called a
<code>Makefile</code> that defines what files depend on what others and what
commands you need to give the operating system to produce one file from
another.  For example the makefile would spell out how to produce
&lsquo;<tt>ballad.pdf</tt>&rsquo; and &lsquo;<tt>ballad.midi</tt>&rsquo; from &lsquo;<tt>ballad.ly</tt>&rsquo; by
running Lilypond.
</p>
<p>There are times when it is a good idea to create a <code>Makefile</code>
for your project, either for your own convenience or
as a courtesy to others who might have access to your source files.
This is true for very large projects with many included files and
different output options (e.g. full score, parts, conductor&rsquo;s
score, piano reduction, etc.), or for projects that
require difficult commands to build them (such as
<code>lilypond-book</code> projects).  Makefiles vary greatly in
complexity and flexibility, according to the needs and skills of
the authors.  The program GNU Make comes installed on GNU/Linux
distributions and on MacOS X, and it is also available for Windows.
</p>
<p>See the <strong>GNU Make Manual</strong> for full details on using
<code>make</code>, as what follows here gives only a glimpse of what it
can do.
</p>
<p>The commands to define rules in a makefile differ
according to platform; for instance the various forms of GNU/Linux and
MacOS use <code>bash</code>, while Windows uses <code>cmd</code>.  Note that on
MacOS X, you need to configure the system to use the command-line
interpreter.  Here are some example makefiles, with versions for both
GNU/Linux/MacOS and Windows.
</p>
<p>The first example is for an orchestral work in four
movements with a directory structure as follows:
</p>
<blockquote><pre class="example">Symphony/
|-- MIDI/
|-- Makefile
|-- Notes/
|   |-- cello.ily
|   |-- figures.ily
|   |-- horn.ily
|   |-- oboe.ily
|   |-- trioString.ily
|   |-- viola.ily
|   |-- violinOne.ily
|   `-- violinTwo.ily
|-- PDF/
|-- Parts/
|   |-- symphony-cello.ly
|   |-- symphony-horn.ly
|   |-- symphony-oboes.ly
|   |-- symphony-viola.ly
|   |-- symphony-violinOne.ly
|   `-- symphony-violinTwo.ly
|-- Scores/
|   |-- symphony.ly
|   |-- symphonyI.ly
|   |-- symphonyII.ly
|   |-- symphonyIII.ly
|   `-- symphonyIV.ly
`-- symphonyDefs.ily
</pre></blockquote>

<p>The &lsquo;<tt>.ly</tt>&rsquo; files in the &lsquo;<tt>Scores</tt>&rsquo; and
&lsquo;<tt>Parts</tt>&rsquo; directories get their notes from &lsquo;<tt>.ily</tt>&rsquo;
files in the &lsquo;<tt>Notes</tt>&rsquo; directory:
</p>
<blockquote><pre class="example">%%% top of file &quot;symphony-cello.ly&quot;
\include ../symphonyDefs.ily
\include ../Notes/cello.ily
</pre></blockquote>

<p>The makefile will have targets of <code>score</code> (entire piece in
full score), <code>movements</code> (individual movements in full score),
and <code>parts</code> (individual parts for performers).  There
is also a target <code>archive</code> that will create a tarball of
the source files, suitable for sharing via web or email.  Here is
the makefile for GNU/Linux or MacOS X.  It should be saved with the
name <code>Makefile</code> in the top directory of the project:
</p>
<div class="warning"><p><strong>Note:</strong> When a target or pattern rule is defined, the
subsequent lines must begin with tabs, not spaces.
</p>
</div>
<blockquote><pre class="example"># the name stem of the output files
piece = symphony
# determine how many processors are present
CPU_CORES=`cat /proc/cpuinfo | grep -m1 &quot;cpu cores&quot; | sed s/&quot;.*: &quot;//`
# The command to run lilypond
LILY_CMD = lilypond -ddelete-intermediate-files \
                    -dno-point-and-click -djob-count=$(CPU_CORES)

# The suffixes used in this Makefile.
.SUFFIXES: .ly .ily .pdf .midi

# Input and output files are searched in the directories listed in
# the VPATH variable.  All of them are subdirectories of the current
# directory (given by the GNU make variable `CURDIR').
VPATH = \
  $(CURDIR)/Scores \
  $(CURDIR)/PDF \
  $(CURDIR)/Parts \
  $(CURDIR)/Notes

# The pattern rule to create PDF and MIDI files from a LY input file.
# The .pdf output files are put into the `PDF' subdirectory, and the
# .midi files go into the `MIDI' subdirectory.
%.pdf %.midi: %.ly
        $(LILY_CMD) $&lt;; \           # this line begins with a tab
        if test -f &quot;$*.pdf&quot;; then \
            mv &quot;$*.pdf&quot; PDF/; \
        fi; \
        if test -f &quot;$*.midi&quot;; then \
            mv &quot;$*.midi&quot; MIDI/; \
        fi

notes = \
  cello.ily \
  horn.ily \
  oboe.ily \
  viola.ily \
  violinOne.ily \
  violinTwo.ily

# The dependencies of the movements.
$(piece)I.pdf: $(piece)I.ly $(notes)
$(piece)II.pdf: $(piece)II.ly $(notes)
$(piece)III.pdf: $(piece)III.ly $(notes)
$(piece)IV.pdf: $(piece)IV.ly $(notes)

# The dependencies of the full score.
$(piece).pdf: $(piece).ly $(notes)

# The dependencies of the parts.
$(piece)-cello.pdf: $(piece)-cello.ly cello.ily
$(piece)-horn.pdf: $(piece)-horn.ly horn.ily
$(piece)-oboes.pdf: $(piece)-oboes.ly oboe.ily
$(piece)-viola.pdf: $(piece)-viola.ly viola.ily
$(piece)-violinOne.pdf: $(piece)-violinOne.ly violinOne.ily
$(piece)-violinTwo.pdf: $(piece)-violinTwo.ly violinTwo.ily

# Type `make score' to generate the full score of all four
# movements as one file.
.PHONY: score
score: $(piece).pdf

# Type `make parts' to generate all parts.
# Type `make foo.pdf' to generate the part for instrument `foo'.
# Example: `make symphony-cello.pdf'.
.PHONY: parts
parts: $(piece)-cello.pdf \
       $(piece)-violinOne.pdf \
       $(piece)-violinTwo.pdf \
       $(piece)-viola.pdf \
       $(piece)-oboes.pdf \
       $(piece)-horn.pdf

# Type `make movements' to generate files for the
# four movements separately.
.PHONY: movements
movements: $(piece)I.pdf \
           $(piece)II.pdf \
           $(piece)III.pdf \
           $(piece)IV.pdf

all: score parts movements

archive:
        tar -cvvf stamitz.tar \       # this line begins with a tab
        --exclude=*pdf --exclude=*~ \
        --exclude=*midi --exclude=*.tar \
        ../Stamitz/*
</pre></blockquote>


<p>There are special complications on the Windows platform.  After
downloading and installing GNU Make for Windows, you must set the
correct path in the system&rsquo;s environment variables so that the
DOS shell can find the Make program.  To do this, right-click on
&quot;My Computer,&quot; then choose <code>Properties</code> and
<code>Advanced</code>.  Click <code>Environment Variables</code>, and then
in the <code>System Variables</code> pane, highlight <code>Path</code>, click
<code>edit</code>, and add the path to the GNU Make executable file, which
 will look something like this:
</p>
<blockquote><pre class="example">C:\Program Files\GnuWin32\bin
</pre></blockquote>

<p>The makefile itself has to be altered to handle different shell
commands and to deal with spaces that are present
in some default system directories.  The <code>archive</code> target
is eliminated since Windows does not have the <code>tar</code> command,
and Windows also has a different default extension for midi files.
</p>

<blockquote><pre class="example">## WINDOWS VERSION
##
piece = symphony
LILY_CMD = lilypond -ddelete-intermediate-files \
                    -dno-point-and-click \
                    -djob-count=$(NUMBER_OF_PROCESSORS)

#get the 8.3 name of CURDIR (workaround for spaces in PATH)
workdir = $(shell for /f &quot;tokens=*&quot; %%b in (&quot;$(CURDIR)&quot;) \
          do @echo %%~sb)

.SUFFIXES: .ly .ily .pdf .mid

VPATH = \
  $(workdir)/Scores \
  $(workdir)/PDF \
  $(workdir)/Parts \
  $(workdir)/Notes

%.pdf %.mid: %.ly
        $(LILY_CMD) $&lt;      # this line begins with a tab
        if exist &quot;$*.pdf&quot;  move /Y &quot;$*.pdf&quot;  PDF/ # begin with tab
        if exist &quot;$*.mid&quot; move /Y &quot;$*.mid&quot; MIDI/  # begin with tab

notes = \
  cello.ily \
  figures.ily \
  horn.ily \
  oboe.ily \
  trioString.ily \
  viola.ily \
  violinOne.ily \
  violinTwo.ily

$(piece)I.pdf: $(piece)I.ly $(notes)
$(piece)II.pdf: $(piece)II.ly $(notes)
$(piece)III.pdf: $(piece)III.ly $(notes)
$(piece)IV.pdf: $(piece)IV.ly $(notes)

$(piece).pdf: $(piece).ly $(notes)

$(piece)-cello.pdf: $(piece)-cello.ly cello.ily
$(piece)-horn.pdf: $(piece)-horn.ly horn.ily
$(piece)-oboes.pdf: $(piece)-oboes.ly oboe.ily
$(piece)-viola.pdf: $(piece)-viola.ly viola.ily
$(piece)-violinOne.pdf: $(piece)-violinOne.ly violinOne.ily
$(piece)-violinTwo.pdf: $(piece)-violinTwo.ly violinTwo.ily

.PHONY: score
score: $(piece).pdf

.PHONY: parts
parts: $(piece)-cello.pdf \
       $(piece)-violinOne.pdf \
       $(piece)-violinTwo.pdf \
       $(piece)-viola.pdf \
       $(piece)-oboes.pdf \
       $(piece)-horn.pdf

.PHONY: movements
movements: $(piece)I.pdf \
           $(piece)II.pdf \
           $(piece)III.pdf \
           $(piece)IV.pdf

all: score parts movements
</pre></blockquote>


<p>The next Makefile is for a <code>lilypond-book</code> document done in
LaTeX.  This project has an index, which requires that the
<code>latex</code> command be run twice to update links.  Output files are
all stored in the <code>out</code> directory for .pdf output and in the
<code>htmlout</code> directory for the html output.
</p>
<blockquote><pre class="example">SHELL=/bin/sh
FILE=myproject
OUTDIR=out
WEBDIR=htmlout
VIEWER=acroread
BROWSER=firefox
LILYBOOK_PDF=lilypond-book --output=$(OUTDIR) --pdf $(FILE).lytex
LILYBOOK_HTML=lilypond-book --output=$(WEBDIR) $(FILE).lytex
PDF=cd $(OUTDIR) &amp;&amp; pdflatex $(FILE)
HTML=cd $(WEBDIR) &amp;&amp; latex2html $(FILE)
INDEX=cd $(OUTDIR) &amp;&amp; makeindex $(FILE)
PREVIEW=$(VIEWER) $(OUTDIR)/$(FILE).pdf &amp;

all: pdf web keep

pdf:
        $(LILYBOOK_PDF)  # begin with tab
        $(PDF)           # begin with tab
        $(INDEX)         # begin with tab
        $(PDF)           # begin with tab
        $(PREVIEW)       # begin with tab

web:
        $(LILYBOOK_HTML) # begin with tab
        $(HTML)          # begin with tab
        cp -R $(WEBDIR)/$(FILE)/ ./  # begin with tab
        $(BROWSER) $(FILE)/$(FILE).html &amp;  # begin with tab

keep: pdf
        cp $(OUTDIR)/$(FILE).pdf $(FILE).pdf  # begin with tab

clean:
        rm -rf $(OUTDIR) # begin with tab

web-clean:
        rm -rf $(WEBDIR) # begin with tab

archive:
        tar -cvvf myproject.tar \ # begin this line with tab
        --exclude=out/* \
        --exclude=htmlout/* \
        --exclude=myproject/* \
        --exclude=*midi \
        --exclude=*pdf \
        --exclude=*~ \
        ../MyProject/*
</pre></blockquote>

<p>TODO: make this thing work on Windows
</p>
<p>The previous makefile does not work on Windows.  An alternative
for Windows users would be to create a simple batch file
containing the build commands.  This will not
keep track of dependencies the way a makefile does, but it at
least reduces the build process to a single command.  Save the
following code as <code>build.bat</code> or <code>build.cmd</code>.
The batch file can be run at the DOS prompt or by simply
double-clicking its icon.
</p>
<blockquote><pre class="example">lilypond-book --output=out --pdf myproject.lytex
cd out
pdflatex myproject
makeindex myproject
pdflatex myproject
cd ..
copy out\myproject.pdf MyProject.pdf
</pre></blockquote>


<a name="See-also"></a>
<h4 class="subsubheading">See also</h4>

<p>This manual:
<a href="#command_002dline-usage">Command-line usage</a>,
<a href="#lilypond_002dbook">Running <code>lilypond-book</code></a>
</p>

<hr size="6">
<a name="GNU-Free-Documentation-License"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#suggestions-for-writing-files" title="Beginning of this chapter or previous chapter"> &lt;&lt; Suggestions for writing files&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#lilypond-index" title="Next chapter">&nbsp;LilyPond index &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#make-and-makefiles" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Make and Makefiles&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#index" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Top&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#lilypond-index" title="Next section in reading order" accesskey="n" rel="next">&nbsp;LilyPond index &gt; </a>]</td></tr></table>
<a name="gnu-free-documentation-license"></a>
<h1 class="appendix">A. GNU Free Documentation License</h1>
<p align="center"> Version 1.3, 3 November 2008
</p>

<table><tr><td>&nbsp;</td><td><pre class="display">Copyright &copy; 2000, 2001, 2002, 2007, 2008 Free Software Foundation, Inc.
<a href="http://fsf.org">http://fsf.org/</a>

Everyone is permitted to copy and distribute verbatim copies
of this license document, but changing it is not allowed.
</pre></td></tr></table>

<ol>
<li>
PREAMBLE

<p>The purpose of this License is to make a manual, textbook, or other
functional and useful document <em>free</em> in the sense of freedom: to
assure everyone the effective freedom to copy and redistribute it,
with or without modifying it, either commercially or noncommercially.
Secondarily, this License preserves for the author and publisher a way
to get credit for their work, while not being considered responsible
for modifications made by others.
</p>
<p>This License is a kind of &ldquo;copyleft&rdquo;, which means that derivative
works of the document must themselves be free in the same sense.  It
complements the GNU General Public License, which is a copyleft
license designed for free software.
</p>
<p>We have designed this License in order to use it for manuals for free
software, because free software needs free documentation: a free
program should come with manuals providing the same freedoms that the
software does.  But this License is not limited to software manuals;
it can be used for any textual work, regardless of subject matter or
whether it is published as a printed book.  We recommend this License
principally for works whose purpose is instruction or reference.
</p>
</li><li>
APPLICABILITY AND DEFINITIONS

<p>This License applies to any manual or other work, in any medium, that
contains a notice placed by the copyright holder saying it can be
distributed under the terms of this License.  Such a notice grants a
world-wide, royalty-free license, unlimited in duration, to use that
work under the conditions stated herein.  The &ldquo;Document&rdquo;, below,
refers to any such manual or work.  Any member of the public is a
licensee, and is addressed as &ldquo;you&rdquo;.  You accept the license if you
copy, modify or distribute the work in a way requiring permission
under copyright law.
</p>
<p>A &ldquo;Modified Version&rdquo; of the Document means any work containing the
Document or a portion of it, either copied verbatim, or with
modifications and/or translated into another language.
</p>
<p>A &ldquo;Secondary Section&rdquo; is a named appendix or a front-matter section
of the Document that deals exclusively with the relationship of the
publishers or authors of the Document to the Document&rsquo;s overall
subject (or to related matters) and contains nothing that could fall
directly within that overall subject.  (Thus, if the Document is in
part a textbook of mathematics, a Secondary Section may not explain
any mathematics.)  The relationship could be a matter of historical
connection with the subject or with related matters, or of legal,
commercial, philosophical, ethical or political position regarding
them.
</p>
<p>The &ldquo;Invariant Sections&rdquo; are certain Secondary Sections whose titles
are designated, as being those of Invariant Sections, in the notice
that says that the Document is released under this License.  If a
section does not fit the above definition of Secondary then it is not
allowed to be designated as Invariant.  The Document may contain zero
Invariant Sections.  If the Document does not identify any Invariant
Sections then there are none.
</p>
<p>The &ldquo;Cover Texts&rdquo; are certain short passages of text that are listed,
as Front-Cover Texts or Back-Cover Texts, in the notice that says that
the Document is released under this License.  A Front-Cover Text may
be at most 5 words, and a Back-Cover Text may be at most 25 words.
</p>
<p>A &ldquo;Transparent&rdquo; copy of the Document means a machine-readable copy,
represented in a format whose specification is available to the
general public, that is suitable for revising the document
straightforwardly with generic text editors or (for images composed of
pixels) generic paint programs or (for drawings) some widely available
drawing editor, and that is suitable for input to text formatters or
for automatic translation to a variety of formats suitable for input
to text formatters.  A copy made in an otherwise Transparent file
format whose markup, or absence of markup, has been arranged to thwart
or discourage subsequent modification by readers is not Transparent.
An image format is not Transparent if used for any substantial amount
of text.  A copy that is not &ldquo;Transparent&rdquo; is called &ldquo;Opaque&rdquo;.
</p>
<p>Examples of suitable formats for Transparent copies include plain
<small>ASCII</small> without markup, Texinfo input format, LaTeX input
format, <acronym>SGML</acronym> or <acronym>XML</acronym> using a publicly available
<acronym>DTD</acronym>, and standard-conforming simple <acronym>HTML</acronym>,
PostScript or <acronym>PDF</acronym> designed for human modification.  Examples
of transparent image formats include <acronym>PNG</acronym>, <acronym>XCF</acronym> and
<acronym>JPG</acronym>.  Opaque formats include proprietary formats that can be
read and edited only by proprietary word processors, <acronym>SGML</acronym> or
<acronym>XML</acronym> for which the <acronym>DTD</acronym> and/or processing tools are
not generally available, and the machine-generated <acronym>HTML</acronym>,
PostScript or <acronym>PDF</acronym> produced by some word processors for
output purposes only.
</p>
<p>The &ldquo;Title Page&rdquo; means, for a printed book, the title page itself,
plus such following pages as are needed to hold, legibly, the material
this License requires to appear in the title page.  For works in
formats which do not have any title page as such, &ldquo;Title Page&rdquo; means
the text near the most prominent appearance of the work&rsquo;s title,
preceding the beginning of the body of the text.
</p>
<p>The &ldquo;publisher&rdquo; means any person or entity that distributes copies
of the Document to the public.
</p>
<p>A section &ldquo;Entitled XYZ&rdquo; means a named subunit of the Document whose
title either is precisely XYZ or contains XYZ in parentheses following
text that translates XYZ in another language.  (Here XYZ stands for a
specific section name mentioned below, such as &ldquo;Acknowledgements&rdquo;,
&ldquo;Dedications&rdquo;, &ldquo;Endorsements&rdquo;, or &ldquo;History&rdquo;.)  To &ldquo;Preserve the Title&rdquo;
of such a section when you modify the Document means that it remains a
section &ldquo;Entitled XYZ&rdquo; according to this definition.
</p>
<p>The Document may include Warranty Disclaimers next to the notice which
states that this License applies to the Document.  These Warranty
Disclaimers are considered to be included by reference in this
License, but only as regards disclaiming warranties: any other
implication that these Warranty Disclaimers may have is void and has
no effect on the meaning of this License.
</p>
</li><li>
VERBATIM COPYING

<p>You may copy and distribute the Document in any medium, either
commercially or noncommercially, provided that this License, the
copyright notices, and the license notice saying this License applies
to the Document are reproduced in all copies, and that you add no other
conditions whatsoever to those of this License.  You may not use
technical measures to obstruct or control the reading or further
copying of the copies you make or distribute.  However, you may accept
compensation in exchange for copies.  If you distribute a large enough
number of copies you must also follow the conditions in section 3.
</p>
<p>You may also lend copies, under the same conditions stated above, and
you may publicly display copies.
</p>
</li><li>
COPYING IN QUANTITY

<p>If you publish printed copies (or copies in media that commonly have
printed covers) of the Document, numbering more than 100, and the
Document&rsquo;s license notice requires Cover Texts, you must enclose the
copies in covers that carry, clearly and legibly, all these Cover
Texts: Front-Cover Texts on the front cover, and Back-Cover Texts on
the back cover.  Both covers must also clearly and legibly identify
you as the publisher of these copies.  The front cover must present
the full title with all words of the title equally prominent and
visible.  You may add other material on the covers in addition.
Copying with changes limited to the covers, as long as they preserve
the title of the Document and satisfy these conditions, can be treated
as verbatim copying in other respects.
</p>
<p>If the required texts for either cover are too voluminous to fit
legibly, you should put the first ones listed (as many as fit
reasonably) on the actual cover, and continue the rest onto adjacent
pages.
</p>
<p>If you publish or distribute Opaque copies of the Document numbering
more than 100, you must either include a machine-readable Transparent
copy along with each Opaque copy, or state in or with each Opaque copy
a computer-network location from which the general network-using
public has access to download using public-standard network protocols
a complete Transparent copy of the Document, free of added material.
If you use the latter option, you must take reasonably prudent steps,
when you begin distribution of Opaque copies in quantity, to ensure
that this Transparent copy will remain thus accessible at the stated
location until at least one year after the last time you distribute an
Opaque copy (directly or through your agents or retailers) of that
edition to the public.
</p>
<p>It is requested, but not required, that you contact the authors of the
Document well before redistributing any large number of copies, to give
them a chance to provide you with an updated version of the Document.
</p>
</li><li>
MODIFICATIONS

<p>You may copy and distribute a Modified Version of the Document under
the conditions of sections 2 and 3 above, provided that you release
the Modified Version under precisely this License, with the Modified
Version filling the role of the Document, thus licensing distribution
and modification of the Modified Version to whoever possesses a copy
of it.  In addition, you must do these things in the Modified Version:
</p>
<ol>
<li>
Use in the Title Page (and on the covers, if any) a title distinct
from that of the Document, and from those of previous versions
(which should, if there were any, be listed in the History section
of the Document).  You may use the same title as a previous version
if the original publisher of that version gives permission.

</li><li>
List on the Title Page, as authors, one or more persons or entities
responsible for authorship of the modifications in the Modified
Version, together with at least five of the principal authors of the
Document (all of its principal authors, if it has fewer than five),
unless they release you from this requirement.

</li><li>
State on the Title page the name of the publisher of the
Modified Version, as the publisher.

</li><li>
Preserve all the copyright notices of the Document.

</li><li>
Add an appropriate copyright notice for your modifications
adjacent to the other copyright notices.

</li><li>
Include, immediately after the copyright notices, a license notice
giving the public permission to use the Modified Version under the
terms of this License, in the form shown in the Addendum below.

</li><li>
Preserve in that license notice the full lists of Invariant Sections
and required Cover Texts given in the Document&rsquo;s license notice.

</li><li>
Include an unaltered copy of this License.

</li><li>
Preserve the section Entitled &ldquo;History&rdquo;, Preserve its Title, and add
to it an item stating at least the title, year, new authors, and
publisher of the Modified Version as given on the Title Page.  If
there is no section Entitled &ldquo;History&rdquo; in the Document, create one
stating the title, year, authors, and publisher of the Document as
given on its Title Page, then add an item describing the Modified
Version as stated in the previous sentence.

</li><li>
Preserve the network location, if any, given in the Document for
public access to a Transparent copy of the Document, and likewise
the network locations given in the Document for previous versions
it was based on.  These may be placed in the &ldquo;History&rdquo; section.
You may omit a network location for a work that was published at
least four years before the Document itself, or if the original
publisher of the version it refers to gives permission.

</li><li>
For any section Entitled &ldquo;Acknowledgements&rdquo; or &ldquo;Dedications&rdquo;, Preserve
the Title of the section, and preserve in the section all the
substance and tone of each of the contributor acknowledgements and/or
dedications given therein.

</li><li>
Preserve all the Invariant Sections of the Document,
unaltered in their text and in their titles.  Section numbers
or the equivalent are not considered part of the section titles.

</li><li>
Delete any section Entitled &ldquo;Endorsements&rdquo;.  Such a section
may not be included in the Modified Version.

</li><li>
Do not retitle any existing section to be Entitled &ldquo;Endorsements&rdquo; or
to conflict in title with any Invariant Section.

</li><li>
Preserve any Warranty Disclaimers.
</li></ol>

<p>If the Modified Version includes new front-matter sections or
appendices that qualify as Secondary Sections and contain no material
copied from the Document, you may at your option designate some or all
of these sections as invariant.  To do this, add their titles to the
list of Invariant Sections in the Modified Version&rsquo;s license notice.
These titles must be distinct from any other section titles.
</p>
<p>You may add a section Entitled &ldquo;Endorsements&rdquo;, provided it contains
nothing but endorsements of your Modified Version by various
parties&mdash;for example, statements of peer review or that the text has
been approved by an organization as the authoritative definition of a
standard.
</p>
<p>You may add a passage of up to five words as a Front-Cover Text, and a
passage of up to 25 words as a Back-Cover Text, to the end of the list
of Cover Texts in the Modified Version.  Only one passage of
Front-Cover Text and one of Back-Cover Text may be added by (or
through arrangements made by) any one entity.  If the Document already
includes a cover text for the same cover, previously added by you or
by arrangement made by the same entity you are acting on behalf of,
you may not add another; but you may replace the old one, on explicit
permission from the previous publisher that added the old one.
</p>
<p>The author(s) and publisher(s) of the Document do not by this License
give permission to use their names for publicity for or to assert or
imply endorsement of any Modified Version.
</p>
</li><li>
COMBINING DOCUMENTS

<p>You may combine the Document with other documents released under this
License, under the terms defined in section 4 above for modified
versions, provided that you include in the combination all of the
Invariant Sections of all of the original documents, unmodified, and
list them all as Invariant Sections of your combined work in its
license notice, and that you preserve all their Warranty Disclaimers.
</p>
<p>The combined work need only contain one copy of this License, and
multiple identical Invariant Sections may be replaced with a single
copy.  If there are multiple Invariant Sections with the same name but
different contents, make the title of each such section unique by
adding at the end of it, in parentheses, the name of the original
author or publisher of that section if known, or else a unique number.
Make the same adjustment to the section titles in the list of
Invariant Sections in the license notice of the combined work.
</p>
<p>In the combination, you must combine any sections Entitled &ldquo;History&rdquo;
in the various original documents, forming one section Entitled
&ldquo;History&rdquo;; likewise combine any sections Entitled &ldquo;Acknowledgements&rdquo;,
and any sections Entitled &ldquo;Dedications&rdquo;.  You must delete all
sections Entitled &ldquo;Endorsements.&rdquo;
</p>
</li><li>
COLLECTIONS OF DOCUMENTS

<p>You may make a collection consisting of the Document and other documents
released under this License, and replace the individual copies of this
License in the various documents with a single copy that is included in
the collection, provided that you follow the rules of this License for
verbatim copying of each of the documents in all other respects.
</p>
<p>You may extract a single document from such a collection, and distribute
it individually under this License, provided you insert a copy of this
License into the extracted document, and follow this License in all
other respects regarding verbatim copying of that document.
</p>
</li><li>
AGGREGATION WITH INDEPENDENT WORKS

<p>A compilation of the Document or its derivatives with other separate
and independent documents or works, in or on a volume of a storage or
distribution medium, is called an &ldquo;aggregate&rdquo; if the copyright
resulting from the compilation is not used to limit the legal rights
of the compilation&rsquo;s users beyond what the individual works permit.
When the Document is included in an aggregate, this License does not
apply to the other works in the aggregate which are not themselves
derivative works of the Document.
</p>
<p>If the Cover Text requirement of section 3 is applicable to these
copies of the Document, then if the Document is less than one half of
the entire aggregate, the Document&rsquo;s Cover Texts may be placed on
covers that bracket the Document within the aggregate, or the
electronic equivalent of covers if the Document is in electronic form.
Otherwise they must appear on printed covers that bracket the whole
aggregate.
</p>
</li><li>
TRANSLATION

<p>Translation is considered a kind of modification, so you may
distribute translations of the Document under the terms of section 4.
Replacing Invariant Sections with translations requires special
permission from their copyright holders, but you may include
translations of some or all Invariant Sections in addition to the
original versions of these Invariant Sections.  You may include a
translation of this License, and all the license notices in the
Document, and any Warranty Disclaimers, provided that you also include
the original English version of this License and the original versions
of those notices and disclaimers.  In case of a disagreement between
the translation and the original version of this License or a notice
or disclaimer, the original version will prevail.
</p>
<p>If a section in the Document is Entitled &ldquo;Acknowledgements&rdquo;,
&ldquo;Dedications&rdquo;, or &ldquo;History&rdquo;, the requirement (section 4) to Preserve
its Title (section 1) will typically require changing the actual
title.
</p>
</li><li>
TERMINATION

<p>You may not copy, modify, sublicense, or distribute the Document
except as expressly provided under this License.  Any attempt
otherwise to copy, modify, sublicense, or distribute it is void, and
will automatically terminate your rights under this License.
</p>
<p>However, if you cease all violation of this License, then your license
from a particular copyright holder is reinstated (a) provisionally,
unless and until the copyright holder explicitly and finally
terminates your license, and (b) permanently, if the copyright holder
fails to notify you of the violation by some reasonable means prior to
60 days after the cessation.
</p>
<p>Moreover, your license from a particular copyright holder is
reinstated permanently if the copyright holder notifies you of the
violation by some reasonable means, this is the first time you have
received notice of violation of this License (for any work) from that
copyright holder, and you cure the violation prior to 30 days after
your receipt of the notice.
</p>
<p>Termination of your rights under this section does not terminate the
licenses of parties who have received copies or rights from you under
this License.  If your rights have been terminated and not permanently
reinstated, receipt of a copy of some or all of the same material does
not give you any rights to use it.
</p>
</li><li>
FUTURE REVISIONS OF THIS LICENSE

<p>The Free Software Foundation may publish new, revised versions
of the GNU Free Documentation License from time to time.  Such new
versions will be similar in spirit to the present version, but may
differ in detail to address new problems or concerns.  See
<a href="http://www.gnu.org/copyleft">http://www.gnu.org/copyleft/</a>.
</p>
<p>Each version of the License is given a distinguishing version number.
If the Document specifies that a particular numbered version of this
License &ldquo;or any later version&rdquo; applies to it, you have the option of
following the terms and conditions either of that specified version or
of any later version that has been published (not as a draft) by the
Free Software Foundation.  If the Document does not specify a version
number of this License, you may choose any version ever published (not
as a draft) by the Free Software Foundation.  If the Document
specifies that a proxy can decide which future versions of this
License can be used, that proxy&rsquo;s public statement of acceptance of a
version permanently authorizes you to choose that version for the
Document.
</p>
</li><li>
RELICENSING

<p>&ldquo;Massive Multiauthor Collaboration Site&rdquo; (or &ldquo;MMC Site&rdquo;) means any
World Wide Web server that publishes copyrightable works and also
provides prominent facilities for anybody to edit those works.  A
public wiki that anybody can edit is an example of such a server.  A
&ldquo;Massive Multiauthor Collaboration&rdquo; (or &ldquo;MMC&rdquo;) contained in the
site means any set of copyrightable works thus published on the MMC
site.
</p>
<p>&ldquo;CC-BY-SA&rdquo; means the Creative Commons Attribution-Share Alike 3.0
license published by Creative Commons Corporation, a not-for-profit
corporation with a principal place of business in San Francisco,
California, as well as future copyleft versions of that license
published by that same organization.
</p>
<p>&ldquo;Incorporate&rdquo; means to publish or republish a Document, in whole or
in part, as part of another Document.
</p>
<p>An MMC is &ldquo;eligible for relicensing&rdquo; if it is licensed under this
License, and if all works that were first published under this License
somewhere other than this MMC, and subsequently incorporated in whole
or in part into the MMC, (1) had no cover texts or invariant sections,
and (2) were thus incorporated prior to November 1, 2008.
</p>
<p>The operator of an MMC Site may republish an MMC contained in the site
under CC-BY-SA on the same site at any time before August 1, 2009,
provided the MMC is eligible for relicensing.
</p>
</li></ol>


<a name="ADDENDUM_003a-How-to-use-this-License-for-your-documents"></a>
<h2 class="heading">ADDENDUM: How to use this License for your documents</h2>

<p>To use this License in a document you have written, include a copy of
the License in the document and put the following copyright and
license notices just after the title page:
</p>
<table><tr><td>&nbsp;</td><td><pre class="smallexample">  Copyright (C)  <var>year</var>  <var>your name</var>.
  Permission is granted to copy, distribute and/or modify this document
  under the terms of the GNU Free Documentation License, Version 1.3
  or any later version published by the Free Software Foundation;
  with no Invariant Sections, no Front-Cover Texts, and no Back-Cover
  Texts.  A copy of the license is included in the section entitled ``GNU
  Free Documentation License''.
</pre></td></tr></table>

<p>If you have Invariant Sections, Front-Cover Texts and Back-Cover Texts,
replace the &ldquo;with&hellip;Texts.&rdquo; line with this:
</p>
<table><tr><td>&nbsp;</td><td><pre class="smallexample">    with the Invariant Sections being <var>list their titles</var>, with
    the Front-Cover Texts being <var>list</var>, and with the Back-Cover Texts
    being <var>list</var>.
</pre></td></tr></table>

<p>If you have Invariant Sections without Cover Texts, or some other
combination of the three, merge those two alternatives to suit the
situation.
</p>
<p>If your document contains nontrivial examples of program code, we
recommend releasing these examples in parallel under your choice of
free software license, such as the GNU General Public License,
to permit their use in free software.
</p>


<hr size="6">
<a name="LilyPond-index"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#gnu-free-documentation-license" title="Beginning of this chapter or previous chapter"> &lt;&lt; GNU Free Documentation License&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[&nbsp; &gt;&gt; ]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#gnu-free-documentation-license" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; GNU Free Documentation License&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#index" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Top&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[&nbsp; &gt; ]</td></tr></table>
<a name="lilypond-index"></a>
<h1 class="appendix">B. LilyPond index</h1>

<table><tr><th valign="top">Jump to: &nbsp; </th><td><a href="#lilypond-index_cp_symbol-1" class="summary-letter"><b>\</b></a>
 &nbsp; 
<br>
<a href="#lilypond-index_cp_letter-A" class="summary-letter"><b>A</b></a>
 &nbsp; 
<a href="#lilypond-index_cp_letter-B" class="summary-letter"><b>B</b></a>
 &nbsp; 
<a href="#lilypond-index_cp_letter-C" class="summary-letter"><b>C</b></a>
 &nbsp; 
<a href="#lilypond-index_cp_letter-D" class="summary-letter"><b>D</b></a>
 &nbsp; 
<a href="#lilypond-index_cp_letter-E" class="summary-letter"><b>E</b></a>
 &nbsp; 
<a href="#lilypond-index_cp_letter-F" class="summary-letter"><b>F</b></a>
 &nbsp; 
<a href="#lilypond-index_cp_letter-H" class="summary-letter"><b>H</b></a>
 &nbsp; 
<a href="#lilypond-index_cp_letter-I" class="summary-letter"><b>I</b></a>
 &nbsp; 
<a href="#lilypond-index_cp_letter-L" class="summary-letter"><b>L</b></a>
 &nbsp; 
<a href="#lilypond-index_cp_letter-M" class="summary-letter"><b>M</b></a>
 &nbsp; 
<a href="#lilypond-index_cp_letter-O" class="summary-letter"><b>O</b></a>
 &nbsp; 
<a href="#lilypond-index_cp_letter-P" class="summary-letter"><b>P</b></a>
 &nbsp; 
<a href="#lilypond-index_cp_letter-S" class="summary-letter"><b>S</b></a>
 &nbsp; 
<a href="#lilypond-index_cp_letter-T" class="summary-letter"><b>T</b></a>
 &nbsp; 
<a href="#lilypond-index_cp_letter-U" class="summary-letter"><b>U</b></a>
 &nbsp; 
<a href="#lilypond-index_cp_letter-V" class="summary-letter"><b>V</b></a>
 &nbsp; 
<a href="#lilypond-index_cp_letter-W" class="summary-letter"><b>W</b></a>
 &nbsp; 
</td></tr></table>
<table border="0" class="index-cp">
<tr><td></td><th align="left">Index Entry</th><th align="left"> Section</th></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="lilypond-index_cp_symbol-1">\</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005cheader-in-LaTeX-documents">\header in LaTeX documents</a></td><td valign="top"><a href="#latex">3.2.1 LaTeX</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="lilypond-index_cp_letter-A">A</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-ABC">ABC</a></td><td valign="top"><a href="#invoking-abc2ly">4.3.3 Invoking <code>abc2ly</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Aborted-_0028core-dumped_0029">Aborted (core dumped)</a></td><td valign="top"><a href="#error-messages">1.3 Error messages</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="lilypond-index_cp_letter-B">B</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-Bar-and-bar-number-checks"><code>Bar and bar number checks</code></a></td><td valign="top"><a href="#music-runs-off-the-page">Music runs off the page</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Bar-and-bar-number-checks-1"><code>Bar and bar number checks</code></a></td><td valign="top"><a href="#general-suggestions">5.1 General suggestions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Bar-lines"><code>Bar lines</code></a></td><td valign="top"><a href="#music-runs-off-the-page">Music runs off the page</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="lilypond-index_cp_letter-C">C</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-call-trace">call trace</a></td><td valign="top"><a href="#error-messages">1.3 Error messages</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-chroot-jail_002c-running-inside">chroot jail, running inside</a></td><td valign="top"><a href="#basic-command-line-options-for-lilypond">Basic command line options for LilyPond</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Coda-Technology">Coda Technology</a></td><td valign="top"><a href="#invoking-etf2ly">4.3.4 Invoking <code>etf2ly</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#index-coloring_002c-syntax">coloring, syntax</a></td><td valign="top"><a href="#text-editor-support">4.2 Text editor support</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-command-line-options-for-lilypond">command line options for <code>lilypond</code></a></td><td valign="top"><a href="#basic-command-line-options-for-lilypond">Basic command line options for LilyPond</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-convert_002dly">convert-ly</a></td><td valign="top"><a href="#updating-files-with-convert_002dly">2. Updating files with <code>convert-ly</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#index-convert_002dly-1">convert-ly</a></td><td valign="top"><a href="#why-does-the-syntax-change_003f">2.1 Why does the syntax change?</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="lilypond-index_cp_letter-D">D</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-directory_002c-redirect-output">directory, redirect output</a></td><td valign="top"><a href="#basic-command-line-options-for-lilypond">Basic command line options for LilyPond</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-docbook">docbook</a></td><td valign="top"><a href="#lilypond_002dbook">3. Running <code>lilypond-book</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#index-DocBook_002c-adding-music">DocBook, adding music</a></td><td valign="top"><a href="#lilypond_002dbook">3. Running <code>lilypond-book</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#index-documents_002c-adding-music">documents, adding music</a></td><td valign="top"><a href="#lilypond_002dbook">3. Running <code>lilypond-book</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dvips">dvips</a></td><td valign="top"><a href="#LaTeX-3">LaTeX</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="lilypond-index_cp_letter-E">E</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-Easier-editing"><code>Easier editing</code></a></td><td valign="top"><a href="#other-editors">Other editors</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Easier-editing-1"><code>Easier editing</code></a></td><td valign="top"><a href="#other-formats">4.3.5 Other formats</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-editors">editors</a></td><td valign="top"><a href="#text-editor-support">4.2 Text editor support</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-emacs">emacs</a></td><td valign="top"><a href="#text-editor-support">4.2 Text editor support</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-enigma">enigma</a></td><td valign="top"><a href="#invoking-etf2ly">4.3.4 Invoking <code>etf2ly</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Entering-lyrics"><code>Entering lyrics</code></a></td><td valign="top"><a href="#apparent-error-in-_002e_002e_002fly_002finit_002ely">Apparent error in <code>../ly/init.ly</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#index-error">error</a></td><td valign="top"><a href="#error-messages">1.3 Error messages</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-error-messages">error messages</a></td><td valign="top"><a href="#error-messages">1.3 Error messages</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-errors_002c-message-format">errors, message format</a></td><td valign="top"><a href="#error-messages">1.3 Error messages</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ETF">ETF</a></td><td valign="top"><a href="#invoking-etf2ly">4.3.4 Invoking <code>etf2ly</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#index-expression-evaluation_002c-Scheme">expression evaluation, Scheme</a></td><td valign="top"><a href="#basic-command-line-options-for-lilypond">Basic command line options for LilyPond</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-External-programs_002c-generating-LilyPond-files">External programs, generating LilyPond files</a></td><td valign="top"><a href="#other-formats">4.3.5 Other formats</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Extracting-fragments-of-music"><code>Extracting fragments of music</code></a></td><td valign="top"><a href="#many-quotes-from-a-large-score">Many quotes from a large score</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="lilypond-index_cp_letter-F">F</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-fatal-error">fatal error</a></td><td valign="top"><a href="#error-messages">1.3 Error messages</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-file-searching">file searching</a></td><td valign="top"><a href="#basic-command-line-options-for-lilypond">Basic command line options for LilyPond</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-file-size_002c-output">file size, output</a></td><td valign="top"><a href="#enabling-point-and-click">Enabling point and click</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Finale">Finale</a></td><td valign="top"><a href="#invoking-etf2ly">4.3.4 Invoking <code>etf2ly</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Flexible-vertical-spacing-within-systems"><code>Flexible vertical spacing within systems</code></a></td><td valign="top"><a href="#warning-staff-affinities-should-only-decrease">Warning staff affinities should only decrease</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-format_002c-output">format, output</a></td><td valign="top"><a href="#basic-command-line-options-for-lilypond">Basic command line options for LilyPond</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="lilypond-index_cp_letter-H">H</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-How-LilyPond-input-files-work"><code>How LilyPond input files work</code></a></td><td valign="top"><a href="#apparent-error-in-_002e_002e_002fly_002finit_002ely">Apparent error in <code>../ly/init.ly</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#index-HTML">HTML</a></td><td valign="top"><a href="#lilypond_002dbook">3. Running <code>lilypond-book</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#index-HTML_002c-adding-music">HTML, adding music</a></td><td valign="top"><a href="#lilypond_002dbook">3. Running <code>lilypond-book</code></a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="lilypond-index_cp_letter-I">I</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-invoking-dvips">invoking dvips</a></td><td valign="top"><a href="#LaTeX-3">LaTeX</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Invoking-lilypond">Invoking <code>lilypond</code></a></td><td valign="top"><a href="#basic-command-line-options-for-lilypond">Basic command line options for LilyPond</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="lilypond-index_cp_letter-L">L</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-LANG">LANG</a></td><td valign="top"><a href="#environment-variables">Environment variables</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-LaTex">LaTex</a></td><td valign="top"><a href="#lilypond_002dbook">3. Running <code>lilypond-book</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#index-LaTeX_002c-adding-music">LaTeX, adding music</a></td><td valign="top"><a href="#lilypond_002dbook">3. Running <code>lilypond-book</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#index-LILYPOND_005fDATADIR">LILYPOND_DATADIR</a></td><td valign="top"><a href="#environment-variables">Environment variables</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-loglevel">loglevel</a></td><td valign="top"><a href="#basic-command-line-options-for-lilypond">Basic command line options for LilyPond</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="lilypond-index_cp_letter-M">M</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-MacOS-X"><code>MacOS X</code></a></td><td valign="top"><a href="#command_002dline-usage">1.2 Command-line usage</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-MacOS-X-1"><code>MacOS X</code></a></td><td valign="top"><a href="#lilypond_002dbook">3. Running <code>lilypond-book</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#index-MacOS-X-2"><code>MacOS X</code></a></td><td valign="top"><a href="#converting-from-other-formats">4.3 Converting from other formats</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-make">make</a></td><td valign="top"><a href="#make-and-makefiles">5.5 Make and Makefiles</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-makefiles">makefiles</a></td><td valign="top"><a href="#make-and-makefiles">5.5 Make and Makefiles</a></td></tr>
<tr><td></td><td valign="top"><a href="#index"><code>Manuals</code></a></td><td valign="top"><a href="#index">LilyPond &mdash; Usage</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Manuals"><code>Manuals</code></a></td><td valign="top"><a href="#index">LilyPond &mdash; Usage</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-MIDI">MIDI</a></td><td valign="top"><a href="#invoking-midi2ly">4.3.1 Invoking <code>midi2ly</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#index-modes_002c-editor">modes, editor</a></td><td valign="top"><a href="#text-editor-support">4.2 Text editor support</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-musicology">musicology</a></td><td valign="top"><a href="#an-example-of-a-musicological-document">3.1 An example of a musicological document</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-MusicXML">MusicXML</a></td><td valign="top"><a href="#invoking-musicxml2ly">4.3.2 Invoking <code>musicxml2ly</code></a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="lilypond-index_cp_letter-O">O</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-Octave-checks"><code>Octave checks</code></a></td><td valign="top"><a href="#general-suggestions">5.1 General suggestions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-OpenOffice_002eorg">OpenOffice.org</a></td><td valign="top"><a href="#inserting-lilypond-output-into-openoffice_002eorg">Inserting LilyPond output into OpenOffice.org</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-options_002c-command-line">options, command line</a></td><td valign="top"><a href="#basic-command-line-options-for-lilypond">Basic command line options for LilyPond</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Other-sources-of-information"><code>Other sources of information</code></a></td><td valign="top"><a href="#vim-mode">Vim mode</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-outline-fonts">outline fonts</a></td><td valign="top"><a href="#LaTeX-3">LaTeX</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-output_002c-directory">output, directory</a></td><td valign="top"><a href="#basic-command-line-options-for-lilypond">Basic command line options for LilyPond</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-output_002c-format">output, format</a></td><td valign="top"><a href="#basic-command-line-options-for-lilypond">Basic command line options for LilyPond</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-output_002c-PDF-_0028Portable-Document-Format_0029">output, PDF (Portable Document Format)</a></td><td valign="top"><a href="#basic-command-line-options-for-lilypond">Basic command line options for LilyPond</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-output_002c-PNG-_0028Portable-Network-Graphics_0029">output, PNG (Portable Network Graphics)</a></td><td valign="top"><a href="#basic-command-line-options-for-lilypond">Basic command line options for LilyPond</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-output_002c-PS-_0028Postscript_0029">output, PS (Postscript)</a></td><td valign="top"><a href="#basic-command-line-options-for-lilypond">Basic command line options for LilyPond</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-output_002c-setting-filename">output, setting filename</a></td><td valign="top"><a href="#basic-command-line-options-for-lilypond">Basic command line options for LilyPond</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-output_002c-verbosity">output, verbosity</a></td><td valign="top"><a href="#basic-command-line-options-for-lilypond">Basic command line options for LilyPond</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="lilypond-index_cp_letter-P">P</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-PDF-_0028Portable-Document-Format_0029_002c-output">PDF (Portable Document Format), output</a></td><td valign="top"><a href="#basic-command-line-options-for-lilypond">Basic command line options for LilyPond</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-PNG-_0028Portable-Network-Graphics_0029_002c-output">PNG (Portable Network Graphics), output</a></td><td valign="top"><a href="#basic-command-line-options-for-lilypond">Basic command line options for LilyPond</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-point-and-click">point and click</a></td><td valign="top"><a href="#enabling-point-and-click">Enabling point and click</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-point-and-click_002c-command-line">point and click, command line</a></td><td valign="top"><a href="#advanced-command-line-options-for-lilypond">Advanced command line options for LilyPond</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Postscript-_0028PS_0029_002c-output">Postscript (PS), output</a></td><td valign="top"><a href="#basic-command-line-options-for-lilypond">Basic command line options for LilyPond</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-preview-image">preview image</a></td><td valign="top"><a href="#html">3.2.3 HTML</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Programming-error">Programming error</a></td><td valign="top"><a href="#error-messages">1.3 Error messages</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-PS-_0028Postscript_0029_002c-output">PS (Postscript), output</a></td><td valign="top"><a href="#basic-command-line-options-for-lilypond">Basic command line options for LilyPond</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="lilypond-index_cp_letter-S">S</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-Saving-typing-with-variables-and-functions"><code>Saving typing with variables and functions</code></a></td><td valign="top"><a href="#general-suggestions">5.1 General suggestions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Scheme-error">Scheme error</a></td><td valign="top"><a href="#error-messages">1.3 Error messages</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Scheme_002c-expression-evaluation">Scheme, expression evaluation</a></td><td valign="top"><a href="#basic-command-line-options-for-lilypond">Basic command line options for LilyPond</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-search-path">search path</a></td><td valign="top"><a href="#basic-command-line-options-for-lilypond">Basic command line options for LilyPond</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Skipping-corrected-music"><code>Skipping corrected music</code></a></td><td valign="top"><a href="#typesetting-existing-music">5.2 Typesetting existing music</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Staff"><code>Staff</code></a></td><td valign="top"><a href="#invoking-midi2ly">4.3.1 Invoking <code>midi2ly</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Style-sheets"><code>Style sheets</code></a></td><td valign="top"><a href="#general-suggestions">5.1 General suggestions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-switches">switches</a></td><td valign="top"><a href="#basic-command-line-options-for-lilypond">Basic command line options for LilyPond</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-syntax-coloring">syntax coloring</a></td><td valign="top"><a href="#text-editor-support">4.2 Text editor support</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="lilypond-index_cp_letter-T">T</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-texi">texi</a></td><td valign="top"><a href="#lilypond_002dbook">3. Running <code>lilypond-book</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#index-texinfo">texinfo</a></td><td valign="top"><a href="#lilypond_002dbook">3. Running <code>lilypond-book</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#index-texinfo-1">texinfo</a></td><td valign="top"><a href="#lilypond_002dbook">3. Running <code>lilypond-book</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Texinfo_002c-adding-music">Texinfo, adding music</a></td><td valign="top"><a href="#lilypond_002dbook">3. Running <code>lilypond-book</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Text-encoding"><code>Text encoding</code></a></td><td valign="top"><a href="#error-message-ft_005fget_005fglyph_005fname">Error message FT_Get_Glyph_Name</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-thumbnail">thumbnail</a></td><td valign="top"><a href="#html">3.2.3 HTML</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Tiny-examples"><code>Tiny examples</code></a></td><td valign="top"><a href="#troubleshooting">5.4 Troubleshooting</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-titling-and-lilypond_002dbook">titling and lilypond-book</a></td><td valign="top"><a href="#latex">3.2.1 LaTeX</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-titling-in-HTML">titling in HTML</a></td><td valign="top"><a href="#html">3.2.3 HTML</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-trace_002c-Scheme">trace, Scheme</a></td><td valign="top"><a href="#error-messages">1.3 Error messages</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Tutorial"><code>Tutorial</code></a></td><td valign="top"><a href="#normal-usage">1.1 Normal usage</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-type1-fonts">type1 fonts</a></td><td valign="top"><a href="#LaTeX-3">LaTeX</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="lilypond-index_cp_letter-U">U</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-Updating-a-LilyPond-file">Updating a LilyPond file</a></td><td valign="top"><a href="#updating-files-with-convert_002dly">2. Updating files with <code>convert-ly</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#index-updating-old-input-files">updating old input files</a></td><td valign="top"><a href="#why-does-the-syntax-change_003f">2.1 Why does the syntax change?</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="lilypond-index_cp_letter-V">V</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-vim">vim</a></td><td valign="top"><a href="#text-editor-support">4.2 Text editor support</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Voice"><code>Voice</code></a></td><td valign="top"><a href="#invoking-midi2ly">4.3.1 Invoking <code>midi2ly</code></a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="lilypond-index_cp_letter-W">W</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-warning">warning</a></td><td valign="top"><a href="#error-messages">1.3 Error messages</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Windows"><code>Windows</code></a></td><td valign="top"><a href="#lilypond_002dbook">3. Running <code>lilypond-book</code></a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
</table>
<table><tr><th valign="top">Jump to: &nbsp; </th><td><a href="#lilypond-index_cp_symbol-1" class="summary-letter"><b>\</b></a>
 &nbsp; 
<br>
<a href="#lilypond-index_cp_letter-A" class="summary-letter"><b>A</b></a>
 &nbsp; 
<a href="#lilypond-index_cp_letter-B" class="summary-letter"><b>B</b></a>
 &nbsp; 
<a href="#lilypond-index_cp_letter-C" class="summary-letter"><b>C</b></a>
 &nbsp; 
<a href="#lilypond-index_cp_letter-D" class="summary-letter"><b>D</b></a>
 &nbsp; 
<a href="#lilypond-index_cp_letter-E" class="summary-letter"><b>E</b></a>
 &nbsp; 
<a href="#lilypond-index_cp_letter-F" class="summary-letter"><b>F</b></a>
 &nbsp; 
<a href="#lilypond-index_cp_letter-H" class="summary-letter"><b>H</b></a>
 &nbsp; 
<a href="#lilypond-index_cp_letter-I" class="summary-letter"><b>I</b></a>
 &nbsp; 
<a href="#lilypond-index_cp_letter-L" class="summary-letter"><b>L</b></a>
 &nbsp; 
<a href="#lilypond-index_cp_letter-M" class="summary-letter"><b>M</b></a>
 &nbsp; 
<a href="#lilypond-index_cp_letter-O" class="summary-letter"><b>O</b></a>
 &nbsp; 
<a href="#lilypond-index_cp_letter-P" class="summary-letter"><b>P</b></a>
 &nbsp; 
<a href="#lilypond-index_cp_letter-S" class="summary-letter"><b>S</b></a>
 &nbsp; 
<a href="#lilypond-index_cp_letter-T" class="summary-letter"><b>T</b></a>
 &nbsp; 
<a href="#lilypond-index_cp_letter-U" class="summary-letter"><b>U</b></a>
 &nbsp; 
<a href="#lilypond-index_cp_letter-V" class="summary-letter"><b>V</b></a>
 &nbsp; 
<a href="#lilypond-index_cp_letter-W" class="summary-letter"><b>W</b></a>
 &nbsp; 
</td></tr></table>

<hr size="6">
<a name="SEC_Foot"></a>
<table class="nav_table">
<tr><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td></tr></table>
<h1>Footnotes</h1>
<p class="footnote"><small>[<a name="FOOT1" href="#DOCF1">1</a>]</small> The status of
GUILE is not reset after processing a <code>.ly</code> file, so be careful
not to change any system defaults from within Scheme.
</p><p class="footnote"><small>[<a name="FOOT2" href="#DOCF2">2</a>]</small> At least, this is
possible in any LilyPond file which does not contain scheme.  If
there is scheme in the file, then the LilyPond file contains a
Turing-complete language, and we run into problems with the famous
&ldquo;Halting Problem&rdquo; in computer science.
</p><p class="footnote"><small>[<a name="FOOT3" href="#DOCF3">3</a>]</small> This
tutorial is processed with Texinfo, so the example gives slightly
different results in layout.
</p><p class="footnote"><small>[<a name="FOOT4" href="#DOCF4">4</a>]</small> Note
that PDFLaTeX and LaTeX may not be both usable to compile any
LaTeX document, that is why we explain the two ways.
</p><hr size="1">
<a name="SEC_Contents"></a>
<table class="nav_table">
<tr><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td></tr></table>
<h1>Table of Contents</h1>
<div class="contents">

<ul class="toc">
  <li><a name="toc-Running-lilypond-1" href="#running-lilypond">1. Running <code>lilypond</code></a>
  <ul class="toc">
    <li><a name="toc-Normal-usage-1" href="#normal-usage">1.1 Normal usage</a></li>
    <li><a name="toc-Command_002dline-usage-1" href="#command_002dline-usage">1.2 Command-line usage</a>
    <ul class="toc">
      <li><a name="toc-Invoking-lilypond-1" href="#invoking-lilypond">Invoking <code>lilypond</code></a>
      <ul class="toc">
        <li><a name="toc-Standard-shell-commands" href="#invoking-lilypond">Standard shell commands</a></li>
      </ul></li>
      <li><a name="toc-Basic-command-line-options-for-LilyPond-1" href="#basic-command-line-options-for-lilypond">Basic command line options for LilyPond</a></li>
      <li><a name="toc-Advanced-command-line-options-for-LilyPond-1" href="#advanced-command-line-options-for-lilypond">Advanced command line options for LilyPond</a></li>
      <li><a name="toc-Environment-variables-1" href="#environment-variables">Environment variables</a></li>
      <li><a name="toc-LilyPond-in-chroot-jail-1" href="#lilypond-in-chroot-jail">LilyPond in chroot jail</a></li>
    </ul></li>
    <li><a name="toc-Error-messages-1" href="#error-messages">1.3 Error messages</a></li>
    <li><a name="toc-Common-errors-1" href="#common-errors">1.4 Common errors</a>
    <ul class="toc">
      <li><a name="toc-Music-runs-off-the-page-1" href="#music-runs-off-the-page">Music runs off the page</a></li>
      <li><a name="toc-An-extra-staff-appears-1" href="#an-extra-staff-appears">An extra staff appears</a></li>
      <li><a name="toc-Apparent-error-in-_002e_002e_002fly_002finit_002ely-1" href="#apparent-error-in-_002e_002e_002fly_002finit_002ely">Apparent error in <code>../ly/init.ly</code></a></li>
      <li><a name="toc-Error-message-Unbound-variable-_0025-1" href="#error-message-unbound-variable-_0025">Error message Unbound variable %</a></li>
      <li><a name="toc-Error-message-FT_005fGet_005fGlyph_005fName-1" href="#error-message-ft_005fget_005fglyph_005fname">Error message FT_Get_Glyph_Name</a></li>
      <li><a name="toc-Warning-staff-affinities-should-only-decrease-1" href="#warning-staff-affinities-should-only-decrease">Warning staff affinities should only decrease</a></li>
    </ul>
</li>
  </ul></li>
  <li><a name="toc-Updating-files-with-convert_002dly-1" href="#updating-files-with-convert_002dly">2. Updating files with <code>convert-ly</code></a>
  <ul class="toc">
    <li><a name="toc-Why-does-the-syntax-change_003f-1" href="#why-does-the-syntax-change_003f">2.1 Why does the syntax change?</a></li>
    <li><a name="toc-Invoking-convert_002dly-1" href="#invoking-convert_002dly">2.2 Invoking <code>convert-ly</code></a></li>
    <li><a name="toc-Command-line-options-for-convert_002dly-1" href="#command-line-options-for-convert_002dly">2.3 Command line options for <code>convert-ly</code></a></li>
    <li><a name="toc-Problems-running-convert_002dly-1" href="#problems-running-convert_002dly">2.4 Problems running <code>convert-ly</code></a></li>
    <li><a name="toc-Manual-conversions-1" href="#manual-conversions">2.5 Manual conversions</a></li>
  </ul></li>
  <li><a name="toc-Running-lilypond_002dbook" href="#lilypond_002dbook">3. Running <code>lilypond-book</code></a>
  <ul class="toc">
    <li><a name="toc-An-example-of-a-musicological-document-1" href="#an-example-of-a-musicological-document">3.1 An example of a musicological document</a></li>
    <li><a name="toc-Integrating-music-and-text-1" href="#integrating-music-and-text">3.2 Integrating music and text</a>
    <ul class="toc">
      <li><a name="toc-LaTeX-1" href="#latex">3.2.1 LaTeX</a></li>
      <li><a name="toc-Texinfo-2" href="#texinfo">3.2.2 Texinfo</a></li>
      <li><a name="toc-HTML-1" href="#html">3.2.3 HTML</a></li>
      <li><a name="toc-DocBook-1" href="#docbook">3.2.4 DocBook</a></li>
    </ul></li>
    <li><a name="toc-Music-fragment-options-1" href="#music-fragment-options">3.3 Music fragment options</a></li>
    <li><a name="toc-Invoking-lilypond_002dbook-1" href="#invoking-lilypond_002dbook">3.4 Invoking <code>lilypond-book</code></a></li>
    <li><a name="toc-Filename-extensions-1" href="#filename-extensions">3.5 Filename extensions</a></li>
    <li><a name="toc-lilypond_002dbook-templates-1" href="#lilypond_002dbook-templates">3.6 lilypond-book templates</a>
    <ul class="toc">
      <li><a name="toc-LaTeX-2" href="#lilypond_002dbook-templates">3.6.1 LaTeX</a></li>
      <li><a name="toc-Texinfo-1" href="#lilypond_002dbook-templates">3.6.2 Texinfo</a></li>
      <li><a name="toc-html" href="#lilypond_002dbook-templates">3.6.3 html</a></li>
      <li><a name="toc-xelatex" href="#lilypond_002dbook-templates">3.6.4 xelatex</a></li>
    </ul></li>
    <li><a name="toc-Sharing-the-table-of-contents-1" href="#sharing-the-table-of-contents">3.7 Sharing the table of contents</a></li>
    <li><a name="toc-Alternative-methods-of-mixing-text-and-music" href="#alternate-methods-of-mixing-text-and-music">3.8 Alternative methods of mixing text and music</a></li>
  </ul></li>
  <li><a name="toc-External-programs-1" href="#external-programs">4. External programs</a>
  <ul class="toc">
    <li><a name="toc-Point-and-click-1" href="#point-and-click">4.1 Point and click</a>
    <ul class="toc">
      <li><a name="toc-Enabling-point-and-click-1" href="#enabling-point-and-click">Enabling point and click</a></li>
      <li><a name="toc-Selective-point_002dand_002dclick-1" href="#selective-point_002dand_002dclick">Selective point-and-click</a></li>
    </ul></li>
    <li><a name="toc-Text-editor-support-1" href="#text-editor-support">4.2 Text editor support</a>
    <ul class="toc">
      <li><a name="toc-Emacs-mode-1" href="#emacs-mode">Emacs mode</a></li>
      <li><a name="toc-Vim-mode-1" href="#vim-mode">Vim mode</a></li>
      <li><a name="toc-Other-editors-1" href="#other-editors">Other editors</a></li>
    </ul></li>
    <li><a name="toc-Converting-from-other-formats-1" href="#converting-from-other-formats">4.3 Converting from other formats</a>
    <ul class="toc">
      <li><a name="toc-Invoking-midi2ly-1" href="#invoking-midi2ly">4.3.1 Invoking <code>midi2ly</code></a></li>
      <li><a name="toc-Invoking-musicxml2ly-1" href="#invoking-musicxml2ly">4.3.2 Invoking <code>musicxml2ly</code></a></li>
      <li><a name="toc-Invoking-abc2ly-1" href="#invoking-abc2ly">4.3.3 Invoking <code>abc2ly</code></a></li>
      <li><a name="toc-Invoking-etf2ly-1" href="#invoking-etf2ly">4.3.4 Invoking <code>etf2ly</code></a></li>
      <li><a name="toc-Other-formats-1" href="#other-formats">4.3.5 Other formats</a></li>
    </ul></li>
    <li><a name="toc-LilyPond-output-in-other-programs-1" href="#lilypond-output-in-other-programs">4.4 LilyPond output in other programs</a>
    <ul class="toc">
      <li><a name="toc-Many-quotes-from-a-large-score-1" href="#many-quotes-from-a-large-score">Many quotes from a large score</a></li>
      <li><a name="toc-Inserting-LilyPond-output-into-OpenOffice_002eorg-1" href="#inserting-lilypond-output-into-openoffice_002eorg">Inserting LilyPond output into OpenOffice.org</a></li>
      <li><a name="toc-Inserting-LilyPond-output-into-other-programs-1" href="#inserting-lilypond-output-into-other-programs">Inserting LilyPond output into other programs</a></li>
    </ul></li>
    <li><a name="toc-Independent-includes-1" href="#independent-includes">4.5 Independent <code>include</code>s</a>
    <ul class="toc">
      <li><a name="toc-MIDI-articulation-1" href="#midi-articulation">4.5.1 MIDI articulation</a></li>
    </ul>
</li>
  </ul></li>
  <li><a name="toc-Suggestions-for-writing-files-1" href="#suggestions-for-writing-files">5. Suggestions for writing files</a>
  <ul class="toc">
    <li><a name="toc-General-suggestions-1" href="#general-suggestions">5.1 General suggestions</a></li>
    <li><a name="toc-Typesetting-existing-music-1" href="#typesetting-existing-music">5.2 Typesetting existing music</a></li>
    <li><a name="toc-Large-projects-1" href="#large-projects">5.3 Large projects</a></li>
    <li><a name="toc-Troubleshooting-1" href="#troubleshooting">5.4 Troubleshooting</a></li>
    <li><a name="toc-Make-and-Makefiles-1" href="#make-and-makefiles">5.5 Make and Makefiles</a></li>
  </ul></li>
  <li><a name="toc-GNU-Free-Documentation-License-1" href="#gnu-free-documentation-license">A. GNU Free Documentation License</a></li>
  <li><a name="toc-LilyPond-index-1" href="#lilypond-index">B. LilyPond index</a></li>
</ul>
</div>
<hr size="1">
<a name="SEC_About"></a>
<table class="nav_table">
<tr><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td></tr></table>
<h1>About This Document</h1>
<p>
  This document was generated by <em>Build Daemon user</em> on <em>January 1, 2014</em> using <a href="http://www.nongnu.org/texi2html/"><em>texi2html 1.82</em></a>.
</p>
<p>
  The buttons in the navigation panels have the following meaning:
</p>
<table border="1">
  <tr>
    <th> Button </th>
    <th> Name </th>
    <th> Go to </th>
    <th> From 1.2.3 go to</th>
  </tr>
  <tr>
    <td align="center"> [] </td>
    <td align="center"></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td align="center"> [ &lt;&lt; ] </td>
    <td align="center">FastBack</td>
    <td>Beginning of this chapter or previous chapter</td>
    <td>1</td>
  </tr>
  <tr>
    <td align="center"> [] </td>
    <td align="center"></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td align="center"> [Top] </td>
    <td align="center">Top</td>
    <td>Cover (top) of document</td>
    <td> &nbsp; </td>
  </tr>
  <tr>
    <td align="center"> [Contents] </td>
    <td align="center">Contents</td>
    <td>Table of contents</td>
    <td> &nbsp; </td>
  </tr>
  <tr>
    <td align="center"> [Index] </td>
    <td align="center">Index</td>
    <td>Index</td>
    <td> &nbsp; </td>
  </tr>
  <tr>
    <td align="center"> [ ? ] </td>
    <td align="center">About</td>
    <td>About (help)</td>
    <td> &nbsp; </td>
  </tr>
  <tr>
    <td align="center"> [] </td>
    <td align="center"></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td align="center"> [ &gt;&gt; ] </td>
    <td align="center">FastForward</td>
    <td>Next chapter</td>
    <td>2</td>
  </tr>
  <tr>
    <td align="center"> [] </td>
    <td align="center"></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td align="center"> [] </td>
    <td align="center"></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td align="center"> [ &lt; ] </td>
    <td align="center">Back</td>
    <td>Previous section in reading order</td>
    <td>1.2.2</td>
  </tr>
  <tr>
    <td align="center"> [] </td>
    <td align="center"></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td align="center"> [ Up ] </td>
    <td align="center">Up</td>
    <td>Up section</td>
    <td>1.2</td>
  </tr>
  <tr>
    <td align="center"> [] </td>
    <td align="center"></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td align="center"> [ &gt; ] </td>
    <td align="center">Forward</td>
    <td>Next section in reading order</td>
    <td>1.2.4</td>
  </tr>
</table>

<p>
  where the <strong> Example </strong> assumes that the current position is at <strong> Subsubsection One-Two-Three </strong> of a document of the following structure:
</p>

<ul>
  <li> 1. Section One
    <ul>
      <li>1.1 Subsection One-One
        <ul>
          <li>...</li>
        </ul>
      </li>
      <li>1.2 Subsection One-Two
        <ul>
          <li>1.2.1 Subsubsection One-Two-One</li>
          <li>1.2.2 Subsubsection One-Two-Two</li>
          <li>1.2.3 Subsubsection One-Two-Three &nbsp; &nbsp;
            <strong>&lt;== Current Position </strong></li>
          <li>1.2.4 Subsubsection One-Two-Four</li>
        </ul>
      </li>
      <li>1.3 Subsection One-Three
        <ul>
          <li>...</li>
        </ul>
      </li>
      <li>1.4 Subsection One-Four</li>
    </ul>
  </li>
</ul>

<hr size="1">
<!-- footer_tag -->
<div class="footer">
<!-- This footer was autogenerated by /build/buildd/lilypond-2.16.2/scripts/build/out/www_post -->
<p class="footer_version">
This page is for LilyPond-2.16.2 (stable-branch).
</p>
<p class="footer_report">
We welcome your aid; please <a href="http://lilypond.org/help-us.html">help us</a> by reporting errors to our <a href="http://post.gmane.org/post.php?group=gmane.comp.gnu.lilypond.bugs">bug list</a>.
</p>
</div>


<p id="languages">
<!-- These links were autogenerated by /build/buildd/lilypond-2.16.2/scripts/build/out/www_post -->
 Other languages: <a href="usage-big-page.de.html">deutsch</a>, <a href="usage-big-page.es.html">español</a>, <a href="usage-big-page.fr.html">français</a>, <a href="usage-big-page.hu.html">magyar</a>, <a href="usage-big-page.it.html">italiano</a>, <a href="usage-big-page.ja.html">日本語</a>.
 <br>
 About <a href="http://www.lilypond.org/website/misc/browser-language">automatic language selection</a>.
</p>

<!-- FOOTER -->

<!-- end div#main here -->
</div>



<div id="tocframe">
<p class="toc_uplink"><a href="../Documentation/web/manuals.html"
         title="Documentation Index">&lt;&lt; Back to Documentation Index</a></p>
<h4 class="toc_header"> <a href="#index" title="Start of the manual">LilyPond &mdash; Usage</a></h4>
<div class="contents">
<ul class="toc">
  <li class=""><a name="toc-Running-lilypond-1" href="usage-big-page.html#running-lilypond">1. Running <code>lilypond</code></a>
  <ul class="toc">
    <li class=""><a name="toc-Normal-usage-1" href="usage-big-page.html#normal-usage">1.1 Normal usage</a>    </li>
    <li class=""><a name="toc-Command_002dline-usage-1" href="usage-big-page.html#command_002dline-usage">1.2 Command-line usage</a>    </li>
    <li class=""><a name="toc-Error-messages-1" href="usage-big-page.html#error-messages">1.3 Error messages</a>    </li>
    <li class=""><a name="toc-Common-errors-1" href="usage-big-page.html#common-errors">1.4 Common errors</a>    </li>
  </ul>
  </li>
  <li class=""><a name="toc-Updating-files-with-convert_002dly-1" href="usage-big-page.html#updating-files-with-convert_002dly">2. Updating files with <code>convert-ly</code></a>
  <ul class="toc">
    <li class=""><a name="toc-Why-does-the-syntax-change_003f-1" href="usage-big-page.html#why-does-the-syntax-change_003f">2.1 Why does the syntax change?</a>    </li>
    <li class=""><a name="toc-Invoking-convert_002dly-1" href="usage-big-page.html#invoking-convert_002dly">2.2 Invoking <code>convert-ly</code></a>    </li>
    <li class=""><a name="toc-Command-line-options-for-convert_002dly-1" href="usage-big-page.html#command-line-options-for-convert_002dly">2.3 Command line options for <code>convert-ly</code></a>    </li>
    <li class=""><a name="toc-Problems-running-convert_002dly-1" href="usage-big-page.html#problems-running-convert_002dly">2.4 Problems running <code>convert-ly</code></a>    </li>
    <li class=""><a name="toc-Manual-conversions-1" href="usage-big-page.html#manual-conversions">2.5 Manual conversions</a>    </li>
  </ul>
  </li>
  <li class=""><a name="toc-Running-lilypond_002dbook" href="usage-big-page.html#lilypond_002dbook">3. Running <code>lilypond-book</code></a>
  <ul class="toc">
    <li class=""><a name="toc-An-example-of-a-musicological-document-1" href="usage-big-page.html#an-example-of-a-musicological-document">3.1 An example of a musicological document</a>    </li>
    <li class=""><a name="toc-Integrating-music-and-text-1" href="usage-big-page.html#integrating-music-and-text">3.2 Integrating music and text</a>    </li>
    <li class=""><a name="toc-Music-fragment-options-1" href="usage-big-page.html#music-fragment-options">3.3 Music fragment options</a>    </li>
    <li class=""><a name="toc-Invoking-lilypond_002dbook-1" href="usage-big-page.html#invoking-lilypond_002dbook">3.4 Invoking <code>lilypond-book</code></a>    </li>
    <li class=""><a name="toc-Filename-extensions-1" href="usage-big-page.html#filename-extensions">3.5 Filename extensions</a>    </li>
    <li class=""><a name="toc-lilypond_002dbook-templates-1" href="usage-big-page.html#lilypond_002dbook-templates">3.6 lilypond-book templates</a>    </li>
    <li class=""><a name="toc-Sharing-the-table-of-contents-1" href="usage-big-page.html#sharing-the-table-of-contents">3.7 Sharing the table of contents</a>    </li>
    <li class=""><a name="toc-Alternative-methods-of-mixing-text-and-music" href="usage-big-page.html#alternate-methods-of-mixing-text-and-music">3.8 Alternative methods of mixing text and music</a>    </li>
  </ul>
  </li>
  <li class=""><a name="toc-External-programs-1" href="usage-big-page.html#external-programs">4. External programs</a>
  <ul class="toc">
    <li class=""><a name="toc-Point-and-click-1" href="usage-big-page.html#point-and-click">4.1 Point and click</a>    </li>
    <li class=""><a name="toc-Text-editor-support-1" href="usage-big-page.html#text-editor-support">4.2 Text editor support</a>    </li>
    <li class=""><a name="toc-Converting-from-other-formats-1" href="usage-big-page.html#converting-from-other-formats">4.3 Converting from other formats</a>    </li>
    <li class=""><a name="toc-LilyPond-output-in-other-programs-1" href="usage-big-page.html#lilypond-output-in-other-programs">4.4 LilyPond output in other programs</a>    </li>
    <li class=""><a name="toc-Independent-includes-1" href="usage-big-page.html#independent-includes">4.5 Independent <code>include</code>s</a>    </li>
  </ul>
  </li>
  <li class=""><a name="toc-Suggestions-for-writing-files-1" href="usage-big-page.html#suggestions-for-writing-files">5. Suggestions for writing files</a>
  <ul class="toc">
    <li class=""><a name="toc-General-suggestions-1" href="usage-big-page.html#general-suggestions">5.1 General suggestions</a>    </li>
    <li class=""><a name="toc-Typesetting-existing-music-1" href="usage-big-page.html#typesetting-existing-music">5.2 Typesetting existing music</a>    </li>
    <li class=""><a name="toc-Large-projects-1" href="usage-big-page.html#large-projects">5.3 Large projects</a>    </li>
    <li class=""><a name="toc-Troubleshooting-1" href="usage-big-page.html#troubleshooting">5.4 Troubleshooting</a>    </li>
    <li class=""><a name="toc-Make-and-Makefiles-1" href="usage-big-page.html#make-and-makefiles">5.5 Make and Makefiles</a>    </li>
  </ul>
  </li>
  <li class=""><a name="toc-GNU-Free-Documentation-License-1" href="usage-big-page.html#gnu-free-documentation-license">A. GNU Free Documentation License</a>  </li>
  <li class=""><a name="toc-LilyPond-index-1" href="usage-big-page.html#lilypond-index">B. LilyPond index</a>  </li>
<li>
<!--
we depend on an external entity here, which we cannot control.  Suppose
we go from 2.16.x to 2.17.x and put the documentation under "v2.17".
For some time, Google won't have the new location in its index, so the
search would get nothing.  It would be better to keep "v2.16" in the
search for a while and have a redirection from "v2.16" to "v2.17".
-->

<form action="http://google.com/search"
      method="get"
      name="search"
      onSubmit="search.q.value='site:lilypond.org/doc/v2.16 '
		+ search.brute_query.value"
      onMouseMove="search.q.value='site:lilypond.org/doc/v2.16 '
		   + search.brute_query.value"
      onKeyUp="search.q.value='site:lilypond.org/doc/v2.16 '
	       + search.brute_query.value">
  <input type="hidden" name="btnG" value="Google Search">
  <input type="text" name="brute_query" onfocus="this.value=''" value="Search">
  <input type="hidden" name="q" value="">
</form>
</li>
</ul>
</div>
</div>

</body>
</html>
