<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Copyright C 1999-2012 by the authors.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.1
or any later version published by the Free Software Foundation;
with no Invariant Sections.
A copy of the license is included in the section entitled "GNU
Free Documentation License".

 -->
<!-- Created on January 1, 2014 by texi2html 1.82
texi2html was written by: 
            Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Many creative people.
Send bugs and suggestions to <texi2html-bug@nongnu.org>
-->
<head>
<title>LilyPond Application Usage: 3.2.4 DocBook</title>

<meta name="description" content="LilyPond Application Usage: 3.2.4 DocBook">
<meta name="keywords" content="LilyPond Application Usage: 3.2.4 DocBook">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2html 1.82">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link href="index.html#index" rel="start" title="LilyPond &mdash; Usage">
<link href="lilypond-index.html#lilypond-index" rel="index" title="B. LilyPond index">
<link href="index_toc.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="index_abt.html#SEC_About" rel="help" title="About This Document">
<link href="integrating-music-and-text.html#integrating-music-and-text" rel="up" title="3.2 Integrating music and text">
<link href="lilypond-index.html#lilypond-index" rel="next" title="B. LilyPond index">
<link href="html.html#html" rel="previous" title="3.2.3 HTML">
<link rel="stylesheet" type="text/css" title="Default style" href="../../Documentation/css/lilypond-manuals.css">
<!--[if lte IE 7]>
<link href="../../Documentation/css/lilypond-ie-fixes.css" rel="stylesheet" type="text/css">
<![endif]-->


</head>

<body lang="en" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#800080" alink="#FF0000">


<div id="main">
<a name="DocBook"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="lilypond_002dbook.html" title="Beginning of this chapter or previous chapter"> &lt;&lt; lilypond-book&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="index.html" title="Cover (top) of document" rel="start">Top</a>][<a href="index_toc.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="lilypond-index.html" title="Index" rel="index">Index</a>][<a href="index_abt.html#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="external-programs.html" title="Next chapter">&nbsp;External programs &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="html.html" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; HTML&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="integrating-music-and-text.html" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Integrating music and text&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="music-fragment-options.html" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Music fragment options &gt; </a>]</td></tr></table>
<a name="docbook"></a>
<h3 class="subsection">3.2.4 DocBook</h3>

<p>For inserting LilyPond snippets it is good to keep the conformity of our
DocBook document, thus allowing us to use DocBook editors, validation
etc.  So we don&rsquo;t use custom tags, only specify a convention based on the
standard DocBook elements.
</p>
<a name="Common-conventions"></a>
<h3 class="subheading">Common conventions</h3>

<p>For inserting all type of snippets we use the <code>mediaobject</code> and
<code>inlinemediaobject</code> element, so our snippets can be formatted
inline or not inline.  The snippet formatting options are always
provided in the <code>role</code> property of the innermost element (see in
next sections).  Tags are chosen to allow DocBook editors format the
content gracefully.  The DocBook files to be processed with
<code>lilypond-book</code> should have the extension &lsquo;<tt>.lyxml</tt>&rsquo;.
</p>
<a name="Including-a-LilyPond-file"></a>
<h3 class="subheading">Including a LilyPond file</h3>

<p>This is the most simple case.  We must use the &lsquo;<tt>.ly</tt>&rsquo; extension for
the included file, and insert it as a standard <code>imageobject</code>, with
the following structure:
</p>
<blockquote><pre class="example">&lt;mediaobject&gt;
  &lt;imageobject&gt;
    &lt;imagedata fileref=&quot;music1.ly&quot; role=&quot;printfilename&quot; /&gt;
  &lt;/imageobject&gt;
&lt;/mediaobject&gt;
</pre></blockquote>

<p>Note that you can use <code>mediaobject</code> or <code>inlinemediaobject</code>
as the outermost element as you wish.
</p>
<a name="Including-LilyPond-code"></a>
<h3 class="subheading">Including LilyPond code</h3>

<p>Including LilyPond code is possible by using a <code>programlisting</code>,
where the language is set to <code>lilypond</code> with the following
structure:
</p>
<blockquote><pre class="example">&lt;inlinemediaobject&gt;
  &lt;textobject&gt;
    &lt;programlisting language=&quot;lilypond&quot; role=&quot;fragment verbatim staffsize=16 ragged-right relative=2&quot;&gt;
\context Staff \with {
  \remove &quot;Time_signature_engraver&quot;
  \remove &quot;Clef_engraver&quot;}
  { c4( fis) }
    &lt;/programlisting&gt;
  &lt;/textobject&gt;
&lt;/inlinemediaobject&gt;
</pre></blockquote>

<p>As you can see, the outermost element is a <code>mediaobject</code> or
<code>inlinemediaobject</code>, and there is a <code>textobject</code> containing
the <code>programlisting</code> inside.
</p>
<a name="Processing-the-DocBook-document"></a>
<h3 class="subheading">Processing the DocBook document</h3>

<p>Running <code>lilypond-book</code> on our &lsquo;<tt>.lyxml</tt>&rsquo; file will create a
valid DocBook document to be further processed with &lsquo;<tt>.xml</tt>&rsquo;
extension.  If you use
<a href="http://dblatex.sourceforge.net">dblatex</a>, it will create a
PDF file from this document automatically.  For HTML (HTML Help,
JavaHelp etc.) generation you can use the official DocBook XSL
stylesheets, however, it is possible that you have to make some
customization for it.
</p>

<hr size="6">
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="lilypond_002dbook.html" title="Beginning of this chapter or previous chapter"> &lt;&lt; lilypond-book&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="index.html" title="Cover (top) of document" rel="start">Top</a>][<a href="index_toc.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="lilypond-index.html" title="Index" rel="index">Index</a>][<a href="index_abt.html#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="external-programs.html" title="Next chapter">&nbsp;External programs &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="html.html" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; HTML&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="integrating-music-and-text.html" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Integrating music and text&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="music-fragment-options.html" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Music fragment options &gt; </a>]</td></tr></table>
<!-- footer_tag -->
<div class="footer">
<!-- This footer was autogenerated by /build/buildd/lilypond-2.16.2/scripts/build/out/www_post -->
<p class="footer_version">
This page is for LilyPond-2.16.2 (stable-branch).
</p>
<p class="footer_report">
We welcome your aid; please <a href="http://lilypond.org/help-us.html">help us</a> by reporting errors to our <a href="http://post.gmane.org/post.php?group=gmane.comp.gnu.lilypond.bugs">bug list</a>.
</p>
</div>


<p id="languages">
<!-- These links were autogenerated by /build/buildd/lilypond-2.16.2/scripts/build/out/www_post -->
 Other languages: <a href="docbook.de.html">deutsch</a>, <a href="docbook.es.html">español</a>, <a href="docbook.fr.html">français</a>, <a href="docbook.it.html">italiano</a>, <a href="docbook.ja.html">日本語</a>.
 <br>
 About <a href="http://www.lilypond.org/website/misc/browser-language">automatic language selection</a>.
</p>

<!-- FOOTER -->

<!-- end div#main here -->
</div>



<div id="tocframe">
<p class="toc_uplink"><a href="../../Documentation/web/manuals.html"
         title="Documentation Index">&lt;&lt; Back to Documentation Index</a></p>
<h4 class="toc_header"> <a href="index.html" title="Start of the manual">LilyPond &mdash; Usage</a></h4>
<div class="contents">
<ul class="toc">
  <li class=""><a name="toc-Running-lilypond-1" href="running-lilypond.html">1. Running <code>lilypond</code></a>
  <ul class="toc">
    <li class=""><a name="toc-Normal-usage-1" href="normal-usage.html">1.1 Normal usage</a>    </li>
    <li class=""><a name="toc-Command_002dline-usage-1" href="command_002dline-usage.html">1.2 Command-line usage</a>    </li>
    <li class=""><a name="toc-Error-messages-1" href="error-messages.html">1.3 Error messages</a>    </li>
    <li class=""><a name="toc-Common-errors-1" href="common-errors.html">1.4 Common errors</a>    </li>
  </ul>
  </li>
  <li class=""><a name="toc-Updating-files-with-convert_002dly-1" href="updating-files-with-convert_002dly.html">2. Updating files with <code>convert-ly</code></a>
  <ul class="toc">
    <li class=""><a name="toc-Why-does-the-syntax-change_003f-1" href="why-does-the-syntax-change_003f.html">2.1 Why does the syntax change?</a>    </li>
    <li class=""><a name="toc-Invoking-convert_002dly-1" href="invoking-convert_002dly.html">2.2 Invoking <code>convert-ly</code></a>    </li>
    <li class=""><a name="toc-Command-line-options-for-convert_002dly-1" href="command-line-options-for-convert_002dly.html">2.3 Command line options for <code>convert-ly</code></a>    </li>
    <li class=""><a name="toc-Problems-running-convert_002dly-1" href="problems-running-convert_002dly.html">2.4 Problems running <code>convert-ly</code></a>    </li>
    <li class=""><a name="toc-Manual-conversions-1" href="manual-conversions.html">2.5 Manual conversions</a>    </li>
  </ul>
  </li>
  <li class=" toc_current"><a name="toc-Running-lilypond_002dbook" href="lilypond_002dbook.html">3. Running <code>lilypond-book</code></a>
  <ul class="toc">
    <li class=""><a name="toc-An-example-of-a-musicological-document-1" href="an-example-of-a-musicological-document.html">3.1 An example of a musicological document</a>    </li>
    <li class=" toc_current"><a name="toc-Integrating-music-and-text-1" href="integrating-music-and-text.html">3.2 Integrating music and text</a>
    <ul class="toc">
      <li class=""><a name="toc-LaTeX-2" href="latex.html">3.2.1 LaTeX</a>      </li>
      <li class=""><a name="toc-Texinfo-2" href="texinfo.html">3.2.2 Texinfo</a>      </li>
      <li class=""><a name="toc-HTML-1" href="html.html">3.2.3 HTML</a>      </li>
      <li class=" toc_current"><a name="toc-DocBook-1" href="docbook.html">3.2.4 DocBook</a>      </li>
    </ul>
    </li>
    <li class=""><a name="toc-Music-fragment-options-1" href="music-fragment-options.html">3.3 Music fragment options</a>    </li>
    <li class=""><a name="toc-Invoking-lilypond_002dbook-1" href="invoking-lilypond_002dbook.html">3.4 Invoking <code>lilypond-book</code></a>    </li>
    <li class=""><a name="toc-Filename-extensions-1" href="filename-extensions.html">3.5 Filename extensions</a>    </li>
    <li class=""><a name="toc-lilypond_002dbook-templates-1" href="lilypond_002dbook-templates.html">3.6 lilypond-book templates</a>    </li>
    <li class=""><a name="toc-Sharing-the-table-of-contents-1" href="sharing-the-table-of-contents.html">3.7 Sharing the table of contents</a>    </li>
    <li class=""><a name="toc-Alternative-methods-of-mixing-text-and-music" href="alternate-methods-of-mixing-text-and-music.html">3.8 Alternative methods of mixing text and music</a>    </li>
  </ul>
  </li>
  <li class=""><a name="toc-External-programs-1" href="external-programs.html">4. External programs</a>
  <ul class="toc">
    <li class=""><a name="toc-Point-and-click-1" href="point-and-click.html">4.1 Point and click</a>    </li>
    <li class=""><a name="toc-Text-editor-support-1" href="text-editor-support.html">4.2 Text editor support</a>    </li>
    <li class=""><a name="toc-Converting-from-other-formats-1" href="converting-from-other-formats.html">4.3 Converting from other formats</a>    </li>
    <li class=""><a name="toc-LilyPond-output-in-other-programs-1" href="lilypond-output-in-other-programs.html">4.4 LilyPond output in other programs</a>    </li>
    <li class=""><a name="toc-Independent-includes-1" href="independent-includes.html">4.5 Independent <code>include</code>s</a>    </li>
  </ul>
  </li>
  <li class=""><a name="toc-Suggestions-for-writing-files-1" href="suggestions-for-writing-files.html">5. Suggestions for writing files</a>
  <ul class="toc">
    <li class=""><a name="toc-General-suggestions-1" href="general-suggestions.html">5.1 General suggestions</a>    </li>
    <li class=""><a name="toc-Typesetting-existing-music-1" href="typesetting-existing-music.html">5.2 Typesetting existing music</a>    </li>
    <li class=""><a name="toc-Large-projects-1" href="large-projects.html">5.3 Large projects</a>    </li>
    <li class=""><a name="toc-Troubleshooting-1" href="troubleshooting.html">5.4 Troubleshooting</a>    </li>
    <li class=""><a name="toc-Make-and-Makefiles-1" href="make-and-makefiles.html">5.5 Make and Makefiles</a>    </li>
  </ul>
  </li>
  <li class=""><a name="toc-GNU-Free-Documentation-License-1" href="gnu-free-documentation-license.html">A. GNU Free Documentation License</a>  </li>
  <li class=""><a name="toc-LilyPond-index-1" href="lilypond-index.html">B. LilyPond index</a>  </li>
<li>
<!--
we depend on an external entity here, which we cannot control.  Suppose
we go from 2.16.x to 2.17.x and put the documentation under "v2.17".
For some time, Google won't have the new location in its index, so the
search would get nothing.  It would be better to keep "v2.16" in the
search for a while and have a redirection from "v2.16" to "v2.17".
-->

<form action="http://google.com/search"
      method="get"
      name="search"
      onSubmit="search.q.value='site:lilypond.org/doc/v2.16 '
		+ search.brute_query.value"
      onMouseMove="search.q.value='site:lilypond.org/doc/v2.16 '
		   + search.brute_query.value"
      onKeyUp="search.q.value='site:lilypond.org/doc/v2.16 '
	       + search.brute_query.value">
  <input type="hidden" name="btnG" value="Google Search">
  <input type="text" name="brute_query" onfocus="this.value=''" value="Search">
  <input type="hidden" name="q" value="">
</form>
</li>
</ul>
</div>
</div>

</body>
</html>
